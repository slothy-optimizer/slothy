/**
 * Copyright (c) 2023 Junhao Huang (jhhuang_nuaa@126.com)
 *
 * Licensed under the Apache License, Version 2.0(the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http:// www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
.syntax unified
.cpu cortex-m4
.thumb

// general macros
.macro load a, a0, a1, a2, a3, mem0, mem1, mem2, mem3
  ldr.w \a0, [\a, \mem0]
  ldr.w \a1, [\a, \mem1]
  ldr.w \a2, [\a, \mem2]
  ldr.w \a3, [\a, \mem3]
.endm

.macro store a, a0, a1, a2, a3, mem0, mem1, mem2, mem3
  str.w \a0, [\a, \mem0]
  str.w \a1, [\a, \mem1]
  str.w \a2, [\a, \mem2]
  str.w \a3, [\a, \mem3]
.endm

.macro mul_twiddle_plant a, twiddle, tmp, q, qa
 smulwb \tmp, \twiddle, \a
 smulwt \a,   \twiddle, \a
 smlabt \tmp, \tmp, \q, \qa
 smlabt \a, \a, \q, \qa
 pkhtb \a, \a, \tmp, asr #16
.endm

.macro doublebutterfly_plant a0, a1, twiddle, tmp, q, qa
 smulwb \tmp, \twiddle, \a1
 smulwt \a1, \twiddle, \a1
 smlabt \tmp, \tmp, \q, \qa
 smlabt \a1, \a1, \q, \qa
 pkhtb \tmp, \a1, \tmp, asr #16
 usub16 \a1, \a0, \tmp
 uadd16 \a0, \a0, \tmp
.endm

.macro two_doublebutterfly_plant a0, a1, a2, a3, twiddle0, twiddle1, tmp, q, qa
 doublebutterfly_plant \a0, \a1, \twiddle0, \tmp, \q, \qa
 doublebutterfly_plant \a2, \a3, \twiddle1, \tmp, \q, \qa
.endm

// #######
// #######
// # NTT #
// #######
// #######

.macro _3_layer_double_CT_16_plant c0, c1, c2, c3, c4, c5, c6, c7, twiddle1, twiddle2, twiddle_ptr, q, qa, tmp
 // layer 3
 ldr.w \twiddle1, [\twiddle_ptr], #28
 two_doublebutterfly_plant \c0, \c4, \c1, \c5, \twiddle1, \twiddle1, \tmp, \q, \qa
 two_doublebutterfly_plant \c2, \c6, \c3, \c7, \twiddle1, \twiddle1, \tmp, \q, \qa

 // layer 2
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr, #-24]
 two_doublebutterfly_plant \c0, \c2, \c1, \c3, \twiddle1, \twiddle1, \tmp, \q, \qa

 two_doublebutterfly_plant \c4, \c6, \c5, \c7, \twiddle2, \twiddle2, \tmp, \q, \qa

 // layer 1
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr, #-16]
 two_doublebutterfly_plant \c0, \c1, \c2, \c3, \twiddle1, \twiddle2, \tmp, \q, \qa

 ldrd \twiddle1, \twiddle2, [\twiddle_ptr, #-8]
 two_doublebutterfly_plant \c4, \c5, \c6, \c7, \twiddle1, \twiddle2, \tmp, \q, \qa
.endm

.macro _3_layer_double_CT_16_plant_fp c0, c1, c2, c3, c4, c5, c6, c7, xi0, xi1, xi2, xi3, xi4, xi5, xi6, twiddle1, twiddle2, q, qa, tmp
 // layer 3
 vmov \twiddle1, \xi0
 two_doublebutterfly_plant \c0, \c4, \c1, \c5, \twiddle1, \twiddle1, \tmp, \q, \qa
 two_doublebutterfly_plant \c2, \c6, \c3, \c7, \twiddle1, \twiddle1, \tmp, \q, \qa

 // layer 2
 vmov \twiddle1, \xi1
 vmov \twiddle2, \xi2
 two_doublebutterfly_plant \c0, \c2, \c1, \c3, \twiddle1, \twiddle1, \tmp, \q, \qa

 two_doublebutterfly_plant \c4, \c6, \c5, \c7, \twiddle2, \twiddle2, \tmp, \q, \qa

 // layer 1
 vmov \twiddle1, \xi3
 vmov \twiddle2, \xi4
 two_doublebutterfly_plant \c0, \c1, \c2, \c3, \twiddle1, \twiddle2, \tmp, \q, \qa

 vmov \twiddle1, \xi5
 vmov \twiddle2, \xi6
 two_doublebutterfly_plant \c4, \c5, \c6, \c7, \twiddle1, \twiddle2, \tmp, \q, \qa
.endm

.global small_ntt_asm_769_opt_m7
.type small_ntt_asm_769_opt_m7, %function
.align 2
small_ntt_asm_769_opt_m7:
 push {r4-r11, r14}
 vpush.w {s16-s27}
 poly         .req r0
 twiddle_ptr  .req r1
 poly0        .req r2
 poly1        .req r3
 poly2        .req r4
 poly3        .req r5
 poly4        .req r6
 poly5        .req r7
 poly6        .req r8
 poly7        .req r9
 twiddle1     .req r10
 twiddle2     .req r11
 ###  qinv        .req r11 ### q^-1 mod 2^2n; n=16
 q           .req r12
 ### at the top of r12
 qa          .req r0
 ### qa=2^a q;a=3; at the bottom of r12
 tmp         .req r14

 // movw qa, #24608
 // Why movt? Because we initially placed qa at the bottom of the same register as q;
 movt q, #769

 ### LAYER 7+6+5+4
 .equ distance, 256
 .equ offset, 32
 .equ strincr, 4
 // pre-load 15 twiddle factors to 15 FPU registers
 // s0-s7 used to temporary store 16 16-bit polys.
 vldm twiddle_ptr!, {s8-s22}

 add tmp, poly, #strincr*8
 // s23: poly addr
 // s24: tmp
        // s25: twiddle_ptr
 vmov s24, tmp
layer1234_loop:
                                            // Instructions:    302
                                            // Expected cycles: 159
                                            // Expected IPC:    1.90
                                            //
                                            // --------------------------------------------------------------------------------------------------------------------------------------------- original position --------------------------------------------------------------------------------------------------------------------------------------------->
                                            // 0                        25                       50                       75                       100                      125                      150                      175                      200                      225                      250                      275                      300
                                            // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|-
        vmov r14, s8                        // ...*..........................................................................................................................................................................................................................................................................................................
        ldr.w r11, [r0, #416]               // ......*.......................................................................................................................................................................................................................................................................................................
        vmov s23, r0                        // ..*...........................................................................................................................................................................................................................................................................................................
        ldr.w r5, [r0, #352]                // ....*.........................................................................................................................................................................................................................................................................................................
        ldr.w r9, [r0, #96]                 // .*............................................................................................................................................................................................................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        ldr.w r2, [r0, #288]                // ........*.....................................................................................................................................................................................................................................................................................................
        smulwb r7, r14, r5                  // .............*................................................................................................................................................................................................................................................................................................
        ldr.w r10, [r0, #32]                // ..........*...................................................................................................................................................................................................................................................................................................
        smulwt r6, r14, r5                  // .......*......................................................................................................................................................................................................................................................................................................
        ldr.w r5, [r0, #480]                // .....*........................................................................................................................................................................................................................................................................................................
        smulwb r4, r14, r2                  // ....................*.........................................................................................................................................................................................................................................................................................
        ldr.w r8, [r0, #160]                // ............*.................................................................................................................................................................................................................................................................................................
        smulwt r3, r14, r2                  // ......................*.......................................................................................................................................................................................................................................................................................
        ldr.w r2, [r0, #224]                // *.............................................................................................................................................................................................................................................................................................................
        movw r0, #24608                     // ..............*...............................................................................................................................................................................................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smlabt r4, r4, r12, r0              // ........................*.....................................................................................................................................................................................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smlabt r3, r3, r12, r0              // ..........................*...................................................................................................................................................................................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smlabt r6, r6, r12, r0              // ...................*..........................................................................................................................................................................................................................................................................................
        pkhtb r4, r3, r4, asr #16           // ............................*.................................................................................................................................................................................................................................................................................
        smlabt r7, r7, r12, r0              // .................*............................................................................................................................................................................................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smulwb r3, r14, r5                  // .........*....................................................................................................................................................................................................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smulwt r5, r14, r5                  // ...........*..................................................................................................................................................................................................................................................................................................
        pkhtb r7, r6, r7, asr #16           // .....................*........................................................................................................................................................................................................................................................................................
        smlabt r3, r3, r12, r0              // ...............*..............................................................................................................................................................................................................................................................................................
        usub16 r6, r10, r4                  // ..............................*...............................................................................................................................................................................................................................................................................
        smlabt r5, r5, r12, r0              // ................*.............................................................................................................................................................................................................................................................................................
        uadd16 r4, r10, r4                  // ................................*.............................................................................................................................................................................................................................................................................
        smulwb r10, r14, r11                // ...........................*..................................................................................................................................................................................................................................................................................
        pkhtb r3, r5, r3, asr #16           // ..................*...........................................................................................................................................................................................................................................................................................
        smulwt r14, r14, r11                // .............................*................................................................................................................................................................................................................................................................................
        usub16 r5, r2, r3                   // ......................................*.......................................................................................................................................................................................................................................................................
        vmov r11, s9                        // ...................................*..........................................................................................................................................................................................................................................................................
        uadd16 r2, r2, r3                   // ..................................*...........................................................................................................................................................................................................................................................................
        smlabt r3, r10, r12, r0             // ...............................*..............................................................................................................................................................................................................................................................................
        uadd16 r10, r9, r7                  // .........................*....................................................................................................................................................................................................................................................................................
        smlabt r14, r14, r12, r0            // .................................*............................................................................................................................................................................................................................................................................
        usub16 r7, r9, r7                   // .......................*......................................................................................................................................................................................................................................................................................
        smulwb r9, r11, r2                  // .....................................*........................................................................................................................................................................................................................................................................
        pkhtb r3, r14, r3, asr #16          // ....................................*.........................................................................................................................................................................................................................................................................
        smulwt r2, r11, r2                  // .......................................*......................................................................................................................................................................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smlabt r14, r9, r12, r0             // .........................................*....................................................................................................................................................................................................................................................................
        uadd16 r9, r8, r3                   // ..........................................*...................................................................................................................................................................................................................................................................
        smlabt r2, r2, r12, r0              // ...........................................*..................................................................................................................................................................................................................................................................
        usub16 r8, r8, r3                   // ........................................*.....................................................................................................................................................................................................................................................................
        smulwb r3, r11, r9                  // ..............................................*...............................................................................................................................................................................................................................................................
        pkhtb r2, r2, r14, asr #16          // .............................................*................................................................................................................................................................................................................................................................
        smulwt r9, r11, r9                  // ............................................*.................................................................................................................................................................................................................................................................
        uadd16 r11, r10, r2                 // ...............................................*..............................................................................................................................................................................................................................................................
        smlabt r3, r3, r12, r0              // ..................................................*...........................................................................................................................................................................................................................................................
        vmov r14, s11                       // ................................................................*.............................................................................................................................................................................................................................................
        smlabt r9, r9, r12, r0              // ................................................*.............................................................................................................................................................................................................................................................
        usub16 r10, r10, r2                 // ...................................................*..........................................................................................................................................................................................................................................................
        smulwb r2, r14, r11                 // ...................................................................*..........................................................................................................................................................................................................................................
        pkhtb r9, r9, r3, asr #16           // ......................................................*.......................................................................................................................................................................................................................................................
        smulwt r3, r14, r11                 // .....................................................................*........................................................................................................................................................................................................................................
        uadd16 r14, r4, r9                  // ........................................................*.....................................................................................................................................................................................................................................................
        smlabt r11, r2, r12, r0             // .......................................................................*......................................................................................................................................................................................................................................
        vmov r2, s12                        // ......................................................................*.......................................................................................................................................................................................................................................
        smlabt r3, r3, r12, r0              // .........................................................................*....................................................................................................................................................................................................................................
        usub16 r4, r4, r9                   // ..........................................................*...................................................................................................................................................................................................................................................
        smulwt r9, r2, r10                  // .............................................................................*................................................................................................................................................................................................................................
        pkhtb r11, r3, r11, asr #16         // ............................................................................*.................................................................................................................................................................................................................................
        smulwb r2, r2, r10                  // ...........................................................................*..................................................................................................................................................................................................................................
        usub16 r3, r14, r11                 // ..................................................................................*...........................................................................................................................................................................................................................
        smlabt r10, r9, r12, r0             // .................................................................................*............................................................................................................................................................................................................................
        vmov r9, s16                        // .............................................................................................*................................................................................................................................................................................................................
        smlabt r2, r2, r12, r0              // ...............................................................................*..............................................................................................................................................................................................................................
        uadd16 r11, r14, r11                // ................................................................................*.............................................................................................................................................................................................................................
        smulwb r14, r9, r3                  // ................................................................................................*.............................................................................................................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smulwt r9, r9, r3                   // ...............................................................................................*..............................................................................................................................................................................................................
        pkhtb r3, r10, r2, asr #16          // ....................................................................................*.........................................................................................................................................................................................................................
        smlabt r14, r14, r12, r0            // ....................................................................................................*.........................................................................................................................................................................................................
        vmov r2, s10                        // .................................................*............................................................................................................................................................................................................................................................
        smlabt r9, r9, r12, r0              // ..................................................................................................*...........................................................................................................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smulwb r10, r2, r5                  // ...........................................................*..................................................................................................................................................................................................................................................
        pkhtb r14, r9, r14, asr #16         // ........................................................................................................*.....................................................................................................................................................................................................
        smulwt r9, r2, r5                   // .............................................................*................................................................................................................................................................................................................................................
        vmov s1, r14                        // ..........................................................................................................*...................................................................................................................................................................................................
        smlabt r10, r10, r12, r0            // ...............................................................*..............................................................................................................................................................................................................................................
        usub16 r5, r4, r3                   // ........................................................................................*.....................................................................................................................................................................................................................
        smlabt r14, r9, r12, r0             // .................................................................*............................................................................................................................................................................................................................................
        uadd16 r4, r4, r3                   // ..........................................................................................*...................................................................................................................................................................................................................
        smulwb r3, r2, r8                   // ....................................................*.........................................................................................................................................................................................................................................................
        pkhtb r10, r14, r10, asr #16        // ....................................................................*.........................................................................................................................................................................................................................................
        smulwt r8, r2, r8                   // .....................................................*........................................................................................................................................................................................................................................................
        usub16 r9, r7, r10                  // ..........................................................................*...................................................................................................................................................................................................................................
        smlabt r2, r3, r12, r0              // .......................................................*......................................................................................................................................................................................................................................................
        vmov r14, s14                       // ..............................................................................*...............................................................................................................................................................................................................................
        smlabt r3, r8, r12, r0              // .........................................................*....................................................................................................................................................................................................................................................
        uadd16 r10, r7, r10                 // ........................................................................*.....................................................................................................................................................................................................................................
        smulwb r8, r14, r9                  // ...................................................................................*..........................................................................................................................................................................................................................
        vmov r7, s18                        // ............................................................................................................*.................................................................................................................................................................................................
        smulwt r14, r14, r9                 // .....................................................................................*........................................................................................................................................................................................................................
        pkhtb r9, r3, r2, asr #16           // ............................................................*.................................................................................................................................................................................................................................................
        smlabt r8, r8, r12, r0              // .......................................................................................*......................................................................................................................................................................................................................
        usub16 r3, r6, r9                   // ..............................................................*...............................................................................................................................................................................................................................................
        smlabt r2, r14, r12, r0             // .........................................................................................*....................................................................................................................................................................................................................
        uadd16 r6, r6, r9                   // ..................................................................*...........................................................................................................................................................................................................................................
        smulwb r14, r7, r5                  // ...............................................................................................................*..............................................................................................................................................................................................
        pkhtb r9, r2, r8, asr #16           // ...........................................................................................*..................................................................................................................................................................................................................
        smulwt r8, r7, r5                   // .................................................................................................................*............................................................................................................................................................................................
        uadd16 r7, r3, r9                   // .................................................................................................*............................................................................................................................................................................................................
        smlabt r5, r14, r12, r0             // .....................................................................................................................*........................................................................................................................................................................................
        vmov r14, s21                       // ....................................................................................................................*.........................................................................................................................................................................................
        smlabt r8, r8, r12, r0              // ......................................................................................................................................*.......................................................................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smulwb r2, r14, r7                  // ......................................................................................................................*.......................................................................................................................................................................................
        pkhtb r8, r8, r5, asr #16           // ........................................................................................................................................*.....................................................................................................................................................................
        smulwt r7, r14, r7                  // .......................................................................................................................*......................................................................................................................................................................................
        vmov r14, s17                       // .......................................................................................................................................*......................................................................................................................................................................
        smlabt r5, r2, r12, r0              // .........................................................................................................................*....................................................................................................................................................................................
        vmov s3, r8                         // ..........................................................................................................................................*...................................................................................................................................................................
        smulwb r8, r14, r4                  // ...........................................................................................................................................*..................................................................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smulwt r2, r14, r4                  // ...............................................................................................................................................*..............................................................................................................................................................
        usub16 r4, r3, r9                   // ...................................................................................................*..........................................................................................................................................................................................................
        smlabt r14, r7, r12, r0             // ...........................................................................................................................*..................................................................................................................................................................................
        vmov r7, s13                        // ......................................................................................*.......................................................................................................................................................................................................................
        smlabt r9, r8, r12, r0              // .................................................................................................................................................*............................................................................................................................................................
        pkhtb r5, r14, r5, asr #16          // ..............................................................................................................................*...............................................................................................................................................................................
        smulwb r3, r7, r10                  // ............................................................................................*.................................................................................................................................................................................................................
        vmov s6, r5                         // ..................................................................................................................................................*...........................................................................................................................................................
        smulwt r7, r7, r10                  // ..............................................................................................*...............................................................................................................................................................................................................
        vmov r10, s23                       // .........................................................................................................................................*....................................................................................................................................................................
        smlabt r3, r3, r12, r0              // .......................................................................................................*......................................................................................................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smlabt r8, r7, r12, r0              // .....................................................................................................*........................................................................................................................................................................................................
        vmov r7, s22                        // ......................................................................................................*.......................................................................................................................................................................................................
        smlabt r5, r2, r12, r0              // ...................................................................................................................................................*..........................................................................................................................................................
        pkhtb r2, r8, r3, asr #16           // ..............................................................................................................*...............................................................................................................................................................................................
        smulwb r8, r7, r4                   // .........................................................................................................*....................................................................................................................................................................................................
        pkhtb r9, r5, r9, asr #16           // ......................................................................................................................................................*.......................................................................................................................................................
        smulwt r7, r7, r4                   // ...........................................................................................................*..................................................................................................................................................................................................
        usub16 r3, r6, r2                   // ................................................................................................................*.............................................................................................................................................................................................
        smlabt r8, r8, r12, r0              // .............................................................................................................*................................................................................................................................................................................................
        vmov r4, s15                        // ..........................................................................................................................*...................................................................................................................................................................................
        smlabt r7, r7, r12, r0              // ...................................................................................................................*..........................................................................................................................................................................................
        uadd16 r2, r6, r2                   // ..................................................................................................................*...........................................................................................................................................................................................
        smulwt r14, r4, r11                 // .............................................................................................................................*................................................................................................................................................................................
        vmov r5, s19                        // ................................................................................................................................*.............................................................................................................................................................................
        smulwb r6, r4, r11                  // ............................................................................................................................*.................................................................................................................................................................................
        pkhtb r7, r7, r8, asr #16           // ........................................................................................................................*.....................................................................................................................................................................................
        smulwb r8, r5, r2                   // ..................................................................................................................................*...........................................................................................................................................................................
        vmov r4, s20                        // ........................................................................................................................................................*.....................................................................................................................................................
        smulwt r11, r5, r2                  // ....................................................................................................................................*.........................................................................................................................................................................
        vmov s2, r9                         // ............................................................................................................................................................*.................................................................................................................................................
        smlabt r9, r8, r12, r0              // .............................................................................................................................................*................................................................................................................................................................
        vmov s7, r7                         // ............................................................................................................................................*.................................................................................................................................................................
        smlabt r11, r11, r12, r0            // .....................................................................................................................................................*........................................................................................................................................................
        vmov r5, s8                         // ....................................................................................................................................................*.........................................................................................................................................................
        smulwt r8, r4, r3                   // .............................................................................................................................................................*................................................................................................................................................
        pkhtb r9, r11, r9, asr #16          // ..........................................................................................................................................................*...................................................................................................................................................
        smlabt r11, r6, r12, r0             // ...............................................................................................................................*..............................................................................................................................................................................
        ldr.w r6, [r10, #256]               // ..............................................................................................................................................................*...............................................................................................................................................
        smlabt r14, r14, r12, r0            // .................................................................................................................................*............................................................................................................................................................................
        vmov s4, r9                         // .......................................................................................................................................................................................*......................................................................................................................
        smulwb r7, r4, r3                   // ...........................................................................................................................................................*..................................................................................................................................................
        pkhtb r11, r14, r11, asr #16        // ...................................................................................................................................*..........................................................................................................................................................................
        smulwt r2, r5, r6                   // ...........................................................................................................................................................................*..................................................................................................................................
        ldr.w r14, [r10, #448]              // ................................................................................................................................................................................*.............................................................................................................................
        smlabt r7, r7, r12, r0              // ...............................................................................................................................................................*..............................................................................................................................................
        vmov s0, r11                        // .....................................................................................................................................*........................................................................................................................................................................
        smlabt r11, r8, r12, r0             // .................................................................................................................................................................*............................................................................................................................................
        ldr.w r8, [r10, #320]               // ................................................................................................................................................*.............................................................................................................................................................
        smulwt r3, r5, r14                  // ......................................................................................................................................................................................*.......................................................................................................................
        pkhtb r7, r11, r7, asr #16          // ......................................................................................................................................................................*.......................................................................................................................................
        smulwb r6, r5, r6                   // .........................................................................................................................................................................*....................................................................................................................................
        vmov s5, r7                         // ........................................................................................................................................................................*.....................................................................................................................................
        smulwb r7, r5, r8                   // .......................................................................................................................................................*......................................................................................................................................................
        movw r0, #24608                     // ..................................................................................................................................................................*...........................................................................................................................................
        smlabt r6, r6, r12, r0              // .............................................................................................................................................................................*................................................................................................................................
        ldr.w r9, [r10, #0]                 // ....................................................................................................................................................................*.........................................................................................................................................
        smlabt r2, r2, r12, r0              // ...............................................................................................................................................................................*..............................................................................................................................
        ldr.w r4, [r10, #384]               // ................................................................................................................................................................*.............................................................................................................................................
        smulwt r8, r5, r8                   // .........................................................................................................................................................*....................................................................................................................................................
        pkhtb r11, r2, r6, asr #16          // ..................................................................................................................................................................................*...........................................................................................................................
        smlabt r7, r7, r12, r0              // .....................................................................................................................................................................*........................................................................................................................................
        uadd16 r2, r9, r11                  // ....................................................................................................................................................................................*.........................................................................................................................
        smlabt r8, r8, r12, r0              // ...................................................................................................................................................................*..........................................................................................................................................
        usub16 r6, r9, r11                  // .....................................................................................................................................................................................*........................................................................................................................
        smulwb r9, r5, r4                   // .......................................................................................................................................................................*......................................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smulwb r11, r5, r14                 // ........................................................................................................................................................................................*.....................................................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smulwt r4, r5, r4                   // .................................................................................................................................................................................*............................................................................................................................
        pkhtb r7, r8, r7, asr #16           // ..........................................................................................................................................................................*...................................................................................................................................
        smlabt r9, r9, r12, r0              // ...................................................................................................................................................................................*..........................................................................................................................
        ldr.w r5, [r10, #128]               // .........................................................................................................................................................................................*....................................................................................................................
        smlabt r8, r4, r12, r0              // ..........................................................................................................................................................................................*...................................................................................................................
        ldr.w r14, [r10, #192]              // ...........................................................................................................................................................................................*..................................................................................................................
        smlabt r4, r11, r12, r0             // ............................................................................................................................................................................................*.................................................................................................................
        pkhtb r11, r8, r9, asr #16          // .............................................................................................................................................................................................*................................................................................................................
        smlabt r8, r3, r12, r0              // ..............................................................................................................................................................................................*...............................................................................................................
        usub16 r9, r5, r11                  // ...................................................................................................................................................................................................*..........................................................................................................
        vmov r3, s10                        // ..............................................................................................................................................................................................................*...............................................................................................
        pkhtb r8, r8, r4, asr #16           // .................................................................................................................................................................................................*............................................................................................................
        smulwb r4, r3, r9                   // .................................................................................................................................................................................................................*............................................................................................
        uadd16 r11, r5, r11                 // ...............................................................................................................................................................................................*..............................................................................................................
        smulwt r5, r3, r9                   // ...................................................................................................................................................................................................................*..........................................................................................
        ldr.w r9, [r10, #64]                // ..............................................................................................................................................*...............................................................................................................................................................
        smlabt r4, r4, r12, r0              // .....................................................................................................................................................................................................................*........................................................................................
        usub16 r10, r14, r8                 // .....................................................................................................................................................................................................*........................................................................................................
        smlabt r5, r5, r12, r0              // .......................................................................................................................................................................................................................*......................................................................................
        uadd16 r8, r14, r8                  // .......................................................................................................................................................................................................*......................................................................................................
        smulwb r14, r3, r10                 // ........................................................................................................................................................................................................................*.....................................................................................
        pkhtb r4, r5, r4, asr #16           // .........................................................................................................................................................................................................................*....................................................................................
        smulwt r3, r3, r10                  // ..........................................................................................................................................................................................................................*...................................................................................
        uadd16 r10, r9, r7                  // ............................................................................................................................................................................*.................................................................................................................................
        smlabt r14, r14, r12, r0            // ............................................................................................................................................................................................................................*.................................................................................
        vmov r5, s9                         // ................................................................................................................................................................................................*.............................................................................................................
        smlabt r3, r3, r12, r0              // ..............................................................................................................................................................................................................................*...............................................................................
        usub16 r9, r9, r7                   // ..............................................................................................................................................................................*...............................................................................................................................
        smulwb r7, r5, r8                   // .........................................................................................................................................................................................................*....................................................................................................
        pkhtb r3, r3, r14, asr #16          // .................................................................................................................................................................................................................................*............................................................................
        smulwt r14, r5, r8                  // ...........................................................................................................................................................................................................*..................................................................................................
        usub16 r8, r6, r4                   // ...........................................................................................................................................................................................................................*..................................................................................
        smlabt r7, r7, r12, r0              // .............................................................................................................................................................................................................*................................................................................................
        uadd16 r6, r6, r4                   // ...............................................................................................................................................................................................................................*..............................................................................
        smlabt r14, r14, r12, r0            // ...............................................................................................................................................................................................................*..............................................................................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        smulwb r4, r5, r11                  // ..................................................................................................................................................................................................*...........................................................................................................
        pkhtb r14, r14, r7, asr #16         // ..................................................................................................................................................................................................................*...........................................................................................
        smulwt r7, r5, r11                  // ....................................................................................................................................................................................................*.........................................................................................................
        usub16 r11, r10, r14                // ....................................................................................................................................................................................................................*.........................................................................................
        smlabt r4, r4, r12, r0              // ......................................................................................................................................................................................................*.......................................................................................................
        vmov r5, s12                        // .............................................................................................................................................................................................................................*................................................................................
        smlabt r7, r7, r12, r0              // ........................................................................................................................................................................................................*.....................................................................................................
        uadd16 r10, r10, r14                // ......................................................................................................................................................................................................................*.......................................................................................
        smulwt r14, r5, r11                 // ...................................................................................................................................................................................................................................*..........................................................................
        pkhtb r7, r7, r4, asr #16           // ..........................................................................................................................................................................................................*...................................................................................................
        smulwb r4, r5, r11                  // ................................................................................................................................................................................................................................*.............................................................................
        usub16 r11, r2, r7                  // ............................................................................................................................................................................................................*.................................................................................................
        smlabt r5, r14, r12, r0             // .......................................................................................................................................................................................................................................*......................................................................
        uadd16 r2, r2, r7                   // ................................................................................................................................................................................................................*.............................................................................................
        smlabt r4, r4, r12, r0              // .....................................................................................................................................................................................................................................*........................................................................
        usub16 r7, r9, r3                   // ..................................................................................................................................................................................................................................*...........................................................................
        vmov r14, s14                       // ......................................................................................................................................................................................................................................*.......................................................................
        uadd16 r9, r9, r3                   // ....................................................................................................................................................................................................................................*.........................................................................
        smulwb r3, r14, r7                  // ........................................................................................................................................................................................................................................*.....................................................................
        pkhtb r5, r5, r4, asr #16           // .........................................................................................................................................................................................................................................*....................................................................
        smulwt r4, r14, r7                  // ..........................................................................................................................................................................................................................................*...................................................................
        uadd16 r14, r11, r5                 // ...............................................................................................................................................................................................................................................*..............................................................
        smlabt r7, r3, r12, r0              // ............................................................................................................................................................................................................................................*.................................................................
        vmov r3, s11                        // .............................................................................................................................................................................................................................................*................................................................
        smlabt r4, r4, r12, r0              // ..............................................................................................................................................................................................................................................*...............................................................
        usub16 r5, r11, r5                  // ...........................................................................................................................................................................................................................................*..................................................................
        smulwb r11, r3, r10                 // ................................................................................................................................................................................................................................................*.............................................................
        pkhtb r4, r4, r7, asr #16           // .................................................................................................................................................................................................................................................*............................................................
        smulwt r10, r3, r10                 // ..................................................................................................................................................................................................................................................*...........................................................
        usub16 r3, r8, r4                   // ...................................................................................................................................................................................................................................................*..........................................................
        smlabt r11, r11, r12, r0            // ....................................................................................................................................................................................................................................................*.........................................................
        vmov r7, s13                        // .....................................................................................................................................................................................................................................................*........................................................
        smlabt r10, r10, r12, r0            // ......................................................................................................................................................................................................................................................*.......................................................
        uadd16 r8, r8, r4                   // .......................................................................................................................................................................................................................................................*......................................................
        smulwb r4, r7, r9                   // ........................................................................................................................................................................................................................................................*.....................................................
        pkhtb r11, r10, r11, asr #16        // .........................................................................................................................................................................................................................................................*....................................................
        smulwt r10, r7, r9                  // ..........................................................................................................................................................................................................................................................*...................................................
        vmov r7, s2                         // ...........................................................................................................................................................................................................................................................*..................................................
        smlabt r4, r4, r12, r0              // ............................................................................................................................................................................................................................................................*.................................................
        usub16 r9, r14, r7                  // .............................................................................................................................................................................................................................................................*................................................
        smlabt r0, r10, r12, r0             // ..............................................................................................................................................................................................................................................................*...............................................
        uadd16 r14, r14, r7                 // ...............................................................................................................................................................................................................................................................*..............................................
        vmov r10, s5                        // ................................................................................................................................................................................................................................................................*.............................................
        pkhtb r7, r0, r4, asr #16           // .................................................................................................................................................................................................................................................................*............................................
        vmov r0, s23                        // ..................................................................................................................................................................................................................................................................*...........................................
        usub16 r4, r2, r11                  // ...................................................................................................................................................................................................................................................................*..........................................
        str.w r9, [r0, #160]                // ....................................................................................................................................................................................................................................................................*.........................................
        usub16 r9, r6, r7                   // .......................................................................................................................................................................................................................................................................*......................................
        str.w r14, [r0, #128]               // ........................................................................................................................................................................................................................................................................*.....................................
        uadd16 r7, r6, r7                   // ...........................................................................................................................................................................................................................................................................*..................................
        vmov r6, s7                         // ............................................................................................................................................................................................................................................................................*.................................
        usub16 r14, r9, r10                 // .........................................................................................................................................................................................................................................................................*....................................
        // gap                              // ..............................................................................................................................................................................................................................................................................................................
        uadd16 r11, r2, r11                 // .....................................................................................................................................................................................................................................................................*........................................
        str.w r14, [r0, #352]               // ..........................................................................................................................................................................................................................................................................*...................................
        uadd16 r14, r9, r10                 // .............................................................................................................................................................................................................................................................................*................................
        str.w r14, [r0, #320]               // ..............................................................................................................................................................................................................................................................................*...............................
        uadd16 r10, r3, r6                  // ...............................................................................................................................................................................................................................................................................*..............................
        vmov r14, s24                       // ................................................................................................................................................................................................................................................................................*.............................
        usub16 r3, r3, r6                   // ..................................................................................................................................................................................................................................................................................*...........................
        str.w r3, [r0, #480]                // ...........................................................................................................................................................................................................................................................................................*..................
        str.w r10, [r0, #448]               // .................................................................................................................................................................................................................................................................................*............................
        vmov r3, s3                         // ...................................................................................................................................................................................................................................................................................*..........................
        uadd16 r9, r5, r3                   // ....................................................................................................................................................................................................................................................................................*.........................
        str.w r9, [r0, #192]                // .....................................................................................................................................................................................................................................................................................*........................
        usub16 r5, r5, r3                   // ......................................................................................................................................................................................................................................................................................*.......................
        vmov r3, s4                         // ......................................................................................................................................................................................................................................................................*.......................................
        uadd16 r9, r7, r3                   // ..............................................................................................................................................................................................................................................................................................*...............
        vmov r10, s0                        // ...................................................................................................................................................................................................................................................................................................*..........
        usub16 r7, r7, r3                   // ........................................................................................................................................................................................................................................................................................*.....................
        str.w r7, [r0, #288]                // .........................................................................................................................................................................................................................................................................................*....................
        uadd16 r7, r11, r10                 // ....................................................................................................................................................................................................................................................................................................*.........
        vmov r6, s1                         // ...............................................................................................................................................................................................................................................................................................*..............
        uadd16 r2, r4, r6                   // ................................................................................................................................................................................................................................................................................................*.............
        str.w r2, [r0, #64]                 // .................................................................................................................................................................................................................................................................................................*............
        usub16 r4, r4, r6                   // ..................................................................................................................................................................................................................................................................................................*...........
        str.w r9, [r0, #256]                // .........................................................................................................................................................................................................................................................................................................*....
        str.w r7, [r0], #4                  // .......................................................................................................................................................................................................................................................................................................*...... // @slothy:core // @slothy:before=cmp
        cmp.w r0, r14                       // ........................................................................................................................................................................................................................................................................................................*..... // @slothy:id=cmp
        usub16 r9, r11, r10                 // ......................................................................................................................................................................................................................................................................................................*.......
        str.w r4, [r0, #92]                 // .....................................................................................................................................................................................................................................................................................................*........
        str.w r9, [r0, #28]                 // ............................................................................................................................................................................................................................................................................................................*.
        vmov r11, s6                        // ..........................................................................................................................................................................................................................................................................................*...................
        uadd16 r9, r8, r11                  // ..........................................................................................................................................................................................................................................................................................................*...
        str.w r9, [r0, #380]                // ...........................................................................................................................................................................................................................................................................................................*..
        usub16 r9, r8, r11                  // ............................................................................................................................................................................................................................................................................................*.................
        str.w r5, [r0, #220]                // .......................................................................................................................................................................................................................................................................................*......................
        str.w r9, [r0, #412]                // .............................................................................................................................................................................................................................................................................................*................
        bne.w layer1234_loop                // .............................................................................................................................................................................................................................................................................................................* // @slothy:branch

                                             // ----------------------------------------------------------------------------------------------------------------------------------------------- new position ------------------------------------------------------------------------------------------------------------------------------------------------>
                                             // 0                        25                       50                       75                       100                      125                      150                      175                      200                      225                      250                      275                      300
                                             // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|-
        // ldr.w r3, [r0, #224]              // .............*................................................................................................................................................................................................................................................................................................
        // ldr.w r10, [r0, #96]              // ....*.........................................................................................................................................................................................................................................................................................................
        // vmov s23, r0                      // ..*...........................................................................................................................................................................................................................................................................................................
        // vmov r5, s8                       // *.............................................................................................................................................................................................................................................................................................................
        // ldr.w r6, [r0, #352]              // ...*..........................................................................................................................................................................................................................................................................................................
        // ldr.w r8, [r0, #480]              // .........*....................................................................................................................................................................................................................................................................................................
        // ldr.w r11, [r0, #416]             // .*............................................................................................................................................................................................................................................................................................................
        // smulwt r4, r5, r6                 // ........*.....................................................................................................................................................................................................................................................................................................
        // ldr.w r2, [r0, #288]              // .....*........................................................................................................................................................................................................................................................................................................
        // smulwb r7, r5, r8                 // ....................*.........................................................................................................................................................................................................................................................................................
        // ldr.w r14, [r0, #32]              // .......*......................................................................................................................................................................................................................................................................................................
        // smulwt r9, r5, r8                 // .....................*........................................................................................................................................................................................................................................................................................
        // ldr.w r8, [r0, #160]              // ...........*..................................................................................................................................................................................................................................................................................................
        // smulwb r6, r5, r6                 // ......*.......................................................................................................................................................................................................................................................................................................
        // movw r0, #24608                   // ..............*...............................................................................................................................................................................................................................................................................................
        // smlabt r7, r7, r12, r0            // .......................*......................................................................................................................................................................................................................................................................................
        // smlabt r9, r9, r12, r0            // .........................*....................................................................................................................................................................................................................................................................................
        // smlabt r6, r6, r12, r0            // ...................*..........................................................................................................................................................................................................................................................................................
        // pkhtb r9, r9, r7, asr #16         // ............................*.................................................................................................................................................................................................................................................................................
        // smlabt r7, r4, r12, r0            // .................*............................................................................................................................................................................................................................................................................................
        // smulwb r4, r5, r2                 // ..........*...................................................................................................................................................................................................................................................................................................
        // pkhtb r6, r7, r6, asr #16         // ......................*.......................................................................................................................................................................................................................................................................................
        // smulwt r2, r5, r2                 // ............*.................................................................................................................................................................................................................................................................................................
        // usub16 r7, r10, r6                // ....................................*.........................................................................................................................................................................................................................................................................
        // smlabt r4, r4, r12, r0            // ...............*..............................................................................................................................................................................................................................................................................................
        // uadd16 r10, r10, r6               // ..................................*...........................................................................................................................................................................................................................................................................
        // smlabt r6, r2, r12, r0            // ................*.............................................................................................................................................................................................................................................................................................
        // smulwb r2, r5, r11                // ...........................*..................................................................................................................................................................................................................................................................................
        // pkhtb r4, r6, r4, asr #16         // ..................*...........................................................................................................................................................................................................................................................................................
        // smulwt r5, r5, r11                // .............................*................................................................................................................................................................................................................................................................................
        // usub16 r6, r14, r4                // ........................*.....................................................................................................................................................................................................................................................................................
        // smlabt r2, r2, r12, r0            // .................................*............................................................................................................................................................................................................................................................................
        // uadd16 r4, r14, r4                // ..........................*...................................................................................................................................................................................................................................................................................
        // smlabt r11, r5, r12, r0           // ...................................*..........................................................................................................................................................................................................................................................................
        // uadd16 r14, r3, r9                // ................................*.............................................................................................................................................................................................................................................................................
        // vmov r5, s9                       // ...............................*..............................................................................................................................................................................................................................................................................
        // pkhtb r11, r11, r2, asr #16       // ......................................*.......................................................................................................................................................................................................................................................................
        // smulwb r2, r5, r14                // .....................................*........................................................................................................................................................................................................................................................................
        // usub16 r9, r3, r9                 // ..............................*...............................................................................................................................................................................................................................................................................
        // smulwt r3, r5, r14                // .......................................*......................................................................................................................................................................................................................................................................
        // usub16 r14, r8, r11               // ...........................................*..................................................................................................................................................................................................................................................................
        // smlabt r2, r2, r12, r0            // ........................................*.....................................................................................................................................................................................................................................................................
        // uadd16 r8, r8, r11                // .........................................*....................................................................................................................................................................................................................................................................
        // smlabt r3, r3, r12, r0            // ..........................................*...................................................................................................................................................................................................................................................................
        // smulwt r11, r5, r8                // ..............................................*...............................................................................................................................................................................................................................................................
        // pkhtb r2, r3, r2, asr #16         // .............................................*................................................................................................................................................................................................................................................................
        // smulwb r8, r5, r8                 // ............................................*.................................................................................................................................................................................................................................................................
        // uadd16 r3, r10, r2                // ...............................................*..............................................................................................................................................................................................................................................................
        // smlabt r11, r11, r12, r0          // ..................................................*...........................................................................................................................................................................................................................................................
        // vmov r5, s10                      // ........................................................................*.....................................................................................................................................................................................................................................
        // smlabt r8, r8, r12, r0            // ................................................*.............................................................................................................................................................................................................................................................
        // usub16 r10, r10, r2               // ...................................................*..........................................................................................................................................................................................................................................................
        // smulwb r2, r5, r14                // ..................................................................................*...........................................................................................................................................................................................................................
        // smulwt r14, r5, r14               // ....................................................................................*.........................................................................................................................................................................................................................
        // pkhtb r11, r11, r8, asr #16       // .....................................................*........................................................................................................................................................................................................................................................
        // smlabt r2, r2, r12, r0            // ......................................................................................*.......................................................................................................................................................................................................................
        // uadd16 r8, r4, r11                // .......................................................*......................................................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ........................................................................................*.....................................................................................................................................................................................................................
        // usub16 r4, r4, r11                // ...........................................................*..................................................................................................................................................................................................................................................
        // smulwb r11, r5, r9                // ..........................................................................*...................................................................................................................................................................................................................................
        // pkhtb r2, r14, r2, asr #16        // .............................................................................................*................................................................................................................................................................................................................
        // smulwt r5, r5, r9                 // ............................................................................*.................................................................................................................................................................................................................................
        // usub16 r9, r6, r2                 // ...............................................................................................*..............................................................................................................................................................................................................
        // smlabt r11, r11, r12, r0          // ..............................................................................*...............................................................................................................................................................................................................................
        // vmov r14, s11                     // .................................................*............................................................................................................................................................................................................................................................
        // smlabt r5, r5, r12, r0            // ................................................................................*.............................................................................................................................................................................................................................
        // uadd16 r6, r6, r2                 // .................................................................................................*............................................................................................................................................................................................................
        // smulwb r2, r14, r3                // ....................................................*.........................................................................................................................................................................................................................................................
        // pkhtb r11, r5, r11, asr #16       // ...................................................................................*..........................................................................................................................................................................................................................
        // smulwt r5, r14, r3                // ......................................................*.......................................................................................................................................................................................................................................................
        // vmov r14, s12                     // .........................................................*....................................................................................................................................................................................................................................................
        // smlabt r3, r2, r12, r0            // ........................................................*.....................................................................................................................................................................................................................................................
        // uadd16 r2, r7, r11                // .........................................................................................*....................................................................................................................................................................................................................
        // smlabt r5, r5, r12, r0            // ..........................................................*...................................................................................................................................................................................................................................................
        // usub16 r7, r7, r11                // .....................................................................................*........................................................................................................................................................................................................................
        // smulwb r11, r14, r10              // ..............................................................*...............................................................................................................................................................................................................................................
        // pkhtb r3, r5, r3, asr #16         // .............................................................*................................................................................................................................................................................................................................................
        // smulwt r10, r14, r10              // ............................................................*.................................................................................................................................................................................................................................................
        // vmov r5, s14                      // .......................................................................................*......................................................................................................................................................................................................................
        // smlabt r14, r11, r12, r0          // ..................................................................*...........................................................................................................................................................................................................................................
        // uadd16 r11, r8, r3                // ...................................................................*..........................................................................................................................................................................................................................................
        // smlabt r10, r10, r12, r0          // ................................................................*.............................................................................................................................................................................................................................................
        // usub16 r3, r8, r3                 // ...............................................................*..............................................................................................................................................................................................................................................
        // smulwb r8, r5, r7                 // ..........................................................................................*...................................................................................................................................................................................................................
        // pkhtb r10, r10, r14, asr #16      // ......................................................................*.......................................................................................................................................................................................................................................
        // smulwt r14, r5, r7                // ............................................................................................*.................................................................................................................................................................................................................
        // vmov r7, s13                      // ...................................................................................................................*..........................................................................................................................................................................................
        // smlabt r8, r8, r12, r0            // ..............................................................................................*...............................................................................................................................................................................................................
        // usub16 r5, r4, r10                // ...............................................................................*..............................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ................................................................................................*.............................................................................................................................................................................................................
        // uadd16 r4, r4, r10                // .................................................................................*............................................................................................................................................................................................................................
        // pkhtb r14, r14, r8, asr #16       // ...................................................................................................*..........................................................................................................................................................................................................
        // smulwb r10, r7, r2                // ......................................................................................................................*.......................................................................................................................................................................................
        // vmov r8, s16                      // .................................................................*............................................................................................................................................................................................................................................
        // smulwt r2, r7, r2                 // ........................................................................................................................*.....................................................................................................................................................................................
        // smulwt r7, r8, r3                 // .....................................................................*........................................................................................................................................................................................................................................
        // smulwb r3, r8, r3                 // ....................................................................*.........................................................................................................................................................................................................................................
        // uadd16 r8, r9, r14                // .....................................................................................................*........................................................................................................................................................................................................
        // smlabt r7, r7, r12, r0            // .........................................................................*....................................................................................................................................................................................................................................
        // usub16 r14, r9, r14               // .................................................................................................................*............................................................................................................................................................................................
        // smlabt r9, r3, r12, r0            // .......................................................................*......................................................................................................................................................................................................................................
        // smlabt r3, r2, r12, r0            // ...........................................................................................................................*..................................................................................................................................................................................
        // vmov r2, s22                      // ............................................................................................................................*.................................................................................................................................................................................
        // smlabt r10, r10, r12, r0          // ..........................................................................................................................*...................................................................................................................................................................................
        // pkhtb r9, r7, r9, asr #16         // ...........................................................................*..................................................................................................................................................................................................................................
        // smulwb r7, r2, r14                // ...............................................................................................................................*..............................................................................................................................................................................
        // vmov s1, r9                       // .............................................................................*................................................................................................................................................................................................................................
        // smulwt r14, r2, r14               // .................................................................................................................................*............................................................................................................................................................................
        // vmov r2, s18                      // ...........................................................................................*..................................................................................................................................................................................................................
        // smlabt r7, r7, r12, r0            // ...................................................................................................................................*..........................................................................................................................................................................
        // pkhtb r9, r3, r10, asr #16        // ..............................................................................................................................*...............................................................................................................................................................................
        // smulwb r10, r2, r5                // ..................................................................................................*...........................................................................................................................................................................................................
        // usub16 r3, r6, r9                 // ..................................................................................................................................*...........................................................................................................................................................................
        // smulwt r2, r2, r5                 // ....................................................................................................*.........................................................................................................................................................................................................
        // uadd16 r5, r6, r9                 // ......................................................................................................................................*.......................................................................................................................................................................
        // smlabt r9, r14, r12, r0           // .....................................................................................................................................*........................................................................................................................................................................
        // vmov r14, s21                     // .......................................................................................................*......................................................................................................................................................................................................
        // smlabt r10, r10, r12, r0          // ......................................................................................................*.......................................................................................................................................................................................................
        // smulwb r6, r14, r8                // .........................................................................................................*....................................................................................................................................................................................................
        // smulwt r8, r14, r8                // ...........................................................................................................*..................................................................................................................................................................................................
        // pkhtb r9, r9, r7, asr #16         // ..........................................................................................................................................*...................................................................................................................................................................
        // smlabt r7, r6, r12, r0            // .............................................................................................................*................................................................................................................................................................................................
        // vmov r6, s15                      // ....................................................................................................................................*.........................................................................................................................................................................
        // smlabt r8, r8, r12, r0            // ..................................................................................................................*...........................................................................................................................................................................................
        // smulwb r14, r6, r11               // .........................................................................................................................................*....................................................................................................................................................................
        // smulwt r11, r6, r11               // .......................................................................................................................................*......................................................................................................................................................................
        // pkhtb r8, r8, r7, asr #16         // .....................................................................................................................*........................................................................................................................................................................................
        // smlabt r7, r14, r12, r0           // .....................................................................................................................................................*........................................................................................................................................................
        // vmov r14, s19                     // ........................................................................................................................................*.....................................................................................................................................................................
        // smlabt r11, r11, r12, r0          // .......................................................................................................................................................*......................................................................................................................................................
        // smulwb r6, r14, r5                // ...........................................................................................................................................*..................................................................................................................................................................
        // pkhtb r11, r11, r7, asr #16       // ..........................................................................................................................................................*...................................................................................................................................................
        // smulwt r14, r14, r5               // .............................................................................................................................................*................................................................................................................................................................
        // vmov s0, r11                      // ..............................................................................................................................................................*...............................................................................................................................................
        // smlabt r11, r2, r12, r0           // ........................................................................................................*.....................................................................................................................................................................................................
        // vmov r2, s17                      // ............................................................................................................*.................................................................................................................................................................................................
        // pkhtb r5, r11, r10, asr #16       // ..........................................................................................................*...................................................................................................................................................................................................
        // vmov r10, s23                     // .........................................................................................................................*....................................................................................................................................................................................
        // vmov s3, r5                       // ..............................................................................................................*...............................................................................................................................................................................................
        // smulwb r5, r2, r4                 // ...............................................................................................................*..............................................................................................................................................................................................
        // vmov s7, r9                       // ................................................................................................................................................*.............................................................................................................................................................
        // smlabt r6, r6, r12, r0            // ...............................................................................................................................................*..............................................................................................................................................................
        // ldr.w r9, [r10, #64]              // ..................................................................................................................................................................................................*...........................................................................................................
        // smulwt r2, r2, r4                 // ................................................................................................................*.............................................................................................................................................................................................
        // ldr.w r4, [r10, #320]             // ................................................................................................................................................................*.............................................................................................................................................
        // smlabt r7, r5, r12, r0            // ....................................................................................................................*.........................................................................................................................................................................................
        // vmov s6, r8                       // .......................................................................................................................*......................................................................................................................................................................................
        // smlabt r2, r2, r12, r0            // .............................................................................................................................*................................................................................................................................................................................
        // vmov r11, s8                      // ..................................................................................................................................................*...........................................................................................................................................................
        // smlabt r5, r14, r12, r0           // .................................................................................................................................................*............................................................................................................................................................
        // pkhtb r8, r2, r7, asr #16         // ................................................................................................................................*.............................................................................................................................................................................
        // smulwb r7, r11, r4                // .....................................................................................................................................................................*........................................................................................................................................
        // vmov r2, s20                      // ............................................................................................................................................*.................................................................................................................................................................
        // smulwt r4, r11, r4                // ...........................................................................................................................................................................*..................................................................................................................................
        // pkhtb r14, r5, r6, asr #16        // ....................................................................................................................................................*.........................................................................................................................................................
        // smulwb r5, r2, r3                 // .........................................................................................................................................................*....................................................................................................................................................
        // vmov s2, r8                       // ..............................................................................................................................................*...............................................................................................................................................................
        // smulwt r3, r2, r3                 // ...................................................................................................................................................*..........................................................................................................................................................
        // ldr.w r2, [r10, #256]             // ......................................................................................................................................................*.......................................................................................................................................................
        // smlabt r8, r5, r12, r0            // .............................................................................................................................................................*................................................................................................................................................
        // ldr.w r5, [r10, #384]             // ..........................................................................................................................................................................*...................................................................................................................................
        // smlabt r6, r3, r12, r0            // ...............................................................................................................................................................*..............................................................................................................................................
        // movw r0, #24608                   // ......................................................................................................................................................................*.......................................................................................................................................
        // smlabt r3, r4, r12, r0            // ...............................................................................................................................................................................*..............................................................................................................................
        // ldr.w r4, [r10, #0]               // ........................................................................................................................................................................*.....................................................................................................................................
        // smlabt r7, r7, r12, r0            // .............................................................................................................................................................................*................................................................................................................................
        // pkhtb r6, r6, r8, asr #16         // ..................................................................................................................................................................*...........................................................................................................................................
        // smulwb r8, r11, r5                // .................................................................................................................................................................................*............................................................................................................................
        // vmov s5, r6                       // ....................................................................................................................................................................*.........................................................................................................................................
        // smulwb r6, r11, r2                // ...................................................................................................................................................................*..........................................................................................................................................
        // pkhtb r7, r3, r7, asr #16         // ....................................................................................................................................................................................*.........................................................................................................................
        // smulwt r2, r11, r2                // ...........................................................................................................................................................*..................................................................................................................................................
        // uadd16 r3, r9, r7                 // ..........................................................................................................................................................................................................*...................................................................................................
        // smlabt r6, r6, r12, r0            // .......................................................................................................................................................................*......................................................................................................................................
        // usub16 r7, r9, r7                 // ..............................................................................................................................................................................................................*...............................................................................................
        // smlabt r2, r2, r12, r0            // .........................................................................................................................................................................*....................................................................................................................................
        // ldr.w r9, [r10, #448]             // ............................................................................................................................................................*.................................................................................................................................................
        // smulwt r5, r11, r5                // ...................................................................................................................................................................................*..........................................................................................................................
        // pkhtb r6, r2, r6, asr #16         // ............................................................................................................................................................................*.................................................................................................................................
        // smlabt r8, r8, r12, r0            // .....................................................................................................................................................................................*........................................................................................................................
        // uadd16 r2, r4, r6                 // ..............................................................................................................................................................................*...............................................................................................................................
        // usub16 r6, r4, r6                 // ................................................................................................................................................................................*.............................................................................................................................
        // smulwt r4, r11, r9                // .................................................................................................................................................................*............................................................................................................................................
        // vmov s4, r14                      // ........................................................................................................................................................*.....................................................................................................................................................
        // smulwb r11, r11, r9               // ..................................................................................................................................................................................*...........................................................................................................................
        // ldr.w r14, [r10, #128]            // ......................................................................................................................................................................................*.......................................................................................................................
        // smlabt r9, r5, r12, r0            // .......................................................................................................................................................................................*......................................................................................................................
        // ldr.w r5, [r10, #192]             // ........................................................................................................................................................................................*.....................................................................................................................
        // smlabt r10, r11, r12, r0          // .........................................................................................................................................................................................*....................................................................................................................
        // pkhtb r8, r9, r8, asr #16         // ..........................................................................................................................................................................................*...................................................................................................................
        // smlabt r9, r4, r12, r0            // ...........................................................................................................................................................................................*..................................................................................................................
        // uadd16 r4, r14, r8                // ................................................................................................................................................................................................*.............................................................................................................
        // vmov r11, s9                      // ............................................................................................................................................................................................................*.................................................................................................
        // pkhtb r9, r9, r10, asr #16        // ..............................................................................................................................................................................................*...............................................................................................................
        // smulwb r10, r11, r4               // ......................................................................................................................................................................................................................*.......................................................................................
        // usub16 r14, r14, r8               // ............................................................................................................................................................................................*.................................................................................................................
        // smulwt r4, r11, r4                // ........................................................................................................................................................................................................................*.....................................................................................
        // usub16 r8, r5, r9                 // ....................................................................................................................................................................................................*.........................................................................................................
        // smlabt r10, r10, r12, r0          // ..........................................................................................................................................................................................................................*...................................................................................
        // uadd16 r5, r5, r9                 // ......................................................................................................................................................................................................*.......................................................................................................
        // smlabt r4, r4, r12, r0            // ............................................................................................................................................................................................................................*.................................................................................
        // smulwb r9, r11, r5                // ...............................................................................................................................................................................................................*..............................................................................................
        // pkhtb r10, r4, r10, asr #16       // ...............................................................................................................................................................................................................................*..............................................................................
        // smulwt r5, r11, r5                // .................................................................................................................................................................................................................*............................................................................................
        // usub16 r11, r2, r10               // .................................................................................................................................................................................................................................*............................................................................
        // smlabt r9, r9, r12, r0            // ...................................................................................................................................................................................................................*..........................................................................................
        // vmov r4, s10                      // .............................................................................................................................................................................................*................................................................................................................
        // smlabt r5, r5, r12, r0            // .....................................................................................................................................................................................................................*........................................................................................
        // uadd16 r2, r2, r10                // ...................................................................................................................................................................................................................................*..........................................................................
        // smulwb r10, r4, r14               // ...............................................................................................................................................................................................*..............................................................................................................
        // pkhtb r5, r5, r9, asr #16         // .......................................................................................................................................................................................................................*......................................................................................
        // smulwt r14, r4, r14               // .................................................................................................................................................................................................*............................................................................................................
        // usub16 r9, r3, r5                 // .........................................................................................................................................................................................................................*....................................................................................
        // smlabt r10, r10, r12, r0          // ...................................................................................................................................................................................................*..........................................................................................................
        // uadd16 r3, r3, r5                 // .............................................................................................................................................................................................................................*................................................................................
        // smlabt r5, r14, r12, r0           // .....................................................................................................................................................................................................*........................................................................................................
        // smulwb r14, r4, r8                // .......................................................................................................................................................................................................*......................................................................................................
        // pkhtb r5, r5, r10, asr #16        // ........................................................................................................................................................................................................*.....................................................................................................
        // smulwt r4, r4, r8                 // .........................................................................................................................................................................................................*....................................................................................................
        // usub16 r8, r6, r5                 // ..................................................................................................................................................................................................................*...........................................................................................
        // smlabt r14, r14, r12, r0          // ...........................................................................................................................................................................................................*..................................................................................................
        // vmov r10, s12                     // ...........................................................................................................................................................................................................................*..................................................................................
        // smlabt r4, r4, r12, r0            // .............................................................................................................................................................................................................*................................................................................................
        // uadd16 r6, r6, r5                 // ....................................................................................................................................................................................................................*.........................................................................................
        // smulwb r5, r10, r9                // ................................................................................................................................................................................................................................*.............................................................................
        // pkhtb r14, r4, r14, asr #16       // ................................................................................................................................................................................................................*.............................................................................................
        // usub16 r4, r7, r14                // .....................................................................................................................................................................................................................................*........................................................................
        // smulwt r10, r10, r9               // ..............................................................................................................................................................................................................................*...............................................................................
        // uadd16 r9, r7, r14                // .......................................................................................................................................................................................................................................*......................................................................
        // smlabt r5, r5, r12, r0            // ....................................................................................................................................................................................................................................*.........................................................................
        // vmov r7, s14                      // ......................................................................................................................................................................................................................................*.......................................................................
        // smlabt r14, r10, r12, r0          // ..................................................................................................................................................................................................................................*...........................................................................
        // smulwb r10, r7, r4                // ........................................................................................................................................................................................................................................*.....................................................................
        // pkhtb r14, r14, r5, asr #16       // .........................................................................................................................................................................................................................................*....................................................................
        // smulwt r4, r7, r4                 // ..........................................................................................................................................................................................................................................*...................................................................
        // usub16 r5, r11, r14               // ...............................................................................................................................................................................................................................................*..............................................................
        // smlabt r7, r10, r12, r0           // ............................................................................................................................................................................................................................................*.................................................................
        // vmov r10, s11                     // .............................................................................................................................................................................................................................................*................................................................
        // smlabt r4, r4, r12, r0            // ..............................................................................................................................................................................................................................................*...............................................................
        // uadd16 r14, r11, r14              // ...........................................................................................................................................................................................................................................*..................................................................
        // smulwb r11, r10, r3               // ................................................................................................................................................................................................................................................*.............................................................
        // pkhtb r7, r4, r7, asr #16         // .................................................................................................................................................................................................................................................*............................................................
        // smulwt r3, r10, r3                // ..................................................................................................................................................................................................................................................*...........................................................
        // usub16 r10, r8, r7                // ...................................................................................................................................................................................................................................................*..........................................................
        // smlabt r4, r11, r12, r0           // ....................................................................................................................................................................................................................................................*.........................................................
        // vmov r11, s13                     // .....................................................................................................................................................................................................................................................*........................................................
        // smlabt r3, r3, r12, r0            // ......................................................................................................................................................................................................................................................*.......................................................
        // uadd16 r8, r8, r7                 // .......................................................................................................................................................................................................................................................*......................................................
        // smulwb r7, r11, r9                // ........................................................................................................................................................................................................................................................*.....................................................
        // pkhtb r4, r3, r4, asr #16         // .........................................................................................................................................................................................................................................................*....................................................
        // smulwt r3, r11, r9                // ..........................................................................................................................................................................................................................................................*...................................................
        // vmov r9, s2                       // ...........................................................................................................................................................................................................................................................*..................................................
        // smlabt r11, r7, r12, r0           // ............................................................................................................................................................................................................................................................*.................................................
        // usub16 r7, r14, r9                // .............................................................................................................................................................................................................................................................*................................................
        // smlabt r0, r3, r12, r0            // ..............................................................................................................................................................................................................................................................*...............................................
        // uadd16 r3, r14, r9                // ...............................................................................................................................................................................................................................................................*..............................................
        // vmov r14, s5                      // ................................................................................................................................................................................................................................................................*.............................................
        // pkhtb r11, r0, r11, asr #16       // .................................................................................................................................................................................................................................................................*............................................
        // vmov r0, s23                      // ..................................................................................................................................................................................................................................................................*...........................................
        // usub16 r9, r2, r4                 // ...................................................................................................................................................................................................................................................................*..........................................
        // str.w r7, [r0, #160]              // ....................................................................................................................................................................................................................................................................*.........................................
        // uadd16 r2, r2, r4                 // ..........................................................................................................................................................................................................................................................................*...................................
        // vmov r7, s4                       // .......................................................................................................................................................................................................................................................................................*......................
        // usub16 r4, r6, r11                // .....................................................................................................................................................................................................................................................................*........................................
        // str.w r3, [r0, #128]              // ......................................................................................................................................................................................................................................................................*.......................................
        // usub16 r3, r4, r14                // .........................................................................................................................................................................................................................................................................*....................................
        // str.w r3, [r0, #352]              // ...........................................................................................................................................................................................................................................................................*..................................
        // uadd16 r3, r6, r11                // .......................................................................................................................................................................................................................................................................*......................................
        // vmov r11, s7                      // ........................................................................................................................................................................................................................................................................*.....................................
        // uadd16 r6, r4, r14                // ............................................................................................................................................................................................................................................................................*.................................
        // str.w r6, [r0, #320]              // .............................................................................................................................................................................................................................................................................*................................
        // uadd16 r4, r10, r11               // ..............................................................................................................................................................................................................................................................................*...............................
        // vmov r14, s24                     // ...............................................................................................................................................................................................................................................................................*..............................
        // str.w r4, [r0, #448]              // ..................................................................................................................................................................................................................................................................................*...........................
        // usub16 r4, r10, r11               // ................................................................................................................................................................................................................................................................................*.............................
        // vmov r6, s3                       // ...................................................................................................................................................................................................................................................................................*..........................
        // uadd16 r10, r5, r6                // ....................................................................................................................................................................................................................................................................................*.........................
        // str.w r10, [r0, #192]             // .....................................................................................................................................................................................................................................................................................*........................
        // usub16 r11, r5, r6                // ......................................................................................................................................................................................................................................................................................*.......................
        // str.w r11, [r0, #224]             // ...........................................................................................................................................................................................................................................................................................................*..
        // usub16 r6, r3, r7                 // ..........................................................................................................................................................................................................................................................................................*...................
        // str.w r6, [r0, #288]              // ...........................................................................................................................................................................................................................................................................................*..................
        // vmov r10, s6                      // .......................................................................................................................................................................................................................................................................................................*......
        // str.w r4, [r0, #480]              // .................................................................................................................................................................................................................................................................................*............................
        // usub16 r4, r8, r10                // ..........................................................................................................................................................................................................................................................................................................*...
        // str.w r4, [r0, #416]              // ............................................................................................................................................................................................................................................................................................................*.
        // uadd16 r5, r3, r7                 // ........................................................................................................................................................................................................................................................................................*.....................
        // vmov r3, s1                       // .............................................................................................................................................................................................................................................................................................*................
        // uadd16 r7, r9, r3                 // ..............................................................................................................................................................................................................................................................................................*...............
        // str.w r7, [r0, #64]               // ...............................................................................................................................................................................................................................................................................................*..............
        // usub16 r9, r9, r3                 // ................................................................................................................................................................................................................................................................................................*.............
        // vmov r3, s0                       // .........................................................................................................................................................................................................................................................................................*....................
        // uadd16 r4, r2, r3                 // ............................................................................................................................................................................................................................................................................................*.................
        // str.w r9, [r0, #96]               // .....................................................................................................................................................................................................................................................................................................*........
        // usub16 r7, r2, r3                 // ....................................................................................................................................................................................................................................................................................................*.........
        // str.w r4, [r0], #4                // ..................................................................................................................................................................................................................................................................................................*...........
        // cmp.w r0, r14                     // ...................................................................................................................................................................................................................................................................................................*..........
        // str.w r5, [r0, #252]              // .................................................................................................................................................................................................................................................................................................*............
        // uadd16 r2, r8, r10                // ........................................................................................................................................................................................................................................................................................................*.....
        // str.w r2, [r0, #380]              // .........................................................................................................................................................................................................................................................................................................*....
        // str.w r7, [r0, #28]               // ......................................................................................................................................................................................................................................................................................................*.......
        // bne.w layer1234_loop              // .............................................................................................................................................................................................................................................................................................................*



                                             // ----------------------------------------------------------------------------------------------------------------------------------------------- new position ------------------------------------------------------------------------------------------------------------------------------------------------>
                                             // 0                        25                       50                       75                       100                      125                      150                      175                      200                      225                      250                      275                      300
                                             // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|-
        // vmov s23, r0                      // ..*...........................................................................................................................................................................................................................................................................................................
        // ldr.w r2, [r0, #32]               // ..........*...................................................................................................................................................................................................................................................................................................
        // ldr.w r3, [r0, #256/4+32]         // .*............................................................................................................................................................................................................................................................................................................
        // ldr.w r4, [r0, #2*256/4+32]       // ............*.................................................................................................................................................................................................................................................................................................
        // ldr.w r5, [r0, #3*256/4+32]       // *.............................................................................................................................................................................................................................................................................................................
        // ldr.w r6, [r0, #256+32]           // ........*.....................................................................................................................................................................................................................................................................................................
        // ldr.w r7, [r0, #5*256/4+32]       // ....*.........................................................................................................................................................................................................................................................................................................
        // ldr.w r8, [r0, #6*256/4+32]       // ......*.......................................................................................................................................................................................................................................................................................................
        // ldr.w r9, [r0, #7*256/4+32]       // .....*........................................................................................................................................................................................................................................................................................................
        // movw r0, #24608                   // ..............*...............................................................................................................................................................................................................................................................................................
        // vmov r10, s8                      // ...*..........................................................................................................................................................................................................................................................................................................
        // smulwb r14, r10, r6               // ....................*.........................................................................................................................................................................................................................................................................................
        // smulwt r6, r10, r6                // ......................*.......................................................................................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ........................*.....................................................................................................................................................................................................................................................................................
        // smlabt r6, r6, r12, r0            // ..........................*...................................................................................................................................................................................................................................................................................
        // pkhtb r14, r6, r14, asr #16       // ............................*.................................................................................................................................................................................................................................................................................
        // usub16 r6, r2, r14                // ..............................*...............................................................................................................................................................................................................................................................................
        // uadd16 r2, r2, r14                // ................................*.............................................................................................................................................................................................................................................................................
        // smulwb r14, r10, r7               // .............*................................................................................................................................................................................................................................................................................................
        // smulwt r7, r10, r7                // .......*......................................................................................................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // .................*............................................................................................................................................................................................................................................................................................
        // smlabt r7, r7, r12, r0            // ...................*..........................................................................................................................................................................................................................................................................................
        // pkhtb r14, r7, r14, asr #16       // .....................*........................................................................................................................................................................................................................................................................................
        // usub16 r7, r3, r14                // .......................*......................................................................................................................................................................................................................................................................................
        // uadd16 r3, r3, r14                // .........................*....................................................................................................................................................................................................................................................................................
        // smulwb r14, r10, r8               // ...........................*..................................................................................................................................................................................................................................................................................
        // smulwt r8, r10, r8                // .............................*................................................................................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ...............................*..............................................................................................................................................................................................................................................................................
        // smlabt r8, r8, r12, r0            // .................................*............................................................................................................................................................................................................................................................................
        // pkhtb r14, r8, r14, asr #16       // ....................................*.........................................................................................................................................................................................................................................................................
        // usub16 r8, r4, r14                // ........................................*.....................................................................................................................................................................................................................................................................
        // uadd16 r4, r4, r14                // ..........................................*...................................................................................................................................................................................................................................................................
        // smulwb r14, r10, r9               // .........*....................................................................................................................................................................................................................................................................................................
        // smulwt r9, r10, r9                // ...........*..................................................................................................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ...............*..............................................................................................................................................................................................................................................................................................
        // smlabt r9, r9, r12, r0            // ................*.............................................................................................................................................................................................................................................................................................
        // pkhtb r14, r9, r14, asr #16       // ..................*...........................................................................................................................................................................................................................................................................................
        // usub16 r9, r5, r14                // ......................................*.......................................................................................................................................................................................................................................................................
        // uadd16 r5, r5, r14                // ..................................*...........................................................................................................................................................................................................................................................................
        // vmov r10, s9                      // ...................................*..........................................................................................................................................................................................................................................................................
        // vmov r11, s10                     // .................................................*............................................................................................................................................................................................................................................................
        // smulwb r14, r10, r4               // ..............................................*...............................................................................................................................................................................................................................................................
        // smulwt r4, r10, r4                // ............................................*.................................................................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ..................................................*...........................................................................................................................................................................................................................................................
        // smlabt r4, r4, r12, r0            // ................................................*.............................................................................................................................................................................................................................................................
        // pkhtb r14, r4, r14, asr #16       // ......................................................*.......................................................................................................................................................................................................................................................
        // usub16 r4, r2, r14                // ..........................................................*...................................................................................................................................................................................................................................................
        // uadd16 r2, r2, r14                // ........................................................*.....................................................................................................................................................................................................................................................
        // smulwb r14, r10, r5               // .....................................*........................................................................................................................................................................................................................................................................
        // smulwt r5, r10, r5                // .......................................*......................................................................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // .........................................*....................................................................................................................................................................................................................................................................
        // smlabt r5, r5, r12, r0            // ...........................................*..................................................................................................................................................................................................................................................................
        // pkhtb r14, r5, r14, asr #16       // .............................................*................................................................................................................................................................................................................................................................
        // usub16 r5, r3, r14                // ...................................................*..........................................................................................................................................................................................................................................................
        // uadd16 r3, r3, r14                // ...............................................*..............................................................................................................................................................................................................................................................
        // smulwb r14, r11, r8               // ....................................................*.........................................................................................................................................................................................................................................................
        // smulwt r8, r11, r8                // .....................................................*........................................................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // .......................................................*......................................................................................................................................................................................................................................................
        // smlabt r8, r8, r12, r0            // .........................................................*....................................................................................................................................................................................................................................................
        // pkhtb r14, r8, r14, asr #16       // ............................................................*.................................................................................................................................................................................................................................................
        // usub16 r8, r6, r14                // ..............................................................*...............................................................................................................................................................................................................................................
        // uadd16 r6, r6, r14                // ..................................................................*...........................................................................................................................................................................................................................................
        // smulwb r14, r11, r9               // ...........................................................*..................................................................................................................................................................................................................................................
        // smulwt r9, r11, r9                // .............................................................*................................................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ...............................................................*..............................................................................................................................................................................................................................................
        // smlabt r9, r9, r12, r0            // .................................................................*............................................................................................................................................................................................................................................
        // pkhtb r14, r9, r14, asr #16       // ....................................................................*.........................................................................................................................................................................................................................................
        // usub16 r9, r7, r14                // ..........................................................................*...................................................................................................................................................................................................................................
        // uadd16 r7, r7, r14                // ........................................................................*.....................................................................................................................................................................................................................................
        // vmov r10, s11                     // ................................................................*.............................................................................................................................................................................................................................................
        // vmov r11, s12                     // ......................................................................*.......................................................................................................................................................................................................................................
        // smulwb r14, r10, r3               // ...................................................................*..........................................................................................................................................................................................................................................
        // smulwt r3, r10, r3                // .....................................................................*........................................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // .......................................................................*......................................................................................................................................................................................................................................
        // smlabt r3, r3, r12, r0            // .........................................................................*....................................................................................................................................................................................................................................
        // pkhtb r14, r3, r14, asr #16       // ............................................................................*.................................................................................................................................................................................................................................
        // usub16 r3, r2, r14                // ..................................................................................*...........................................................................................................................................................................................................................
        // uadd16 r2, r2, r14                // ................................................................................*.............................................................................................................................................................................................................................
        // smulwb r14, r11, r5               // ...........................................................................*..................................................................................................................................................................................................................................
        // smulwt r5, r11, r5                // .............................................................................*................................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ...............................................................................*..............................................................................................................................................................................................................................
        // smlabt r5, r5, r12, r0            // .................................................................................*............................................................................................................................................................................................................................
        // pkhtb r14, r5, r14, asr #16       // ....................................................................................*.........................................................................................................................................................................................................................
        // usub16 r5, r4, r14                // ........................................................................................*.....................................................................................................................................................................................................................
        // uadd16 r4, r4, r14                // ..........................................................................................*...................................................................................................................................................................................................................
        // vmov r10, s13                     // ......................................................................................*.......................................................................................................................................................................................................................
        // vmov r11, s14                     // ..............................................................................*...............................................................................................................................................................................................................................
        // smulwb r14, r10, r7               // ............................................................................................*.................................................................................................................................................................................................................
        // smulwt r7, r10, r7                // ..............................................................................................*...............................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // .......................................................................................................*......................................................................................................................................................................................................
        // smlabt r7, r7, r12, r0            // .....................................................................................................*........................................................................................................................................................................................................
        // pkhtb r14, r7, r14, asr #16       // ..............................................................................................................*...............................................................................................................................................................................................
        // usub16 r7, r6, r14                // ................................................................................................................*.............................................................................................................................................................................................
        // uadd16 r6, r6, r14                // ..................................................................................................................*...........................................................................................................................................................................................
        // smulwb r14, r11, r9               // ...................................................................................*..........................................................................................................................................................................................................................
        // smulwt r9, r11, r9                // .....................................................................................*........................................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // .......................................................................................*......................................................................................................................................................................................................................
        // smlabt r9, r9, r12, r0            // .........................................................................................*....................................................................................................................................................................................................................
        // pkhtb r14, r9, r14, asr #16       // ...........................................................................................*..................................................................................................................................................................................................................
        // usub16 r9, r8, r14                // ...................................................................................................*..........................................................................................................................................................................................................
        // uadd16 r8, r8, r14                // .................................................................................................*............................................................................................................................................................................................................
        // vmov r10, s15                     // ..........................................................................................................................*...................................................................................................................................................................................
        // vmov r11, s16                     // .............................................................................................*................................................................................................................................................................................................................
        // smulwb r14, r10, r2               // ............................................................................................................................*.................................................................................................................................................................................
        // smulwt r2,   r10, r2              // .............................................................................................................................*................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ...............................................................................................................................*..............................................................................................................................................................................
        // smlabt r2, r2, r12, r0            // .................................................................................................................................*............................................................................................................................................................................
        // pkhtb r2, r2, r14, asr #16        // ...................................................................................................................................*..........................................................................................................................................................................
        // smulwb r14, r11, r3               // ................................................................................................*.............................................................................................................................................................................................................
        // smulwt r3,   r11, r3              // ...............................................................................................*..............................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ....................................................................................................*.........................................................................................................................................................................................................
        // smlabt r3, r3, r12, r0            // ..................................................................................................*...........................................................................................................................................................................................................
        // pkhtb r3, r3, r14, asr #16        // ........................................................................................................*.....................................................................................................................................................................................................
        // vmov r10, s17                     // .......................................................................................................................................*......................................................................................................................................................................
        // vmov r11, s18                     // ............................................................................................................*.................................................................................................................................................................................................
        // smulwb r14, r10, r4               // ...........................................................................................................................................*..................................................................................................................................................................
        // smulwt r4,   r10, r4              // ...............................................................................................................................................*..............................................................................................................................................................
        // smlabt r14, r14, r12, r0          // .................................................................................................................................................*............................................................................................................................................................
        // smlabt r4, r4, r12, r0            // ...................................................................................................................................................*..........................................................................................................................................................
        // pkhtb r4, r4, r14, asr #16        // ......................................................................................................................................................*.......................................................................................................................................................
        // smulwb r14, r11, r5               // ...............................................................................................................*..............................................................................................................................................................................................
        // smulwt r5,   r11, r5              // .................................................................................................................*............................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // .....................................................................................................................*........................................................................................................................................................................................
        // smlabt r5, r5, r12, r0            // ......................................................................................................................................*.......................................................................................................................................................................
        // pkhtb r5, r5, r14, asr #16        // ........................................................................................................................................*.....................................................................................................................................................................
        // vmov r10, s19                     // ................................................................................................................................*.............................................................................................................................................................................
        // vmov r11, s20                     // ........................................................................................................................................................*.....................................................................................................................................................
        // smulwb r14, r10, r6               // ..................................................................................................................................*...........................................................................................................................................................................
        // smulwt r6,   r10, r6              // ....................................................................................................................................*.........................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // .............................................................................................................................................*................................................................................................................................................................
        // smlabt r6, r6, r12, r0            // .....................................................................................................................................................*........................................................................................................................................................
        // pkhtb r6, r6, r14, asr #16        // ..........................................................................................................................................................*...................................................................................................................................................
        // smulwb r14, r11, r7               // ...........................................................................................................................................................*..................................................................................................................................................
        // smulwt r7,   r11, r7              // .............................................................................................................................................................*................................................................................................................................................
        // smlabt r14, r14, r12, r0          // ...............................................................................................................................................................*..............................................................................................................................................
        // smlabt r7, r7, r12, r0            // .................................................................................................................................................................*............................................................................................................................................
        // pkhtb r7, r7, r14, asr #16        // ......................................................................................................................................................................*.......................................................................................................................................
        // vmov r10, s21                     // ....................................................................................................................*.........................................................................................................................................................................................
        // vmov r11, s22                     // ......................................................................................................*.......................................................................................................................................................................................................
        // smulwb r14, r10, r8               // ......................................................................................................................*.......................................................................................................................................................................................
        // smulwt r8,   r10, r8              // .......................................................................................................................*......................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // .........................................................................................................................*....................................................................................................................................................................................
        // smlabt r8, r8, r12, r0            // ...........................................................................................................................*..................................................................................................................................................................................
        // pkhtb r8, r8, r14, asr #16        // ..............................................................................................................................*...............................................................................................................................................................................
        // smulwb r14, r11, r9               // .........................................................................................................*....................................................................................................................................................................................................
        // smulwt r9,   r11, r9              // ...........................................................................................................*..................................................................................................................................................................................................
        // smlabt r14, r14, r12, r0          // .............................................................................................................*................................................................................................................................................................................................
        // smlabt r9, r9, r12, r0            // ...................................................................................................................*..........................................................................................................................................................................................
        // pkhtb r9, r9, r14, asr #16        // ........................................................................................................................*.....................................................................................................................................................................................
        // vmov s0, r2                       // .....................................................................................................................................*........................................................................................................................................................................
        // vmov s1, r3                       // ..........................................................................................................*...................................................................................................................................................................................................
        // vmov s2, r4                       // ............................................................................................................................................................*.................................................................................................................................................
        // vmov s3, r5                       // ..........................................................................................................................................*...................................................................................................................................................................
        // vmov s4, r6                       // .......................................................................................................................................................................................*......................................................................................................................
        // vmov s5, r7                       // ........................................................................................................................................................................*.....................................................................................................................................
        // vmov s6, r8                       // ..................................................................................................................................................*...........................................................................................................................................................
        // vmov s7, r9                       // ............................................................................................................................................*.................................................................................................................................................................
        // vmov r0, s23                      // .........................................................................................................................................*....................................................................................................................................................................
        // ldr.w r2, [r0, #0]                // ....................................................................................................................................................................*.........................................................................................................................................
        // ldr.w r3, [r0, #256/4]            // ..............................................................................................................................................*...............................................................................................................................................................
        // ldr.w r4, [r0, #2*256/4]          // .........................................................................................................................................................................................*....................................................................................................................
        // ldr.w r5, [r0, #3*256/4]          // ...........................................................................................................................................................................................*..................................................................................................................
        // ldr.w r6, [r0, #256]              // ..............................................................................................................................................................*...............................................................................................................................................
        // ldr.w r7, [r0, #5*256/4]          // ................................................................................................................................................*.............................................................................................................................................................
        // ldr.w r8, [r0, #6*256/4]          // ................................................................................................................................................................*.............................................................................................................................................
        // ldr.w r9, [r0, #7*256/4]          // ................................................................................................................................................................................*.............................................................................................................................
        // movw r0, #24608                   // ..................................................................................................................................................................*...........................................................................................................................................
        // vmov r10, s8                      // ....................................................................................................................................................*.........................................................................................................................................................
        // smulwb r14, r10, r6               // .........................................................................................................................................................................*....................................................................................................................................
        // smulwt r6, r10, r6                // ...........................................................................................................................................................................*..................................................................................................................................
        // smlabt r14, r14, r12, r0          // .............................................................................................................................................................................*................................................................................................................................
        // smlabt r6, r6, r12, r0            // ...............................................................................................................................................................................*..............................................................................................................................
        // pkhtb r14, r6, r14, asr #16       // ..................................................................................................................................................................................*...........................................................................................................................
        // usub16 r6, r2, r14                // .....................................................................................................................................................................................*........................................................................................................................
        // uadd16 r2, r2, r14                // ....................................................................................................................................................................................*.........................................................................................................................
        // smulwb r14, r10, r7               // .......................................................................................................................................................*......................................................................................................................................................
        // smulwt r7, r10, r7                // .........................................................................................................................................................*....................................................................................................................................................
        // smlabt r14, r14, r12, r0          // .....................................................................................................................................................................*........................................................................................................................................
        // smlabt r7, r7, r12, r0            // ...................................................................................................................................................................*..........................................................................................................................................
        // pkhtb r14, r7, r14, asr #16       // ..........................................................................................................................................................................*...................................................................................................................................
        // usub16 r7, r3, r14                // ..............................................................................................................................................................................*...............................................................................................................................
        // uadd16 r3, r3, r14                // ............................................................................................................................................................................*.................................................................................................................................
        // smulwb r14, r10, r8               // .......................................................................................................................................................................*......................................................................................................................................
        // smulwt r8, r10, r8                // .................................................................................................................................................................................*............................................................................................................................
        // smlabt r14, r14, r12, r0          // ...................................................................................................................................................................................*..........................................................................................................................
        // smlabt r8, r8, r12, r0            // ..........................................................................................................................................................................................*...................................................................................................................
        // pkhtb r14, r8, r14, asr #16       // .............................................................................................................................................................................................*................................................................................................................
        // usub16 r8, r4, r14                // ...................................................................................................................................................................................................*..........................................................................................................
        // uadd16 r4, r4, r14                // ...............................................................................................................................................................................................*..............................................................................................................
        // smulwb r14, r10, r9               // ........................................................................................................................................................................................*.....................................................................................................................
        // smulwt r9, r10, r9                // ......................................................................................................................................................................................*.......................................................................................................................
        // smlabt r14, r14, r12, r0          // ............................................................................................................................................................................................*.................................................................................................................
        // smlabt r9, r9, r12, r0            // ..............................................................................................................................................................................................*...............................................................................................................
        // pkhtb r14, r9, r14, asr #16       // .................................................................................................................................................................................................*............................................................................................................
        // usub16 r9, r5, r14                // .....................................................................................................................................................................................................*........................................................................................................
        // uadd16 r5, r5, r14                // .......................................................................................................................................................................................................*......................................................................................................
        // vmov r10, s9                      // ................................................................................................................................................................................................*.............................................................................................................
        // vmov r11, s10                     // ..............................................................................................................................................................................................................*...............................................................................................
        // smulwb r14, r10, r4               // ..................................................................................................................................................................................................*...........................................................................................................
        // smulwt r4, r10, r4                // ....................................................................................................................................................................................................*.........................................................................................................
        // smlabt r14, r14, r12, r0          // ......................................................................................................................................................................................................*.......................................................................................................
        // smlabt r4, r4, r12, r0            // ........................................................................................................................................................................................................*.....................................................................................................
        // pkhtb r14, r4, r14, asr #16       // ..........................................................................................................................................................................................................*...................................................................................................
        // usub16 r4, r2, r14                // ............................................................................................................................................................................................................*.................................................................................................
        // uadd16 r2, r2, r14                // ................................................................................................................................................................................................................*.............................................................................................
        // smulwb r14, r10, r5               // .........................................................................................................................................................................................................*....................................................................................................
        // smulwt r5, r10, r5                // ...........................................................................................................................................................................................................*..................................................................................................
        // smlabt r14, r14, r12, r0          // .............................................................................................................................................................................................................*................................................................................................
        // smlabt r5, r5, r12, r0            // ...............................................................................................................................................................................................................*..............................................................................................
        // pkhtb r14, r5, r14, asr #16       // ..................................................................................................................................................................................................................*...........................................................................................
        // usub16 r5, r3, r14                // ....................................................................................................................................................................................................................*.........................................................................................
        // uadd16 r3, r3, r14                // ......................................................................................................................................................................................................................*.......................................................................................
        // smulwb r14, r11, r8               // .................................................................................................................................................................................................................*............................................................................................
        // smulwt r8, r11, r8                // ...................................................................................................................................................................................................................*..........................................................................................
        // smlabt r14, r14, r12, r0          // .....................................................................................................................................................................................................................*........................................................................................
        // smlabt r8, r8, r12, r0            // .......................................................................................................................................................................................................................*......................................................................................
        // pkhtb r14, r8, r14, asr #16       // .........................................................................................................................................................................................................................*....................................................................................
        // usub16 r8, r6, r14                // ...........................................................................................................................................................................................................................*..................................................................................
        // uadd16 r6, r6, r14                // ...............................................................................................................................................................................................................................*..............................................................................
        // smulwb r14, r11, r9               // ........................................................................................................................................................................................................................*.....................................................................................
        // smulwt r9, r11, r9                // ..........................................................................................................................................................................................................................*...................................................................................
        // smlabt r14, r14, r12, r0          // ............................................................................................................................................................................................................................*.................................................................................
        // smlabt r9, r9, r12, r0            // ..............................................................................................................................................................................................................................*...............................................................................
        // pkhtb r14, r9, r14, asr #16       // .................................................................................................................................................................................................................................*............................................................................
        // usub16 r9, r7, r14                // ..................................................................................................................................................................................................................................*...........................................................................
        // uadd16 r7, r7, r14                // ....................................................................................................................................................................................................................................*.........................................................................
        // vmov r10, s11                     // .............................................................................................................................................................................................................................................*................................................................
        // vmov r11, s12                     // .............................................................................................................................................................................................................................*................................................................................
        // smulwb r14, r10, r3               // ................................................................................................................................................................................................................................................*.............................................................
        // smulwt r3, r10, r3                // ..................................................................................................................................................................................................................................................*...........................................................
        // smlabt r14, r14, r12, r0          // ....................................................................................................................................................................................................................................................*.........................................................
        // smlabt r3, r3, r12, r0            // ......................................................................................................................................................................................................................................................*.......................................................
        // pkhtb r14, r3, r14, asr #16       // .........................................................................................................................................................................................................................................................*....................................................
        // usub16 r3, r2, r14                // ...................................................................................................................................................................................................................................................................*..........................................
        // uadd16 r2, r2, r14                // .....................................................................................................................................................................................................................................................................*........................................
        // smulwb r14, r11, r5               // ................................................................................................................................................................................................................................*.............................................................................
        // smulwt r5, r11, r5                // ...................................................................................................................................................................................................................................*..........................................................................
        // smlabt r14, r14, r12, r0          // .....................................................................................................................................................................................................................................*........................................................................
        // smlabt r5, r5, r12, r0            // .......................................................................................................................................................................................................................................*......................................................................
        // pkhtb r14, r5, r14, asr #16       // .........................................................................................................................................................................................................................................*....................................................................
        // usub16 r5, r4, r14                // ...........................................................................................................................................................................................................................................*..................................................................
        // uadd16 r4, r4, r14                // ...............................................................................................................................................................................................................................................*..............................................................
        // vmov r10, s13                     // .....................................................................................................................................................................................................................................................*........................................................
        // vmov r11, s14                     // ......................................................................................................................................................................................................................................*.......................................................................
        // smulwb r14, r10, r7               // ........................................................................................................................................................................................................................................................*.....................................................
        // smulwt r7, r10, r7                // ..........................................................................................................................................................................................................................................................*...................................................
        // smlabt r14, r14, r12, r0          // ............................................................................................................................................................................................................................................................*.................................................
        // smlabt r7, r7, r12, r0            // ..............................................................................................................................................................................................................................................................*...............................................
        // pkhtb r14, r7, r14, asr #16       // .................................................................................................................................................................................................................................................................*............................................
        // usub16 r7, r6, r14                // .......................................................................................................................................................................................................................................................................*......................................
        // uadd16 r6, r6, r14                // ...........................................................................................................................................................................................................................................................................*..................................
        // smulwb r14, r11, r9               // ........................................................................................................................................................................................................................................*.....................................................................
        // smulwt r9, r11, r9                // ..........................................................................................................................................................................................................................................*...................................................................
        // smlabt r14, r14, r12, r0          // ............................................................................................................................................................................................................................................*.................................................................
        // smlabt r9, r9, r12, r0            // ..............................................................................................................................................................................................................................................*...............................................................
        // pkhtb r14, r9, r14, asr #16       // .................................................................................................................................................................................................................................................*............................................................
        // usub16 r9, r8, r14                // ...................................................................................................................................................................................................................................................*..........................................................
        // uadd16 r8, r8, r14                // .......................................................................................................................................................................................................................................................*......................................................
        // vmov r0, s23                      // ..................................................................................................................................................................................................................................................................*...........................................
        // vmov r10, s1                      // ...............................................................................................................................................................................................................................................................................................*..............
        // uadd16 r14, r3, r10               // ................................................................................................................................................................................................................................................................................................*.............
        // usub16 r3, r3, r10                // ..................................................................................................................................................................................................................................................................................................*...........
        // str.w r14, [r0, #1*256/4]         // .................................................................................................................................................................................................................................................................................................*............
        // str.w r3, [r0, #1*256/4+32]       // .....................................................................................................................................................................................................................................................................................................*........
        // vmov r10, s3                      // ...................................................................................................................................................................................................................................................................................*..........................
        // uadd16 r14, r5, r10               // ....................................................................................................................................................................................................................................................................................*.........................
        // usub16 r5, r5, r10                // ......................................................................................................................................................................................................................................................................................*.......................
        // str.w r14, [r0, #3*256/4]         // .....................................................................................................................................................................................................................................................................................*........................
        // str.w r5, [r0, #3*256/4+32]       // .......................................................................................................................................................................................................................................................................................*......................
        // vmov r10, s5                      // ................................................................................................................................................................................................................................................................*.............................................
        // uadd16 r14, r7, r10               // .............................................................................................................................................................................................................................................................................*................................
        // usub16 r7, r7, r10                // .........................................................................................................................................................................................................................................................................*....................................
        // str.w r14, [r0, #5*256/4]         // ..............................................................................................................................................................................................................................................................................*...............................
        // str.w r7, [r0, #5*256/4+32]       // ..........................................................................................................................................................................................................................................................................*...................................
        // vmov r10, s7                      // ............................................................................................................................................................................................................................................................................*.................................
        // uadd16 r14, r9, r10               // ...............................................................................................................................................................................................................................................................................*..............................
        // usub16 r9, r9, r10                // ..................................................................................................................................................................................................................................................................................*...........................
        // str.w r14, [r0, #7*256/4]         // .................................................................................................................................................................................................................................................................................*............................
        // str.w r9, [r0, #7*256/4+32]       // ...........................................................................................................................................................................................................................................................................................*..................
        // vmov r5, s2                       // ...........................................................................................................................................................................................................................................................*..................................................
        // uadd16 r14, r4, r5                // ...............................................................................................................................................................................................................................................................*..............................................
        // usub16 r10, r4, r5                // .............................................................................................................................................................................................................................................................*................................................
        // str.w r14, [r0, #2*256/4]         // ........................................................................................................................................................................................................................................................................*.....................................
        // str.w r10, [r0, #2*256/4+32]      // ....................................................................................................................................................................................................................................................................*.........................................
        // vmov r7, s4                       // ......................................................................................................................................................................................................................................................................*.......................................
        // uadd16 r14, r6, r7                // ..............................................................................................................................................................................................................................................................................................*...............
        // usub16 r10, r6, r7                // ........................................................................................................................................................................................................................................................................................*.....................
        // str.w r14, [r0, #4*256/4]         // .........................................................................................................................................................................................................................................................................................................*....
        // str.w r10, [r0, #4*256/4+32]      // .........................................................................................................................................................................................................................................................................................*....................
        // vmov r9, s6                       // ..........................................................................................................................................................................................................................................................................................*...................
        // uadd16 r14, r8, r9                // ..........................................................................................................................................................................................................................................................................................................*...
        // usub16 r10, r8, r9                // ............................................................................................................................................................................................................................................................................................*.................
        // str.w r14, [r0, #6*256/4]         // ...........................................................................................................................................................................................................................................................................................................*..
        // str.w r10, [r0, #6*256/4+32]      // .............................................................................................................................................................................................................................................................................................*................
        // vmov r3, s0                       // ...................................................................................................................................................................................................................................................................................................*..........
        // uadd16 r14, r2, r3                // ....................................................................................................................................................................................................................................................................................................*.........
        // usub16 r10, r2, r3                // ......................................................................................................................................................................................................................................................................................................*.......
        // str.w r10, [r0, #32]              // ............................................................................................................................................................................................................................................................................................................*.
        // str.w r14, [r0], #4               // .......................................................................................................................................................................................................................................................................................................*......
        // vmov r14, s24                     // ................................................................................................................................................................................................................................................................................*.............................
        // cmp.w r0, r14                     // ........................................................................................................................................................................................................................................................................................................*.....
        // bne.w layer1234_loop              // .............................................................................................................................................................................................................................................................................................................*



 sub.w poly, #8*strincr

 ### LAYER 3+2+1

 .equ distance2, distance/16
 .equ strincr2, 32

 add.w tmp, poly, #strincr2*16
 vmov s13, tmp
layer567_loop:
                                            // Instructions:    110
                                            // Expected cycles: 59
                                            // Expected IPC:    1.86
                                            //
                                            // --------------------------------------------- original position --------------------------------------------->
                                            // 0                        25                       50                       75                       100
                                            // |------------------------|------------------------|------------------------|------------------------|---------
        vmov s23, r0                        // .*............................................................................................................
        ldr.w r9, [r1], #28                 // *.............................................................................................................
        ldr.w r14, [r0, #24]                // ..*...........................................................................................................
        ldr.w r2, [r0, #20]                 // ...*..........................................................................................................
        ldr.w r10, [r0, #12]                // ....*.........................................................................................................
        ldr.w r8, [r0, #16]                 // .....*........................................................................................................
        ldr.w r6, [r0, #28]                 // ......*.......................................................................................................
        smulwb r11, r9, r2                  // .........*....................................................................................................
        ldr.w r4, [r0, #4]                  // ........*.....................................................................................................
        smulwt r3, r9, r2                   // .......*......................................................................................................
        ldr.w r2, [r0, #8]                  // ..........*...................................................................................................
        smulwb r7, r9, r6                   // ...........*..................................................................................................
        ldr.w r5, [r0, #0]                  // ............*.................................................................................................
        smulwt r6, r9, r6                   // .............*................................................................................................
        movw r0, #24608                     // ..............*...............................................................................................
        smlabt r7, r7, r12, r0              // ...............*..............................................................................................
        // gap                              // ..............................................................................................................
        smlabt r11, r11, r12, r0            // ................*.............................................................................................
        // gap                              // ..............................................................................................................
        smlabt r6, r6, r12, r0              // .................*............................................................................................
        // gap                              // ..............................................................................................................
        smlabt r3, r3, r12, r0              // ..................*...........................................................................................
        pkhtb r6, r6, r7, asr #16           // ...................*..........................................................................................
        smulwb r7, r9, r14                  // ....................*.........................................................................................
        // gap                              // ..............................................................................................................
        smulwt r14, r9, r14                 // ......................*.......................................................................................
        pkhtb r3, r3, r11, asr #16          // .....................*........................................................................................
        smlabt r11, r7, r12, r0             // .......................*......................................................................................
        usub16 r7, r4, r3                   // ..........................*...................................................................................
        smlabt r14, r14, r12, r0            // .........................*....................................................................................
        uadd16 r3, r4, r3                   // ........................*.....................................................................................
        smulwb r4, r9, r8                   // ...........................*..................................................................................
        pkhtb r11, r14, r11, asr #16        // ............................*.................................................................................
        smulwt r8, r9, r8                   // .............................*................................................................................
        ldr r9, [r1, #-20]                  // ...............................................*..............................................................
        smlabt r4, r4, r12, r0              // ...............................*..............................................................................
        usub16 r14, r2, r11                 // .....................................*........................................................................
        smlabt r8, r8, r12, r0              // .................................*............................................................................
        uadd16 r2, r2, r11                  // .......................................*......................................................................
        smulwb r11, r9, r14                 // ....................................................*.........................................................
        pkhtb r8, r8, r4, asr #16           // ...................................*..........................................................................
        smulwt r14, r9, r14                 // .....................................................*........................................................
        uadd16 r4, r10, r6                  // ..............................*...............................................................................
        smlabt r11, r11, r12, r0            // ........................................................*.....................................................
        usub16 r6, r10, r6                  // ..................................*...........................................................................
        smlabt r10, r14, r12, r0            // .........................................................*....................................................
        // gap                              // ..............................................................................................................
        smulwb r14, r9, r6                  // ...........................................................*..................................................
        pkhtb r10, r10, r11, asr #16        // ............................................................*.................................................
        smulwt r9, r9, r6                   // .............................................................*................................................
        ldr r6, [r1, #-24]                  // ................................*.............................................................................
        smlabt r14, r14, r12, r0            // ...............................................................*..............................................
        uadd16 r11, r5, r8                  // .........................................*....................................................................
        smlabt r9, r9, r12, r0              // .................................................................*............................................
        usub16 r5, r5, r8                   // ...........................................*..................................................................
        smulwb r8, r6, r4                   // ....................................*.........................................................................
        pkhtb r14, r9, r14, asr #16         // ....................................................................*.........................................
        smulwt r4, r6, r4                   // ......................................*.......................................................................
        usub16 r9, r7, r14                  // ........................................................................*.....................................
        smlabt r8, r8, r12, r0              // ........................................*.....................................................................
        uadd16 r7, r7, r14                  // ..........................................................................*...................................
        smlabt r14, r4, r12, r0             // ..........................................*...................................................................
        // gap                              // ..............................................................................................................
        smulwb r4, r6, r2                   // ..............................................*...............................................................
        pkhtb r8, r14, r8, asr #16          // .............................................*................................................................
        smulwt r14, r6, r2                  // ............................................*.................................................................
        ldr r6, [r1, #-12]                  // ......................................................................*.......................................
        smlabt r4, r4, r12, r0              // ..................................................*...........................................................
        usub16 r2, r3, r8                   // .................................................*............................................................
        smlabt r14, r14, r12, r0            // ................................................*.............................................................
        uadd16 r8, r3, r8                   // ...................................................*..........................................................
        smulwb r3, r6, r2                   // ...........................................................................*..................................
        pkhtb r4, r14, r4, asr #16          // ......................................................*.......................................................
        smulwt r2, r6, r2                   // .............................................................................*................................
        ldr r14, [r1, #-16]                 // ..............................................................*...............................................
        smlabt r6, r3, r12, r0              // ...............................................................................*..............................
        usub16 r3, r5, r10                  // ..................................................................*...........................................
        smlabt r2, r2, r12, r0              // .................................................................................*............................
        uadd16 r5, r5, r10                  // ................................................................*.............................................
        smulwb r10, r14, r8                 // ...................................................................*..........................................
        pkhtb r2, r2, r6, asr #16           // ....................................................................................*.........................
        smulwt r8, r14, r8                  // .....................................................................*........................................
        ldr r6, [r1, #-4]                   // ......................................................................................*.......................
        smlabt r10, r10, r12, r0            // .......................................................................*......................................
        uadd16 r14, r11, r4                 // ..........................................................*...................................................
        smlabt r8, r8, r12, r0              // .........................................................................*....................................
        usub16 r11, r11, r4                 // .......................................................*......................................................
        smulwb r4, r6, r9                   // ...........................................................................................*..................
        pkhtb r10, r8, r10, asr #16         // ............................................................................*.................................
        smulwt r9, r6, r9                   // .............................................................................................*................
        ldr r8, [r1, #-8]                   // ..............................................................................*...............................
        smlabt r4, r4, r12, r0              // ...............................................................................................*..............
        uadd16 r6, r14, r10                 // ..................................................................................*...........................
        smlabt r9, r9, r12, r0              // .................................................................................................*............
        usub16 r14, r14, r10                // ................................................................................*.............................
        smulwb r10, r8, r7                  // ...................................................................................*..........................
        // gap                              // ..............................................................................................................
        smulwt r7, r8, r7                   // .....................................................................................*........................
        uadd16 r8, r11, r2                  // ..........................................................................................*...................
        smlabt r10, r10, r12, r0            // .......................................................................................*......................
        usub16 r2, r11, r2                  // ........................................................................................*.....................
        smlabt r7, r7, r12, r0              // .........................................................................................*....................
        vmov r0, s23                        // ..................................................................................................*...........
        str.w r6, [r0], #32                 // .....................................................................................................*........ // @slothy:core // @slothy:before=cmp
        str r14, [r0, #-28]                 // ...................................................................................................*..........
        // gap                              // ..............................................................................................................
        pkhtb r7, r7, r10, asr #16          // ............................................................................................*.................
        str r2, [r0, #-20]                  // .......................................................................................................*......
        usub16 r6, r5, r7                   // ..............................................................................................*...............
        str r8, [r0, #-24]                  // .........................................................................................................*....
        uadd16 r14, r5, r7                  // ................................................................................................*.............
        str r14, [r0, #-16]                 // ...........................................................................................................*..
        pkhtb r14, r9, r4, asr #16          // ....................................................................................................*.........
        str r6, [r0, #-12]                  // ..........................................................................................................*...
        uadd16 r8, r3, r14                  // ........................................................................................................*.....
        str r8, [r0, #-8]                   // ............................................................................................................*.
        usub16 r8, r3, r14                  // ......................................................................................................*.......
        str r8, [r0, #-4]                   // .............................................................................................................*

                                             // ----------------------------------------------- new position ------------------------------------------------>
                                             // 0                        25                       50                       75                       100
                                             // |------------------------|------------------------|------------------------|------------------------|---------
        // ldr.w r9, [r1], #28               // .*............................................................................................................
        // vmov s23, r0                      // *.............................................................................................................
        // ldr.w r11, [r0, #24]              // ..*...........................................................................................................
        // ldr.w r2, [r0, #20]               // ...*..........................................................................................................
        // ldr.w r5, [r0, #12]               // ....*.........................................................................................................
        // ldr.w r8, [r0, #16]               // .....*........................................................................................................
        // ldr.w r3, [r0, #28]               // ......*.......................................................................................................
        // smulwt r14, r9, r2                // .........*....................................................................................................
        // ldr.w r10, [r0, #4]               // ........*.....................................................................................................
        // smulwb r7, r9, r2                 // .......*......................................................................................................
        // ldr.w r2, [r0, #8]                // ..........*...................................................................................................
        // smulwb r6, r9, r3                 // ...........*..................................................................................................
        // ldr.w r4, [r0, #0]                // ............*.................................................................................................
        // smulwt r3, r9, r3                 // .............*................................................................................................
        // movw r0, #24608                   // ..............*...............................................................................................
        // smlabt r6, r6, r12, r0            // ...............*..............................................................................................
        // smlabt r7, r7, r12, r0            // ................*.............................................................................................
        // smlabt r3, r3, r12, r0            // .................*............................................................................................
        // smlabt r14, r14, r12, r0          // ..................*...........................................................................................
        // pkhtb r6, r3, r6, asr #16         // ...................*..........................................................................................
        // smulwb r3, r9, r11                // ....................*.........................................................................................
        // pkhtb r7, r14, r7, asr #16        // ......................*.......................................................................................
        // smulwt r11, r9, r11               // .....................*........................................................................................
        // smlabt r14, r3, r12, r0           // .......................*......................................................................................
        // uadd16 r3, r10, r7                // ..........................*...................................................................................
        // smlabt r11, r11, r12, r0          // .........................*....................................................................................
        // usub16 r7, r10, r7                // ........................*.....................................................................................
        // smulwb r10, r9, r8                // ...........................*..................................................................................
        // pkhtb r11, r11, r14, asr #16      // ............................*.................................................................................
        // smulwt r8, r9, r8                 // .............................*................................................................................
        // uadd16 r14, r5, r6                // ......................................*.......................................................................
        // smlabt r10, r10, r12, r0          // ...............................*..............................................................................
        // ldr r9, [r1, #-24]                // .............................................*................................................................
        // smlabt r8, r8, r12, r0            // .................................*............................................................................
        // usub16 r6, r5, r6                 // ........................................*.....................................................................
        // pkhtb r8, r8, r10, asr #16        // ....................................*.........................................................................
        // smulwb r5, r9, r14                // ..................................................*...........................................................
        // usub16 r10, r2, r11               // ................................*.............................................................................
        // smulwt r14, r9, r14               // ....................................................*.........................................................
        // uadd16 r11, r2, r11               // ..................................*...........................................................................
        // smlabt r5, r5, r12, r0            // ......................................................*.......................................................
        // uadd16 r2, r4, r8                 // ...............................................*..............................................................
        // smlabt r14, r14, r12, r0          // ........................................................*.....................................................
        // usub16 r8, r4, r8                 // .................................................*............................................................
        // smulwt r4, r9, r11                // ...........................................................*..................................................
        // pkhtb r14, r14, r5, asr #16       // ..........................................................*...................................................
        // smulwb r9, r9, r11                // .........................................................*....................................................
        // ldr r11, [r1, #-20]               // ..............................*...............................................................................
        // smlabt r4, r4, r12, r0            // ...............................................................*..............................................
        // usub16 r5, r3, r14                // ..............................................................*...............................................
        // smlabt r9, r9, r12, r0            // .............................................................*................................................
        // uadd16 r14, r3, r14               // ................................................................*.............................................
        // smulwb r3, r11, r10               // ...................................*..........................................................................
        // smulwt r10, r11, r10              // .....................................*........................................................................
        // pkhtb r9, r4, r9, asr #16         // ..................................................................*...........................................
        // usub16 r4, r2, r9                 // ................................................................................*.............................
        // smlabt r3, r3, r12, r0            // .......................................*......................................................................
        // smlabt r10, r10, r12, r0          // .........................................*....................................................................
        // uadd16 r2, r2, r9                 // ..............................................................................*...............................
        // smulwb r9, r11, r6                // ..........................................*...................................................................
        // pkhtb r10, r10, r3, asr #16       // ...........................................*..................................................................
        // smulwt r3, r11, r6                // ............................................*.................................................................
        // ldr r6, [r1, #-16]                // ....................................................................*.........................................
        // smlabt r9, r9, r12, r0            // ..............................................*...............................................................
        // uadd16 r11, r8, r10               // ........................................................................*.....................................
        // smlabt r3, r3, r12, r0            // ................................................*.............................................................
        // usub16 r10, r8, r10               // ......................................................................*.......................................
        // smulwb r8, r6, r14                // .........................................................................*....................................
        // pkhtb r3, r3, r9, asr #16         // ...................................................*..........................................................
        // smulwt r6, r6, r14                // ...........................................................................*..................................
        // ldr r14, [r1, #-12]               // ............................................................*.................................................
        // smlabt r8, r8, r12, r0            // .............................................................................*................................
        // usub16 r9, r7, r3                 // .....................................................*........................................................
        // smlabt r6, r6, r12, r0            // ...............................................................................*..............................
        // uadd16 r7, r7, r3                 // .......................................................*......................................................
        // smulwb r3, r14, r5                // .................................................................*............................................
        // pkhtb r6, r6, r8, asr #16         // ..................................................................................*...........................
        // smulwt r8, r14, r5                // ...................................................................*..........................................
        // ldr r14, [r1, #-8]                // ....................................................................................*.........................
        // smlabt r5, r3, r12, r0            // .....................................................................*........................................
        // usub16 r3, r2, r6                 // ........................................................................................*.....................
        // smlabt r8, r8, r12, r0            // .......................................................................*......................................
        // uadd16 r6, r2, r6                 // ......................................................................................*.......................
        // smulwb r2, r14, r7                // .........................................................................................*....................
        // pkhtb r8, r8, r5, asr #16         // ..........................................................................*...................................
        // smulwt r14, r14, r7               // ..........................................................................................*...................
        // ldr r7, [r1, #-4]                 // ............................................................................*.................................
        // smlabt r2, r2, r12, r0            // ............................................................................................*.................
        // usub16 r5, r4, r8                 // .............................................................................................*................
        // smlabt r14, r14, r12, r0          // ..............................................................................................*...............
        // uadd16 r8, r4, r8                 // ...........................................................................................*..................
        // smulwb r4, r7, r9                 // .................................................................................*............................
        // pkhtb r14, r14, r2, asr #16       // ..................................................................................................*...........
        // smulwt r9, r7, r9                 // ...................................................................................*..........................
        // usub16 r7, r11, r14               // ....................................................................................................*.........
        // smlabt r2, r4, r12, r0            // .....................................................................................*........................
        // uadd16 r11, r11, r14              // ......................................................................................................*.......
        // smlabt r14, r9, r12, r0           // .......................................................................................*......................
        // vmov r0, s23                      // ...............................................................................................*..............
        // str.w r3, [r0, #4]                // .................................................................................................*............
        // pkhtb r14, r14, r2, asr #16       // ........................................................................................................*.....
        // str.w r6, [r0], #32               // ................................................................................................*.............
        // usub16 r9, r10, r14               // ............................................................................................................*.
        // str r5, [r0, #-20]                // ...................................................................................................*..........
        // uadd16 r6, r10, r14               // ..........................................................................................................*...
        // str r8, [r0, #-24]                // .....................................................................................................*........
        // str r7, [r0, #-12]                // .........................................................................................................*....
        // str r11, [r0, #-16]               // .......................................................................................................*......
        // str r6, [r0, #-8]                 // ...........................................................................................................*..
        // str r9, [r0, #-4]                 // .............................................................................................................*

        vmov tmp, s13
        cmp poly, tmp
        bne layer567_loop
 vpop.w {s16-s27}
 pop {r4-r11, pc}

.size small_ntt_asm_769_opt_m7, .-small_ntt_asm_769_opt_m7