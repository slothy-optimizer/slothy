/**
 * Copyright (c) 2023 Junhao Huang (jhhuang_nuaa@126.com)
 *
 * Licensed under the Apache License, Version 2.0(the "License");
 * you may not use this file except in compliance with the License.
 * You may obtain a copy of the License at
 *
 * http:// www.apache.org/licenses/LICENSE-2.0
 *
 * Unless required by applicable law or agreed to in writing, software
 * distributed under the License is distributed on an "AS IS" BASIS,
 * WITHOUT WARRANTIES OR CONDITIONS OF ANY KIND, either express or implied.
 * See the License for the specific language governing permissions and
 * limitations under the License.
 */
.syntax unified
.cpu cortex-m4
.thumb

// general macros
.macro load a, a0, a1, a2, a3, mem0, mem1, mem2, mem3
  ldr.w \a0, [\a, \mem0]
  ldr.w \a1, [\a, \mem1]
  ldr.w \a2, [\a, \mem2]
  ldr.w \a3, [\a, \mem3]
.endm

.macro store a, a0, a1, a2, a3, mem0, mem1, mem2, mem3
  str.w \a0, [\a, \mem0]
  str.w \a1, [\a, \mem1]
  str.w \a2, [\a, \mem2]
  str.w \a3, [\a, \mem3]
.endm

.macro mul_twiddle_plant a, twiddle, tmp, q, qa
 smulwb \tmp, \twiddle, \a
 smulwt \a,   \twiddle, \a
 smlabt \tmp, \tmp, \q, \qa
 smlabt \a, \a, \q, \qa
 pkhtb \a, \a, \tmp, asr #16
.endm

.macro doublebutterfly_plant a0, a1, twiddle, tmp, q, qa
 smulwb \tmp, \twiddle, \a1
 smulwt \a1, \twiddle, \a1
 smlabt \tmp, \tmp, \q, \qa
 smlabt \a1, \a1, \q, \qa
 pkhtb \tmp, \a1, \tmp, asr #16
 usub16 \a1, \a0, \tmp
 uadd16 \a0, \a0, \tmp
.endm

.macro two_doublebutterfly_plant a0, a1, a2, a3, twiddle0, twiddle1, tmp, q, qa
 doublebutterfly_plant \a0, \a1, \twiddle0, \tmp, \q, \qa
 doublebutterfly_plant \a2, \a3, \twiddle1, \tmp, \q, \qa
.endm

// ########
// ########
// # INTT #
// ########
// ########

// input: 0.5/1q
.macro _3_layer_double_inv_CT_16_plant_light c0, c1, c2, c3, c4, c5, c6, c7, xi2, xi4, xi5, xi6, twiddle1, tmp2, q, qa, tmp

 // layer 1
 sadd16 \tmp, \c0, \c1 // c0, c1
 ssub16 \c1, \c0, \c1
 sadd16 \tmp2, \c2, \c3 // c2, c3
 ssub16 \c3, \c2, \c3
 // tmp, c1, tmp2, c3: 1q maximum
 sadd16 \c0, \c4, \c5 // c4, c5
 ssub16 \c5, \c4, \c5
 sadd16 \c2, \c6, \c7 // c6, c7
 ssub16 \c7, \c6, \c7
 // c4, c6 are free at this point
 // c0,c5,c2,c7 1q maximum

 // layer 2
 sadd16 \c6, \tmp, \tmp2 // c0, c2
 ssub16 \tmp2, \tmp, \tmp2
 sadd16 \c4, \c0, \c2 // c4, c6
 ssub16 \c2, \c0, \c2
 // c6, tmp2, c4, c2: 2q maximum

 vmov \twiddle1, \xi2
 doublebutterfly_plant \c1, \c3, \twiddle1, \tmp, \q, \qa
 doublebutterfly_plant \c5, \c7, \twiddle1, \tmp, \q, \qa
 // c1, c3, c7, c5: 1.5q maximum;

 // tmp and c0 are free at this point
 // layer 3
 sadd16 \c0, \c6, \c4 // c0, c4
 ssub16 \c4, \c6, \c4
 // c0, c4: 4q
 // c6 are free at this point
 vmov \twiddle1, \xi4
 doublebutterfly_plant \c1, \c5, \twiddle1, \tmp, \q, \qa
 // c1, c5: 2q maximum

 vmov \twiddle1, \xi5
 // this block is one doublebutterfly
 smulwb \tmp, \twiddle1, \c2  // c2, c6
 smulwt \c2,  \twiddle1, \c2
 smlabt \tmp, \tmp, \q, \qa
 smlabt \c2, \c2, \q, \qa
 pkhtb \tmp, \c2, \tmp, asr #16
 ssub16 \c6, \tmp2, \tmp
 sadd16 \c2, \tmp2, \tmp
 // c6, c2: 4.5q
 vmov \twiddle1, \xi6
 doublebutterfly_plant \c3, \c7, \twiddle1, \tmp, \q, \qa
 // c3, c7: 2.5q maximum
.endm
.macro _3_layer_double_inv_CT_16_plant c0, c1, c2, c3, c4, c5, c6, c7, twiddle1, twiddle2, twiddle_ptr, q, qa, tmp
 // layer 3
 ldr.w \twiddle1, [\twiddle_ptr], #4
 two_doublebutterfly_plant \c0, \c1, \c2, \c3, \twiddle1, \twiddle1, \tmp, \q, \qa
 two_doublebutterfly_plant \c4, \c5, \c6, \c7, \twiddle1, \twiddle1, \tmp, \q, \qa

 // layer 2
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 two_doublebutterfly_plant \c0, \c2, \c1, \c3, \twiddle1, \twiddle2, \tmp, \q, \qa

 two_doublebutterfly_plant \c4, \c6, \c5, \c7, \twiddle1, \twiddle2, \tmp, \q, \qa

 // layer 1
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 two_doublebutterfly_plant \c0, \c4, \c1, \c5, \twiddle1, \twiddle2, \tmp, \q, \qa

 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 two_doublebutterfly_plant \c2, \c6, \c3, \c7, \twiddle1, \twiddle2, \tmp, \q, \qa
.endm

.macro _3_layer_double_inv_twist_16_plant c0, c1, c2, c3, c4, c5, c6, c7, twiddle1, twiddle2, twiddle_ptr, q, qa, tmp
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 mul_twiddle_plant \c0, \twiddle1, \tmp, \q, \qa
 mul_twiddle_plant \c1, \twiddle2, \tmp, \q, \qa
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 mul_twiddle_plant \c2, \twiddle1, \tmp, \q, \qa
 mul_twiddle_plant \c3, \twiddle2, \tmp, \q, \qa
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 mul_twiddle_plant \c4, \twiddle1, \tmp, \q, \qa
 mul_twiddle_plant \c5, \twiddle2, \tmp, \q, \qa
 ldrd \twiddle1, \twiddle2, [\twiddle_ptr], #8
 mul_twiddle_plant \c6, \twiddle1, \tmp, \q, \qa
 mul_twiddle_plant \c7, \twiddle2, \tmp, \q, \qa
.endm
# input coefficients < 0.5q
.global small_invntt_asm_769_opt_m7
.type small_invntt_asm_769_opt_m7, %function
.align 2
small_invntt_asm_769_opt_m7:
 push {r4-r11, r14}
 vpush.w {s16-s23}
 poly         .req r0
 twiddle_ptr  .req r1
 poly0        .req r2
 poly1        .req r3
 poly2        .req r4
 poly3        .req r5
 poly4        .req r6
 poly5        .req r7
 poly6        .req r8
 poly7        .req r9
 twiddle1     .req r10
 twiddle2     .req r11
 q            .req r12
 // at the top of r12
 qa           .req r0
 // qa=2^a q;a=3; at the bottom of r12
 tmp          .req r14

 movt q, #769

 ### LAYER 7+6+5+4
 .equ distance, 16
 .equ offset, 32
 .equ strincr, 64

 // pre-load twiddle factors to FPU registers
 vldm twiddle_ptr!, {s8-s22}

 add.w tmp, poly, #8*strincr
 vmov s8, tmp
layer1234_loop:
                                           // Instructions:    217
                                           // Expected cycles: 112
                                           // Expected IPC:    1.94
                                           //
                                           // ---------------------------------------------- cycle (expected) ----------------------------------------------->
                                           // 0                        25                       50                       75                       100
                                           // |------------------------|------------------------|------------------------|------------------------|-----------
        ldr.w r3, [r0, #36]                // *...............................................................................................................
        ldr.w r10, [r0, #32]               // *...............................................................................................................
        sadd16 r11, r10, r3                // .*..............................................................................................................
        ldr.w r7, [r0, #44]                // .*..............................................................................................................
        ssub16 r3, r10, r3                 // ..*.............................................................................................................
        ldr.w r5, [r0, #60]                // ..*.............................................................................................................
        ldr.w r9, [r0, #52]                // ...*............................................................................................................
        ldr.w r2, [r0, #40]                // ...*............................................................................................................
        ssub16 r6, r2, r7                  // ....*...........................................................................................................
        ldr.w r8, [r0, #48]                // ....*...........................................................................................................
        sadd16 r4, r8, r9                  // .....*..........................................................................................................
        vmov s23, r0                       // .....*..........................................................................................................
        sadd16 r14, r2, r7                 // ......*.........................................................................................................
        vmov r2, s10                       // ......*.........................................................................................................
        ssub16 r7, r8, r9                  // .......*........................................................................................................
        ldr.w r8, [r0, #56]                // .......*........................................................................................................
        ssub16 r10, r8, r5                 // ........*.......................................................................................................
        smulwb r9, r2, r6                  // ........*.......................................................................................................
        sadd16 r0, r8, r5                  // .........*......................................................................................................
        smulwt r5, r2, r6                  // .........*......................................................................................................
        sadd16 r6, r4, r0                  // ..........*.....................................................................................................
        smulwb r8, r2, r10                 // ..........*.....................................................................................................
        ssub16 r4, r4, r0                  // ...........*....................................................................................................
        smulwt r2, r2, r10                 // ...........*....................................................................................................
        movw r0, #24608                    // ............*...................................................................................................
        smlabt r8, r8, r12, r0             // ............*...................................................................................................
        sadd16 r10, r11, r14               // .............*..................................................................................................
        smlabt r2, r2, r12, r0             // .............*..................................................................................................
        ssub16 r11, r11, r14               // ..............*.................................................................................................
        smlabt r14, r9, r12, r0            // ..............*.................................................................................................
        pkhtb r9, r2, r8, asr #16          // ...............*................................................................................................
        smlabt r5, r5, r12, r0             // ...............*................................................................................................
        uadd16 r8, r7, r9                  // ................*...............................................................................................
        vmov r2, s12                       // ................*...............................................................................................
        usub16 r9, r7, r9                  // .................*..............................................................................................
        smulwb r7, r2, r8                  // .................*..............................................................................................
        pkhtb r5, r5, r14, asr #16         // ..................*.............................................................................................
        smulwt r14, r2, r8                 // ..................*.............................................................................................
        sadd16 r2, r10, r6                 // ...................*............................................................................................
        smlabt r8, r7, r12, r0             // ...................*............................................................................................
        ssub16 r6, r10, r6                 // ....................*...........................................................................................
        smlabt r14, r14, r12, r0           // ....................*...........................................................................................
        usub16 r10, r3, r5                 // .....................*..........................................................................................
        vmov r7, s14                       // .....................*..........................................................................................
        pkhtb r14, r14, r8, asr #16        // ......................*.........................................................................................
        smulwb r8, r7, r9                  // ......................*.........................................................................................
        uadd16 r3, r3, r5                  // .......................*........................................................................................
        smulwt r5, r7, r9                  // .......................*........................................................................................
        usub16 r7, r3, r14                 // ........................*.......................................................................................
        smlabt r8, r8, r12, r0             // ........................*.......................................................................................
        vmov r9, s13                       // .........................*......................................................................................
        smlabt r5, r5, r12, r0             // .........................*......................................................................................
        uadd16 r3, r3, r14                 // ..........................*.....................................................................................
        smulwb r14, r9, r4                 // ..........................*.....................................................................................
        pkhtb r5, r5, r8, asr #16          // ...........................*....................................................................................
        smulwt r8, r9, r4                  // ...........................*....................................................................................
        vmov r4, s16                       // ............................*...................................................................................
        smlabt r14, r14, r12, r0           // ............................*...................................................................................
        usub16 r9, r10, r5                 // .............................*..................................................................................
        vmov s0, r2                        // .............................*..................................................................................
        smlabt r8, r8, r12, r0             // ..............................*.................................................................................
        uadd16 r5, r10, r5                 // ...............................*................................................................................
        smulwb r10, r4, r3                 // ...............................*................................................................................
        pkhtb r8, r8, r14, asr #16         // ................................*...............................................................................
        smulwt r14, r4, r3                 // ................................*...............................................................................
        sadd16 r4, r11, r8                 // .................................*..............................................................................
        smlabt r10, r10, r12, r0           // .................................*..............................................................................
        vmov r3, s17                       // ..................................*.............................................................................
        smlabt r2, r14, r12, r0            // ..................................*.............................................................................
        ssub16 r8, r11, r8                 // ...................................*............................................................................
        smulwb r11, r3, r4                 // ...................................*............................................................................
        vmov r14, s19                      // ....................................*...........................................................................
        smulwt r4, r3, r4                  // ....................................*...........................................................................
        pkhtb r10, r2, r10, asr #16        // .....................................*..........................................................................
        smulwb r3, r14, r6                 // .....................................*..........................................................................
        vmov r2, s20                       // ......................................*.........................................................................
        smulwt r14, r14, r6                // ......................................*.........................................................................
        smulwb r6, r2, r7                  // .......................................*........................................................................
        smlabt r3, r3, r12, r0             // ........................................*.......................................................................
        smlabt r14, r14, r12, r0           // .........................................*......................................................................
        smulwt r7, r2, r7                  // ..........................................*.....................................................................
        vmov r2, s18                       // ...........................................*....................................................................
        smlabt r11, r11, r12, r0           // ...........................................*....................................................................
        vmov s1, r10                       // ............................................*...................................................................
        smlabt r4, r4, r12, r0             // ............................................*...................................................................
        vmov r10, s22                      // .............................................*..................................................................
        smlabt r6, r6, r12, r0             // .............................................*..................................................................
        pkhtb r4, r4, r11, asr #16         // ..............................................*.................................................................
        smulwb r11, r10, r9                // ..............................................*.................................................................
        vmov s2, r4                        // ...............................................*................................................................
        smlabt r7, r7, r12, r0             // ...............................................*................................................................
        vmov r4, s23                       // ................................................*...............................................................
        smulwt r9, r10, r9                 // ................................................*...............................................................
        pkhtb r7, r7, r6, asr #16          // .................................................*..............................................................
        smlabt r6, r11, r12, r0            // .................................................*..............................................................
        ldr.w r11, [r4, #0]                // ..................................................*.............................................................
        ldr.w r10, [r4, #4]                // ..................................................*.............................................................
        pkhtb r14, r14, r3, asr #16        // ...................................................*............................................................
        smulwb r3, r2, r5                  // ...................................................*............................................................
        vmov s4, r14                       // ....................................................*...........................................................
        smulwt r5, r2, r5                  // ....................................................*...........................................................
        vmov s5, r7                        // .....................................................*..........................................................
        ldr.w r7, [r4, #12]                // .....................................................*..........................................................
        smlabt r2, r3, r12, r0             // ......................................................*.........................................................
        ssub16 r3, r11, r10                // .......................................................*........................................................
        smlabt r14, r5, r12, r0            // .......................................................*........................................................
        sadd16 r10, r11, r10               // ........................................................*.......................................................
        vmov r5, s21                       // ........................................................*.......................................................
        pkhtb r14, r14, r2, asr #16        // .........................................................*......................................................
        smulwt r2, r5, r8                  // .........................................................*......................................................
        vmov s3, r14                       // ..........................................................*.....................................................
        smulwb r14, r5, r8                 // ..........................................................*.....................................................
        ldr.w r8, [r4, #8]                 // ...........................................................*....................................................
        smlabt r9, r9, r12, r0             // ...........................................................*....................................................
        ssub16 r5, r8, r7                  // ............................................................*...................................................
        smlabt r14, r14, r12, r0           // ............................................................*...................................................
        pkhtb r6, r9, r6, asr #16          // .............................................................*..................................................
        smlabt r9, r2, r12, r0             // .............................................................*..................................................
        sadd16 r0, r8, r7                  // ..............................................................*.................................................
        ldr.w r7, [r4, #28]                // ..............................................................*.................................................
        pkhtb r14, r9, r14, asr #16        // ...............................................................*................................................
        ldr.w r8, [r4, #24]                // ...............................................................*................................................
        ssub16 r9, r8, r7                  // ................................................................*...............................................
        ldr.w r2, [r4, #20]                // ................................................................*...............................................
        sadd16 r7, r8, r7                  // .................................................................*..............................................
        ldr.w r8, [r4, #16]                // .................................................................*..............................................
        sadd16 r4, r8, r2                  // ..................................................................*.............................................
        vmov s6, r14                       // ..................................................................*.............................................
        ssub16 r14, r8, r2                 // ...................................................................*............................................
        vmov r8, s10                       // ...................................................................*............................................
        vmov s7, r6                        // ....................................................................*...........................................
        smulwt r6, r8, r9                  // ....................................................................*...........................................
        ssub16 r11, r10, r0                // .....................................................................*..........................................
        smulwb r9, r8, r9                  // .....................................................................*..........................................
        sadd16 r2, r10, r0                 // ......................................................................*.........................................
        smulwt r10, r8, r5                 // ......................................................................*.........................................
        movw r0, #24608                    // .......................................................................*........................................
        smulwb r8, r8, r5                  // .......................................................................*........................................
        sadd16 r5, r4, r7                  // ........................................................................*.......................................
        smlabt r9, r9, r12, r0             // ........................................................................*.......................................
        ssub16 r4, r4, r7                  // .........................................................................*......................................
        smlabt r6, r6, r12, r0             // .........................................................................*......................................
        smlabt r7, r10, r12, r0            // ..........................................................................*.....................................
        pkhtb r9, r6, r9, asr #16          // ...........................................................................*....................................
        smlabt r10, r8, r12, r0            // ...........................................................................*....................................
        uadd16 r6, r14, r9                 // ............................................................................*...................................
        vmov r8, s12                       // ............................................................................*...................................
        usub16 r9, r14, r9                 // .............................................................................*..................................
        smulwt r14, r8, r6                 // .............................................................................*..................................
        pkhtb r10, r7, r10, asr #16        // ..............................................................................*.................................
        smulwb r7, r8, r6                  // ..............................................................................*.................................
        ssub16 r6, r2, r5                  // ...............................................................................*................................
        smlabt r14, r14, r12, r0           // ...............................................................................*................................
        sadd16 r2, r2, r5                  // ................................................................................*...............................
        smlabt r7, r7, r12, r0             // ................................................................................*...............................
        uadd16 r5, r3, r10                 // .................................................................................*..............................
        vmov r8, s13                       // .................................................................................*..............................
        usub16 r10, r3, r10                // ..................................................................................*.............................
        smulwb r3, r8, r4                  // ..................................................................................*.............................
        pkhtb r7, r14, r7, asr #16         // ...................................................................................*............................
        smulwt r4, r8, r4                  // ...................................................................................*............................
        uadd16 r14, r5, r7                 // ....................................................................................*...........................
        smlabt r8, r3, r12, r0             // ....................................................................................*...........................
        vmov r3, s14                       // .....................................................................................*..........................
        smlabt r4, r4, r12, r0             // .....................................................................................*..........................
        usub16 r7, r5, r7                  // ......................................................................................*.........................
        smulwb r5, r3, r9                  // ......................................................................................*.........................
        pkhtb r4, r4, r8, asr #16          // .......................................................................................*........................
        smulwt r9, r3, r9                  // .......................................................................................*........................
        ssub16 r8, r11, r4                 // ........................................................................................*.......................
        smlabt r5, r5, r12, r0             // ........................................................................................*.......................
        sadd16 r4, r11, r4                 // .........................................................................................*......................
        vmov r3, s1                        // .........................................................................................*......................
        usub16 r11, r14, r3                // ..........................................................................................*.....................
        smlabt r9, r9, r12, r0             // ..........................................................................................*.....................
        vmov r0, s23                       // ...........................................................................................*....................
        str.w r11, [r0, #36]               // ...........................................................................................*....................
        uadd16 r3, r14, r3                 // ............................................................................................*...................
        vmov r14, s2                       // ............................................................................................*...................
        uadd16 r11, r4, r14                // .............................................................................................*..................
        str.w r3, [r0, #4]                 // .............................................................................................*..................
        pkhtb r9, r9, r5, asr #16          // ..............................................................................................*.................
        str.w r11, [r0, #8]                // ..............................................................................................*.................
        usub16 r3, r10, r9                 // ...............................................................................................*................
        vmov r11, s7                       // ...............................................................................................*................
        usub16 r5, r3, r11                 // ................................................................................................*...............
        str.w r5, [r0, #60]                // ................................................................................................*...............
        uadd16 r10, r10, r9                // .................................................................................................*..............
        vmov r5, s4                        // .................................................................................................*..............
        uadd16 r9, r6, r5                  // ..................................................................................................*.............
        str.w r9, [r0, #16]                // ..................................................................................................*.............
        usub16 r5, r6, r5                  // ...................................................................................................*............
        vmov r9, s6                        // ...................................................................................................*............
        uadd16 r6, r3, r11                 // ....................................................................................................*...........
        vmov r11, s5                       // ....................................................................................................*...........
        usub16 r3, r7, r11                 // .....................................................................................................*..........
        str.w r5, [r0, #48]                // .....................................................................................................*..........
        uadd16 r5, r7, r11                 // ......................................................................................................*.........
        str.w r5, [r0, #20]                // ......................................................................................................*.........
        usub16 r5, r4, r14                 // .......................................................................................................*........
        str.w r5, [r0, #40]                // .......................................................................................................*........
        uadd16 r5, r8, r9                  // ........................................................................................................*.......
        str.w r5, [r0, #24]                // ........................................................................................................*.......
        usub16 r5, r8, r9                  // .........................................................................................................*......
        str.w r3, [r0, #52]                // .........................................................................................................*......
        str.w r5, [r0, #56]                // ..........................................................................................................*.....
        vmov r5, s3                        // ..........................................................................................................*.....
        usub16 r14, r10, r5                // ...........................................................................................................*....
        str.w r14, [r0, #44]               // ...........................................................................................................*....
        uadd16 r5, r10, r5                 // ............................................................................................................*...
        str.w r6, [r0, #28]                // ............................................................................................................*...
        str.w r5, [r0, #12]                // .............................................................................................................*..
        vmov r5, s0                        // .............................................................................................................*..
        usub16 r14, r2, r5                 // ..............................................................................................................*.
        str.w r14, [r0, #32]               // ..............................................................................................................*.
        uadd16 r11, r2, r5                 // ...............................................................................................................*
        str.w r11, [r0], #64               // ...............................................................................................................* // @slothy:core

                                             // ---------------------------------------------- cycle (expected) ----------------------------------------------->
                                             // 0                        25                       50                       75                       100
                                             // |------------------------|------------------------|------------------------|------------------------|-----------
        // ldr.w r7, [r0, #52]               // ...*............................................................................................................
        // ldr.w r9, [r0, #32]               // *...............................................................................................................
        // ldr.w r11, [r0, #36]              // *...............................................................................................................
        // ldr.w r10, [r0, #40]              // ...*............................................................................................................
        // sadd16 r5, r9, r11                // .*..............................................................................................................
        // ldr.w r14, [r0, #44]              // .*..............................................................................................................
        // ssub16 r2, r10, r14               // ....*...........................................................................................................
        // ldr.w r6, [r0, #48]               // ....*...........................................................................................................
        // sadd16 r4, r6, r7                 // .....*..........................................................................................................
        // vmov s23, r0                      // .....*..........................................................................................................
        // ssub16 r3, r9, r11                // ..*.............................................................................................................
        // ldr.w r9, [r0, #60]               // ..*.............................................................................................................
        // sadd16 r11, r10, r14              // ......*.........................................................................................................
        // vmov r10, s10                     // ......*.........................................................................................................
        // ssub16 r7, r6, r7                 // .......*........................................................................................................
        // ldr.w r8, [r0, #56]               // .......*........................................................................................................
        // sadd16 r0, r8, r9                 // .........*......................................................................................................
        // smulwb r14, r10, r2               // ........*.......................................................................................................
        // sadd16 r6, r4, r0                 // ..........*.....................................................................................................
        // smulwt r2, r10, r2                // .........*......................................................................................................
        // ssub16 r4, r4, r0                 // ...........*....................................................................................................
        // ssub16 r9, r8, r9                 // ........*.......................................................................................................
        // movw r0, #24608                   // ............*...................................................................................................
        // smulwb r8, r10, r9                // ..........*.....................................................................................................
        // smulwt r10, r10, r9               // ...........*....................................................................................................
        // smlabt r9, r8, r12, r0            // ............*...................................................................................................
        // sadd16 r8, r5, r11                // .............*..................................................................................................
        // smlabt r10, r10, r12, r0          // .............*..................................................................................................
        // ssub16 r11, r5, r11               // ..............*.................................................................................................
        // smlabt r14, r14, r12, r0          // ..............*.................................................................................................
        // pkhtb r9, r10, r9, asr #16        // ...............*................................................................................................
        // smlabt r10, r2, r12, r0           // ...............*................................................................................................
        // uadd16 r2, r7, r9                 // ................*...............................................................................................
        // vmov r5, s12                      // ................*...............................................................................................
        // usub16 r9, r7, r9                 // .................*..............................................................................................
        // smulwb r7, r5, r2                 // .................*..............................................................................................
        // pkhtb r10, r10, r14, asr #16      // ..................*.............................................................................................
        // smulwt r5, r5, r2                 // ..................*.............................................................................................
        // uadd16 r14, r3, r10               // .......................*........................................................................................
        // smlabt r7, r7, r12, r0            // ...................*............................................................................................
        // sadd16 r2, r8, r6                 // ...................*............................................................................................
        // smlabt r5, r5, r12, r0            // ....................*...........................................................................................
        // ssub16 r6, r8, r6                 // ....................*...........................................................................................
        // pkhtb r7, r5, r7, asr #16         // ......................*.........................................................................................
        // vmov r8, s13                      // .........................*......................................................................................
        // usub16 r10, r3, r10               // .....................*..........................................................................................
        // smulwb r5, r8, r4                 // ..........................*.....................................................................................
        // uadd16 r3, r14, r7                // ..........................*.....................................................................................
        // smulwt r4, r8, r4                 // ...........................*....................................................................................
        // usub16 r7, r14, r7                // ........................*.......................................................................................
        // smlabt r8, r5, r12, r0            // ............................*...................................................................................
        // vmov r5, s14                      // .....................*..........................................................................................
        // smlabt r4, r4, r12, r0            // ..............................*.................................................................................
        // smulwb r14, r5, r9                // ......................*.........................................................................................
        // pkhtb r4, r4, r8, asr #16         // ................................*...............................................................................
        // smulwt r5, r5, r9                 // .......................*........................................................................................
        // ssub16 r8, r11, r4                // ...................................*............................................................................
        // smlabt r14, r14, r12, r0          // ........................*.......................................................................................
        // vmov r9, s16                      // ............................*...................................................................................
        // smlabt r5, r5, r12, r0            // .........................*......................................................................................
        // sadd16 r4, r11, r4                // .................................*..............................................................................
        // smulwb r11, r9, r3                // ...............................*................................................................................
        // pkhtb r5, r5, r14, asr #16        // ...........................*....................................................................................
        // smulwt r14, r9, r3                // ................................*...............................................................................
        // usub16 r9, r10, r5                // .............................*..................................................................................
        // vmov r3, s18                      // ...........................................*....................................................................
        // smlabt r14, r14, r12, r0          // ..................................*.............................................................................
        // uadd16 r5, r10, r5                // ...............................*................................................................................
        // smlabt r11, r11, r12, r0          // .................................*..............................................................................
        // smulwt r10, r3, r5                // ....................................................*...........................................................
        // smulwb r5, r3, r5                 // ...................................................*............................................................
        // pkhtb r3, r14, r11, asr #16       // .....................................*..........................................................................
        // smlabt r14, r10, r12, r0          // .......................................................*........................................................
        // vmov r10, s19                     // ....................................*...........................................................................
        // smlabt r5, r5, r12, r0            // ......................................................*.........................................................
        // smulwb r11, r10, r6               // .....................................*..........................................................................
        // smulwt r6, r10, r6                // ......................................*.........................................................................
        // vmov r10, s17                     // ..................................*.............................................................................
        // smlabt r11, r11, r12, r0          // ........................................*.......................................................................
        // smlabt r6, r6, r12, r0            // .........................................*......................................................................
        // pkhtb r5, r14, r5, asr #16        // .........................................................*......................................................
        // smulwb r14, r10, r4               // ...................................*............................................................................
        // smulwt r4, r10, r4                // ....................................*...........................................................................
        // vmov r10, s20                     // ......................................*.........................................................................
        // smlabt r14, r14, r12, r0          // ...........................................*....................................................................
        // smlabt r4, r4, r12, r0            // ............................................*...................................................................
        // pkhtb r6, r6, r11, asr #16        // ...................................................*............................................................
        // pkhtb r11, r4, r14, asr #16       // ..............................................*.................................................................
        // smulwb r14, r10, r7               // .......................................*........................................................................
        // vmov s0, r2                       // .............................*..................................................................................
        // smulwt r2, r10, r7                // ..........................................*.....................................................................
        // vmov s4, r6                       // ....................................................*...........................................................
        // smlabt r6, r14, r12, r0           // .............................................*..................................................................
        // vmov r14, s21                     // ........................................................*.......................................................
        // smlabt r2, r2, r12, r0            // ...............................................*................................................................
        // vmov s1, r3                       // ............................................*...................................................................
        // smulwb r4, r14, r8                // ..........................................................*.....................................................
        // vmov s3, r5                       // ..........................................................*.....................................................
        // smulwt r5, r14, r8                // .........................................................*......................................................
        // vmov r14, s22                     // .............................................*..................................................................
        // smlabt r4, r4, r12, r0            // ............................................................*...................................................
        // vmov s2, r11                      // ...............................................*................................................................
        // smulwb r11, r14, r9               // ..............................................*.................................................................
        // pkhtb r6, r2, r6, asr #16         // .................................................*..............................................................
        // smulwt r14, r14, r9               // ................................................*...............................................................
        // vmov s5, r6                       // .....................................................*..........................................................
        // smlabt r5, r5, r12, r0            // .............................................................*..................................................
        // smlabt r6, r11, r12, r0           // .................................................*..............................................................
        // pkhtb r2, r5, r4, asr #16         // ...............................................................*................................................
        // vmov r4, s23                      // ................................................*...............................................................
        // ldr.w r9, [r4, #0]                // ..................................................*.............................................................
        // ldr.w r8, [r4, #4]                // ..................................................*.............................................................
        // sadd16 r10, r9, r8                // ........................................................*.......................................................
        // ldr.w r11, [r4, #12]              // .....................................................*..........................................................
        // ssub16 r3, r9, r8                 // .......................................................*........................................................
        // ldr.w r7, [r4, #8]                // ...........................................................*....................................................
        // ssub16 r5, r7, r11                // ............................................................*...................................................
        // smlabt r14, r14, r12, r0          // ...........................................................*....................................................
        // sadd16 r11, r7, r11               // ..............................................................*.................................................
        // ldr.w r0, [r4, #24]               // ...............................................................*................................................
        // pkhtb r8, r14, r6, asr #16        // .............................................................*..................................................
        // ldr.w r6, [r4, #28]               // ..............................................................*.................................................
        // ssub16 r9, r0, r6                 // ................................................................*...............................................
        // ldr.w r7, [r4, #20]               // ................................................................*...............................................
        // sadd16 r0, r0, r6                 // .................................................................*..............................................
        // ldr.w r14, [r4, #16]              // .................................................................*..............................................
        // sadd16 r4, r14, r7                // ..................................................................*.............................................
        // vmov s6, r2                       // ..................................................................*.............................................
        // sadd16 r6, r4, r0                 // ........................................................................*.......................................
        // vmov s7, r8                       // ....................................................................*...........................................
        // ssub16 r14, r14, r7               // ...................................................................*............................................
        // vmov r2, s10                      // ...................................................................*............................................
        // ssub16 r4, r4, r0                 // .........................................................................*......................................
        // smulwb r7, r2, r9                 // .....................................................................*..........................................
        // sadd16 r8, r10, r11               // ......................................................................*.........................................
        // smulwt r9, r2, r9                 // ....................................................................*...........................................
        // ssub16 r11, r10, r11              // .....................................................................*..........................................
        // smulwb r10, r2, r5                // .......................................................................*........................................
        // movw r0, #24608                   // .......................................................................*........................................
        // smulwt r5, r2, r5                 // ......................................................................*.........................................
        // sadd16 r2, r8, r6                 // ................................................................................*...............................
        // smlabt r7, r7, r12, r0            // ........................................................................*.......................................
        // ssub16 r6, r8, r6                 // ...............................................................................*................................
        // smlabt r9, r9, r12, r0            // .........................................................................*......................................
        // vmov r8, s12                      // ............................................................................*...................................
        // smlabt r10, r10, r12, r0          // ...........................................................................*....................................
        // pkhtb r9, r9, r7, asr #16         // ...........................................................................*....................................
        // smlabt r7, r5, r12, r0            // ..........................................................................*.....................................
        // uadd16 r5, r14, r9                // ............................................................................*...................................
        // pkhtb r10, r7, r10, asr #16       // ..............................................................................*.................................
        // smulwt r7, r8, r5                 // .............................................................................*..................................
        // usub16 r9, r14, r9                // .............................................................................*..................................
        // uadd16 r14, r3, r10               // .................................................................................*..............................
        // smulwb r5, r8, r5                 // ..............................................................................*.................................
        // usub16 r10, r3, r10               // ..................................................................................*.............................
        // smlabt r3, r7, r12, r0            // ...............................................................................*................................
        // vmov r8, s13                      // .................................................................................*..............................
        // smlabt r7, r5, r12, r0            // ................................................................................*...............................
        // smulwb r5, r8, r4                 // ..................................................................................*.............................
        // smulwt r4, r8, r4                 // ...................................................................................*............................
        // pkhtb r7, r3, r7, asr #16         // ...................................................................................*............................
        // smlabt r8, r5, r12, r0            // ....................................................................................*...........................
        // uadd16 r3, r14, r7                // ....................................................................................*...........................
        // smlabt r4, r4, r12, r0            // .....................................................................................*..........................
        // usub16 r7, r14, r7                // ......................................................................................*.........................
        // vmov r5, s14                      // .....................................................................................*..........................
        // pkhtb r8, r4, r8, asr #16         // .......................................................................................*........................
        // smulwb r14, r5, r9                // ......................................................................................*.........................
        // sadd16 r4, r11, r8                // .........................................................................................*......................
        // smulwt r5, r5, r9                 // .......................................................................................*........................
        // ssub16 r8, r11, r8                // ........................................................................................*.......................
        // smlabt r9, r14, r12, r0           // ........................................................................................*.......................
        // vmov r11, s1                      // .........................................................................................*......................
        // smlabt r0, r5, r12, r0            // ..........................................................................................*.....................
        // pkhtb r14, r0, r9, asr #16        // ..............................................................................................*.................
        // vmov r0, s23                      // ...........................................................................................*....................
        // usub16 r5, r3, r11                // ..........................................................................................*.....................
        // str.w r5, [r0, #36]               // ...........................................................................................*....................
        // vmov r5, s3                       // ..........................................................................................................*.....
        // uadd16 r9, r3, r11                // ............................................................................................*...................
        // vmov r3, s7                       // ...............................................................................................*................
        // uadd16 r11, r10, r14              // .................................................................................................*..............
        // str.w r9, [r0, #4]                // .............................................................................................*..................
        // uadd16 r9, r11, r5                // ............................................................................................................*...
        // str.w r9, [r0, #12]               // .............................................................................................................*..
        // usub16 r9, r11, r5                // ...........................................................................................................*....
        // vmov r5, s5                       // ....................................................................................................*...........
        // usub16 r11, r7, r5                // .....................................................................................................*..........
        // str.w r9, [r0, #44]               // ...........................................................................................................*....
        // uadd16 r9, r7, r5                 // ......................................................................................................*.........
        // vmov r5, s2                       // ............................................................................................*...................
        // uadd16 r7, r4, r5                 // .............................................................................................*..................
        // str.w r11, [r0, #52]              // .........................................................................................................*......
        // usub16 r11, r4, r5                // .......................................................................................................*........
        // str.w r9, [r0, #20]               // ......................................................................................................*.........
        // usub16 r9, r10, r14               // ...............................................................................................*................
        // str.w r7, [r0, #8]                // ..............................................................................................*.................
        // uadd16 r5, r9, r3                 // ....................................................................................................*...........
        // str.w r5, [r0, #28]               // ............................................................................................................*...
        // usub16 r5, r9, r3                 // ................................................................................................*...............
        // str.w r11, [r0, #40]              // .......................................................................................................*........
        // str.w r5, [r0, #60]               // ................................................................................................*...............
        // vmov r5, s4                       // .................................................................................................*..............
        // uadd16 r9, r6, r5                 // ..................................................................................................*.............
        // str.w r9, [r0, #16]               // ..................................................................................................*.............
        // usub16 r5, r6, r5                 // ...................................................................................................*............
        // vmov r9, s6                       // ...................................................................................................*............
        // str.w r5, [r0, #48]               // .....................................................................................................*..........
        // vmov r5, s0                       // .............................................................................................................*..
        // uadd16 r3, r8, r9                 // ........................................................................................................*.......
        // str.w r3, [r0, #24]               // ........................................................................................................*.......
        // usub16 r11, r8, r9                // .........................................................................................................*......
        // str.w r11, [r0, #56]              // ..........................................................................................................*.....
        // usub16 r9, r2, r5                 // ..............................................................................................................*.
        // str.w r9, [r0, #32]               // ..............................................................................................................*.
        // uadd16 r5, r2, r5                 // ...............................................................................................................*
        // str.w r5, [r0], #64               // ...............................................................................................................*

        vmov tmp, s8
        cmp poly, tmp
        bne layer1234_loop

 sub.w poly, #8*strincr

 ### LAYER 3+2+1

 .equ distance2, distance*16
 .equ strincr2, 4

 // ITER 0
        layer567_first_start:
                                           // Instructions:    127
                                           // Expected cycles: 75
                                           // Expected IPC:    1.69
                                           //
                                           // ---------------------------- cycle (expected) ---------------------------->
                                           // 0                        25                       50
                                           // |------------------------|------------------------|
        vldr s5, [r1, #20]                 // *..........................................................................
        ldr.w r7, [r0, #0]                 // *..........................................................................
        vldr s4, [r1, #16]                 // .*.........................................................................
        ldr.w r11, [r0, #64]               // .*.........................................................................
        sadd16 r14, r7, r11                // ..*........................................................................
        ldr.w r2, [r0, #128]               // ..*........................................................................
        ssub16 r3, r7, r11                 // ...*.......................................................................
        ldr.w r7, [r0, #448]               // ...*.......................................................................
        vldr s0, [r1, #4]                  // ....*......................................................................
        vmov r6, s0                        // .....*.....................................................................
        ldr.w r5, [r0, #192]               // .....*.....................................................................
        sadd16 r11, r2, r5                 // ......*....................................................................
        ldr.w r9, [r0, #384]               // ......*....................................................................
        sadd16 r4, r9, r7                  // .......*...................................................................
        vmov s6, r0                        // .......*...................................................................
        ssub16 r7, r9, r7                  // ........*..................................................................
        ldr.w r9, [r0, #320]               // ........*..................................................................
        sadd16 r8, r14, r11                // .........*.................................................................
        ldr.w r10, [r0, #256]              // .........*.................................................................
        sadd16 r0, r10, r9                 // ..........*................................................................
        vldr s9, [r1, #12]                 // ..........*................................................................
        ssub16 r5, r2, r5                  // ...........*...............................................................
        smulwb r2, r6, r7                  // ...........*...............................................................
        ssub16 r10, r10, r9                // ............*..............................................................
        smulwb r9, r6, r5                  // ............*..............................................................
        ssub16 r11, r14, r11               // .............*.............................................................
        smulwt r5, r6, r5                  // .............*.............................................................
        ssub16 r14, r0, r4                 // ..............*............................................................
        smulwt r7, r6, r7                  // ..............*............................................................
        sadd16 r6, r0, r4                  // ...............*...........................................................
        vldr s2, [r1, #8]                  // ...............*...........................................................
        movw r0, #24608                    // ................*..........................................................
        vldr s0, [r1, #0]                  // ................*..........................................................
        smlabt r4, r2, r12, r0             // .................*.........................................................
        sadd16 r2, r8, r6                  // ..................*........................................................
        smlabt r7, r7, r12, r0             // ..................*........................................................
        ssub16 r6, r8, r6                  // ...................*.......................................................
        smlabt r8, r9, r12, r0             // ...................*.......................................................
        pkhtb r9, r7, r4, asr #16          // ....................*......................................................
        smlabt r4, r5, r12, r0             // ....................*......................................................
        uadd16 r5, r10, r9                 // .....................*.....................................................
        vmov r7, s9                        // .....................*.....................................................
        pkhtb r4, r4, r8, asr #16          // ......................*....................................................
        smulwb r8, r7, r5                  // ......................*....................................................
        usub16 r10, r10, r9                // .......................*...................................................
        add r1, r1, #24                    // .......................*...................................................
        smulwt r7, r7, r5                  // ........................*..................................................
        usub16 r9, r3, r4                  // .........................*.................................................
        smlabt r5, r8, r12, r0             // .........................*.................................................
        vmov r8, s4                        // ..........................*................................................
        smlabt r7, r7, r12, r0             // ..........................*................................................
        uadd16 r3, r3, r4                  // ...........................*...............................................
        smulwb r4, r8, r14                 // ...........................*...............................................
        pkhtb r5, r7, r5, asr #16          // ............................*..............................................
        smulwt r14, r8, r14                // ............................*..............................................
        vmov r8, s5                        // .............................*.............................................
        smlabt r4, r4, r12, r0             // .............................*.............................................
        usub16 r7, r3, r5                  // ..............................*............................................
        smlabt r14, r14, r12, r0           // ..............................*............................................
        uadd16 r3, r3, r5                  // ...............................*...........................................
        smulwb r5, r8, r10                 // ...............................*...........................................
        pkhtb r4, r14, r4, asr #16         // ................................*..........................................
        smulwt r14, r8, r10                // ................................*..........................................
        ldr r10, [r1, #4]                  // .................................*.........................................
        smlabt r5, r5, r12, r0             // .................................*.........................................
        ssub16 r8, r11, r4                 // ..................................*........................................
        smlabt r14, r14, r12, r0           // ..................................*........................................
        sadd16 r11, r11, r4                // ...................................*.......................................
        smulwb r4, r10, r3                 // ...................................*.......................................
        pkhtb r5, r14, r5, asr #16         // ....................................*......................................
        smulwt r3, r10, r3                 // ....................................*......................................
        ldr r10, [r1], #8                  // .....................................*.....................................
        smlabt r14, r4, r12, r0            // .....................................*.....................................
        uadd16 r4, r9, r5                  // ......................................*....................................
        smlabt r3, r3, r12, r0             // ......................................*....................................
        usub16 r9, r9, r5                  // .......................................*...................................
        smulwb r5, r10, r2                 // .......................................*...................................
        pkhtb r3, r3, r14, asr #16         // ........................................*..................................
        smulwt r10, r10, r2                // ........................................*..................................
        ldr r14, [r1, #4]                  // .........................................*.................................
        smlabt r2, r5, r12, r0             // .........................................*.................................
        smlabt r10, r10, r12, r0           // ..........................................*................................
        smulwb r5, r14, r4                 // ...........................................*...............................
        pkhtb r2, r10, r2, asr #16         // ............................................*..............................
        smulwt r10, r14, r4                // ............................................*..............................
        ldr r4, [r1], #8                   // .............................................*.............................
        smlabt r14, r5, r12, r0            // .............................................*.............................
        smlabt r5, r10, r12, r0            // ..............................................*............................
        smulwb r10, r4, r11                // ...............................................*...........................
        pkhtb r14, r5, r14, asr #16        // ................................................*..........................
        smulwt r4, r4, r11                 // ................................................*..........................
        ldr r11, [r1, #4]                  // .................................................*.........................
        smlabt r10, r10, r12, r0           // .................................................*.........................
        smlabt r4, r4, r12, r0             // ..................................................*........................
        smulwb r5, r11, r7                 // ...................................................*.......................
        pkhtb r10, r4, r10, asr #16        // ....................................................*......................
        smulwt r11, r11, r7                // ....................................................*......................
        ldr r7, [r1], #8                   // .....................................................*.....................
        smlabt r5, r5, r12, r0             // .....................................................*.....................
        smlabt r4, r11, r12, r0            // ......................................................*....................
        smulwt r11, r7, r6                 // .......................................................*...................
        pkhtb r5, r4, r5, asr #16          // ........................................................*..................
        smulwb r7, r7, r6                  // ........................................................*..................
        ldr r4, [r1, #4]                   // .........................................................*.................
        smlabt r6, r11, r12, r0            // .........................................................*.................
        smlabt r11, r7, r12, r0            // ..........................................................*................
        smulwt r7, r4, r9                  // ...........................................................*...............
        smulwb r9, r4, r9                  // ............................................................*..............
        ldr r4, [r1], #8                   // .............................................................*.............
        smlabt r7, r7, r12, r0             // .............................................................*.............
        pkhtb r6, r6, r11, asr #16         // ..............................................................*............
        smlabt r9, r9, r12, r0             // ..............................................................*............
        smulwb r11, r4, r8                 // ...............................................................*...........
        smulwt r4, r4, r8                  // ................................................................*..........
        smlabt r11, r11, r12, r0           // .................................................................*.........
        smlabt r8, r4, r12, r0             // ..................................................................*........
        vmov r0, s6                        // ...................................................................*.......
        str.w r14, [r0, #192]              // ...................................................................*.......
        pkhtb r8, r8, r11, asr #16         // ....................................................................*......
        str.w r10, [r0, #128]              // ....................................................................*......
        str.w r5, [r0, #320]               // .....................................................................*.....
        str.w r8, [r0, #384]               // ......................................................................*....
        pkhtb r8, r7, r9, asr #16          // .......................................................................*...
        str.w r8, [r0, #448]               // .......................................................................*...
        str.w r6, [r0, #256]               // ........................................................................*..
        str.w r3, [r0, #64]                // .........................................................................*.
        str.w r2, [r0], #4                 // ..........................................................................*

                                            // ---------------------------- cycle (expected) ---------------------------->
                                            // 0                        25                       50
                                            // |------------------------|------------------------|------------------------
        // vmov s6, r0                      // .......*...................................................................
        // ldr.w r2, [r0, #0]               // *..........................................................................
        // ldr.w r3, [r0, #64]              // .*.........................................................................
        // ldr.w r4, [r0, #128]             // ..*........................................................................
        // ldr.w r5, [r0, #192]             // .....*.....................................................................
        // ldr.w r6, [r0, #256]             // .........*.................................................................
        // ldr.w r7, [r0, #320]             // ........*..................................................................
        // ldr.w r8, [r0, #384]             // ......*....................................................................
        // ldr.w r9, [r0, #448]             // ...*.......................................................................
        // vldr s0, [r1, #0]                // ................*..........................................................
        // vldr s1, [r1, #4]                // ....*......................................................................
        // vldr s2, [r1, #8]                // ...............*...........................................................
        // vldr s3, [r1, #12]               // ..........*................................................................
        // vldr s4, [r1, #16]               // .*.........................................................................
        // vldr s5, [r1, #20]               // *..........................................................................
        // add r1, r1, #24                  // .......................*...................................................
        // movw r0, #24608                  // ................*..........................................................
        // sadd16 r14, r2, r3               // ..*........................................................................
        // ssub16 r3, r2, r3                // ...*.......................................................................
        // sadd16 r11, r4, r5               // ......*....................................................................
        // ssub16 r5, r4, r5                // ...........*...............................................................
        // sadd16 r2, r6, r7                // ..........*................................................................
        // ssub16 r7, r6, r7                // ............*..............................................................
        // sadd16 r4, r8, r9                // .......*...................................................................
        // ssub16 r9, r8, r9                // ........*..................................................................
        // sadd16 r8, r14, r11              // .........*.................................................................
        // ssub16 r11, r14, r11             // .............*.............................................................
        // sadd16 r6, r2, r4                // ...............*...........................................................
        // ssub16 r4, r2, r4                // ..............*............................................................
        // vmov r10, s1                     // .....*.....................................................................
        // smulwb r14, r10, r5              // ............*..............................................................
        // smulwt r5, r10, r5               // .............*.............................................................
        // smlabt r14, r14, r12, r0         // ...................*.......................................................
        // smlabt r5, r5, r12, r0           // ....................*......................................................
        // pkhtb r14, r5, r14, asr #16      // ......................*....................................................
        // usub16 r5, r3, r14               // .........................*.................................................
        // uadd16 r3, r3, r14               // ...........................*...............................................
        // smulwb r14, r10, r9              // ...........*...............................................................
        // smulwt r9, r10, r9               // ..............*............................................................
        // smlabt r14, r14, r12, r0         // .................*.........................................................
        // smlabt r9, r9, r12, r0           // ..................*........................................................
        // pkhtb r14, r9, r14, asr #16      // ....................*......................................................
        // usub16 r9, r7, r14               // .......................*...................................................
        // uadd16 r7, r7, r14               // .....................*.....................................................
        // sadd16 r2, r8, r6                // ..................*........................................................
        // ssub16 r6, r8, r6                // ...................*.......................................................
        // vmov r10, s3                     // .....................*.....................................................
        // smulwb r14, r10, r7              // ......................*....................................................
        // smulwt r7, r10, r7               // ........................*..................................................
        // smlabt r14, r14, r12, r0         // .........................*.................................................
        // smlabt r7, r7, r12, r0           // ..........................*................................................
        // pkhtb r14, r7, r14, asr #16      // ............................*..............................................
        // usub16 r7, r3, r14               // ..............................*............................................
        // uadd16 r3, r3, r14               // ...............................*...........................................
        // vmov r10, s4                     // ..........................*................................................
        // smulwb r14, r10, r4              // ...........................*...............................................
        // smulwt r4, r10, r4               // ............................*..............................................
        // smlabt r14, r14, r12, r0         // .............................*.............................................
        // smlabt r4, r4, r12, r0           // ..............................*............................................
        // pkhtb r14, r4, r14, asr #16      // ................................*..........................................
        // ssub16 r8, r11, r14              // ..................................*........................................
        // sadd16 r4, r11, r14              // ...................................*.......................................
        // vmov r10, s5                     // .............................*.............................................
        // smulwb r14, r10, r9              // ...............................*...........................................
        // smulwt r9, r10, r9               // ................................*..........................................
        // smlabt r14, r14, r12, r0         // .................................*.........................................
        // smlabt r9, r9, r12, r0           // ..................................*........................................
        // pkhtb r14, r9, r14, asr #16      // ....................................*......................................
        // usub16 r9, r5, r14               // .......................................*...................................
        // uadd16 r5, r5, r14               // ......................................*....................................
        // ldr r11, [r1, #4]                // .................................*.........................................
        // ldr r10, [r1], #8                // .....................................*.....................................
        // smulwb r14, r10, r2              // .......................................*...................................
        // smulwt r2, r10, r2               // ........................................*..................................
        // smlabt r14, r14, r12, r0         // .........................................*.................................
        // smlabt r2, r2, r12, r0           // ..........................................*................................
        // pkhtb r2, r2, r14, asr #16       // ............................................*..............................
        // smulwb r14, r11, r3              // ...................................*.......................................
        // smulwt r3, r11, r3               // ....................................*......................................
        // smlabt r14, r14, r12, r0         // .....................................*.....................................
        // smlabt r3, r3, r12, r0           // ......................................*....................................
        // pkhtb r3, r3, r14, asr #16       // ........................................*..................................
        // ldr r11, [r1, #4]                // .........................................*.................................
        // ldr r10, [r1], #8                // .............................................*.............................
        // smulwb r14, r10, r4              // ...............................................*...........................
        // smulwt r4, r10, r4               // ................................................*..........................
        // smlabt r14, r14, r12, r0         // .................................................*.........................
        // smlabt r4, r4, r12, r0           // ..................................................*........................
        // pkhtb r4, r4, r14, asr #16       // ....................................................*......................
        // smulwb r14, r11, r5              // ...........................................*...............................
        // smulwt r5, r11, r5               // ............................................*..............................
        // smlabt r14, r14, r12, r0         // .............................................*.............................
        // smlabt r5, r5, r12, r0           // ..............................................*............................
        // pkhtb r5, r5, r14, asr #16       // ................................................*..........................
        // ldr r11, [r1, #4]                // .................................................*.........................
        // ldr r10, [r1], #8                // .....................................................*.....................
        // smulwb r14, r10, r6              // ........................................................*..................
        // smulwt r6, r10, r6               // .......................................................*...................
        // smlabt r14, r14, r12, r0         // ..........................................................*................
        // smlabt r6, r6, r12, r0           // .........................................................*.................
        // pkhtb r6, r6, r14, asr #16       // ..............................................................*............
        // smulwb r14, r11, r7              // ...................................................*.......................
        // smulwt r7, r11, r7               // ....................................................*......................
        // smlabt r14, r14, r12, r0         // .....................................................*.....................
        // smlabt r7, r7, r12, r0           // ......................................................*....................
        // pkhtb r7, r7, r14, asr #16       // ........................................................*..................
        // ldr r11, [r1, #4]                // .........................................................*.................
        // ldr r10, [r1], #8                // .............................................................*.............
        // smulwb r14, r10, r8              // ...............................................................*...........
        // smulwt r8, r10, r8               // ................................................................*..........
        // smlabt r14, r14, r12, r0         // .................................................................*.........
        // smlabt r8, r8, r12, r0           // ..................................................................*........
        // pkhtb r8, r8, r14, asr #16       // ....................................................................*......
        // smulwb r14, r11, r9              // ............................................................*..............
        // smulwt r9, r11, r9               // ...........................................................*...............
        // smlabt r14, r14, r12, r0         // ..............................................................*............
        // smlabt r9, r9, r12, r0           // .............................................................*.............
        // pkhtb r9, r9, r14, asr #16       // .......................................................................*...
        // vmov r0, s6                      // ...................................................................*.......
        // str.w r6, [r0, #256]             // ........................................................................*..
        // str.w r7, [r0, #320]             // .....................................................................*.....
        // str.w r8, [r0, #384]             // ......................................................................*....
        // str.w r9, [r0, #448]             // .......................................................................*...
        // str.w r3, [r0, #64]              // .........................................................................*.
        // str.w r4, [r0, #128]             // ....................................................................*......
        // str.w r5, [r0, #192]             // ...................................................................*.......
        // str.w r2, [r0], #4               // ..........................................................................*

        layer567_first_end:



 // ITER 1-15
 add.w tmp, poly, #strincr2*3*(5)
 vmov s14, tmp
layer567_loop:
                                            // Instructions:    158
                                            // Expected cycles: 93
                                            // Expected IPC:    1.70
                                            //
                                            // ------------------------------------- cycle (expected) ------------------------------------->
                                            // 0                        25                       50                       75
                                            // |------------------------|------------------------|------------------------|-----------------
        vmov s6, r0                         // *............................................................................................
        ldr.w r9, [r0, #128]                // *............................................................................................
        ldr.w r2, [r1], #4                  // .*...........................................................................................
        ldr.w r4, [r0, #320]                // .*...........................................................................................
        ldr.w r6, [r0, #64]                 // ..*..........................................................................................
        ldr.w r8, [r0, #192]                // ...*.........................................................................................
        smulwb r5, r2, r4                   // ...*.........................................................................................
        ldr.w r7, [r0, #384]                // ....*........................................................................................
        smulwt r4, r2, r4                   // ....*........................................................................................
        ldr.w r10, [r0, #448]               // .....*.......................................................................................
        smulwb r14, r2, r8                  // .....*.......................................................................................
        ldr.w r3, [r0, #0]                  // ......*......................................................................................
        ldr.w r11, [r0, #256]               // .......*.....................................................................................
        smulwt r8, r2, r8                   // .......*.....................................................................................
        movw r0, #24608                     // ........*....................................................................................
        smlabt r14, r14, r12, r0            // ........*....................................................................................
        smlabt r8, r8, r12, r0              // .........*...................................................................................
        smlabt r5, r5, r12, r0              // ..........*..................................................................................
        pkhtb r14, r8, r14, asr #16         // ...........*.................................................................................
        smlabt r8, r4, r12, r0              // ...........*.................................................................................
        smulwb r4, r2, r10                  // ............*................................................................................
        pkhtb r8, r8, r5, asr #16           // .............*...............................................................................
        smulwt r10, r2, r10                 // .............*...............................................................................
        smlabt r4, r4, r12, r0              // ..............*..............................................................................
        uadd16 r5, r9, r14                  // ...............*.............................................................................
        smlabt r10, r10, r12, r0            // ...............*.............................................................................
        usub16 r14, r9, r14                 // ................*............................................................................
        smulwb r9, r2, r6                   // ................*............................................................................
        pkhtb r4, r10, r4, asr #16          // .................*...........................................................................
        smulwt r10, r2, r6                  // .................*...........................................................................
        usub16 r6, r7, r4                   // ..................*..........................................................................
        smlabt r9, r9, r12, r0              // ..................*..........................................................................
        ldr r2, [r1, #4]                    // ...................*.........................................................................
        smlabt r10, r10, r12, r0            // ...................*.........................................................................
        uadd16 r7, r7, r4                   // ....................*........................................................................
        pkhtb r10, r10, r9, asr #16         // .....................*.......................................................................
        smulwb r9, r2, r6                   // .....................*.......................................................................
        uadd16 r4, r3, r10                  // ......................*......................................................................
        smulwt r6, r2, r6                   // ......................*......................................................................
        usub16 r10, r3, r10                 // .......................*.....................................................................
        smlabt r3, r9, r12, r0              // .......................*.....................................................................
        usub16 r9, r11, r8                  // ........................*....................................................................
        smlabt r6, r6, r12, r0              // ........................*....................................................................
        uadd16 r8, r11, r8                  // .........................*...................................................................
        smulwb r11, r2, r14                 // .........................*...................................................................
        pkhtb r6, r6, r3, asr #16           // ..........................*..................................................................
        smulwt r14, r2, r14                 // ..........................*..................................................................
        ldr r2, [r1], #8                    // ...........................*.................................................................
        smlabt r11, r11, r12, r0            // ...........................*.................................................................
        uadd16 r3, r9, r6                   // ............................*................................................................
        smlabt r14, r14, r12, r0            // ............................*................................................................
        usub16 r9, r9, r6                   // .............................*...............................................................
        smulwb r6, r2, r5                   // .............................*...............................................................
        pkhtb r11, r14, r11, asr #16        // ..............................*..............................................................
        smulwt r14, r2, r5                  // ..............................*..............................................................
        usub16 r5, r10, r11                 // ...............................*.............................................................
        smlabt r6, r6, r12, r0              // ...............................*.............................................................
        uadd16 r11, r10, r11                // ................................*............................................................
        smlabt r14, r14, r12, r0            // ................................*............................................................
        smulwb r10, r2, r7                  // .................................*...........................................................
        pkhtb r14, r14, r6, asr #16         // ..................................*..........................................................
        smulwt r6, r2, r7                   // ..................................*..........................................................
        ldr r7, [r1, #4]                    // ...................................*.........................................................
        smlabt r2, r10, r12, r0             // ...................................*.........................................................
        usub16 r10, r4, r14                 // ....................................*........................................................
        smlabt r6, r6, r12, r0              // ....................................*........................................................
        uadd16 r4, r4, r14                  // .....................................*.......................................................
        smulwb r14, r7, r3                  // .....................................*.......................................................
        pkhtb r6, r6, r2, asr #16           // ......................................*......................................................
        smulwt r2, r7, r3                   // ......................................*......................................................
        ldr r3, [r1], #8                    // .......................................*.....................................................
        smlabt r7, r14, r12, r0             // .......................................*.....................................................
        uadd16 r14, r8, r6                  // ........................................*....................................................
        smlabt r2, r2, r12, r0              // ........................................*....................................................
        usub16 r8, r8, r6                   // .........................................*...................................................
        smulwb r6, r3, r14                  // .........................................*...................................................
        pkhtb r7, r2, r7, asr #16           // ..........................................*..................................................
        smulwt r2, r3, r14                  // ..........................................*..................................................
        ldr r14, [r1, #4]                   // ...........................................*.................................................
        smlabt r6, r6, r12, r0              // ...........................................*.................................................
        uadd16 r3, r11, r7                  // ............................................*................................................
        smlabt r2, r2, r12, r0              // ............................................*................................................
        usub16 r7, r11, r7                  // .............................................*...............................................
        smulwb r11, r14, r9                 // .............................................*...............................................
        pkhtb r6, r2, r6, asr #16           // ..............................................*..............................................
        smulwt r2, r14, r9                  // ..............................................*..............................................
        ldr r14, [r1], #8                   // ...............................................*.............................................
        smlabt r9, r11, r12, r0             // ...............................................*.............................................
        smlabt r11, r2, r12, r0             // ................................................*............................................
        smulwb r2, r14, r8                  // .................................................*...........................................
        pkhtb r9, r11, r9, asr #16          // ..................................................*..........................................
        smulwt r11, r14, r8                 // ..................................................*..........................................
        ldr r8, [r1, #4]                    // ...................................................*.........................................
        smlabt r2, r2, r12, r0              // ...................................................*.........................................
        uadd16 r14, r4, r6                  // ....................................................*........................................
        smlabt r11, r11, r12, r0            // ....................................................*........................................
        usub16 r6, r4, r6                   // .....................................................*.......................................
        smulwb r4, r8, r3                   // .....................................................*.......................................
        pkhtb r11, r11, r2, asr #16         // ......................................................*......................................
        smulwt r3, r8, r3                   // ......................................................*......................................
        ldr r2, [r1], #8                    // .......................................................*.....................................
        smlabt r4, r4, r12, r0              // .......................................................*.....................................
        usub16 r8, r10, r11                 // ........................................................*....................................
        smlabt r3, r3, r12, r0              // ........................................................*....................................
        uadd16 r10, r10, r11                // .........................................................*...................................
        smulwb r11, r2, r14                 // .........................................................*...................................
        pkhtb r3, r3, r4, asr #16           // ..........................................................*..................................
        smulwt r2, r2, r14                  // ..........................................................*..................................
        ldr r4, [r1, #4]                    // ...........................................................*.................................
        smlabt r11, r11, r12, r0            // ...........................................................*.................................
        uadd16 r14, r5, r9                  // ............................................................*................................
        smlabt r2, r2, r12, r0              // ............................................................*................................
        usub16 r5, r5, r9                   // .............................................................*...............................
        smulwt r9, r4, r14                  // .............................................................*...............................
        pkhtb r2, r2, r11, asr #16          // ..............................................................*..............................
        smulwb r14, r4, r14                 // ..............................................................*..............................
        ldr r4, [r1], #8                    // ...............................................................*.............................
        smlabt r9, r9, r12, r0              // ...............................................................*.............................
        smlabt r11, r14, r12, r0            // ................................................................*............................
        smulwt r14, r4, r10                 // .................................................................*...........................
        smulwb r10, r4, r10                 // ..................................................................*..........................
        ldr r4, [r1, #4]                    // ...................................................................*.........................
        smlabt r14, r14, r12, r0            // ...................................................................*.........................
        smlabt r10, r10, r12, r0            // ....................................................................*........................
        pkhtb r11, r9, r11, asr #16         // .....................................................................*.......................
        smulwt r9, r4, r7                   // .....................................................................*.......................
        smulwb r4, r4, r7                   // ......................................................................*......................
        ldr r7, [r1], #8                    // .......................................................................*.....................
        smlabt r9, r9, r12, r0              // .......................................................................*.....................
        pkhtb r10, r14, r10, asr #16        // ........................................................................*....................
        smlabt r4, r4, r12, r0              // ........................................................................*....................
        smulwb r14, r7, r6                  // .........................................................................*...................
        smulwt r7, r7, r6                   // ..........................................................................*..................
        ldr r6, [r1, #4]                    // ...........................................................................*.................
        smlabt r14, r14, r12, r0            // ...........................................................................*.................
        smlabt r7, r7, r12, r0              // ............................................................................*................
        pkhtb r4, r9, r4, asr #16           // .............................................................................*...............
        smulwt r9, r6, r5                   // .............................................................................*...............
        pkhtb r7, r7, r14, asr #16          // ..............................................................................*..............
        smulwb r5, r6, r5                   // ..............................................................................*..............
        ldr r6, [r1], #8                    // ...............................................................................*.............
        smlabt r9, r9, r12, r0              // ...............................................................................*.............
        smlabt r14, r5, r12, r0             // ................................................................................*............
        smulwt r5, r6, r8                   // .................................................................................*...........
        smulwb r8, r6, r8                   // ..................................................................................*..........
        pkhtb r14, r9, r14, asr #16         // ...................................................................................*.........
        smlabt r6, r5, r12, r0              // ...................................................................................*.........
        smlabt r9, r8, r12, r0              // ....................................................................................*........
        vmov r0, s6                         // .....................................................................................*.......
        str.w r14, [r0, #448]               // .....................................................................................*.......
        str.w r10, [r0, #128]               // ......................................................................................*......
        pkhtb r5, r6, r9, asr #16           // .......................................................................................*.....
        str.w r5, [r0, #384]                // .......................................................................................*.....
        str.w r7, [r0, #256]                // ........................................................................................*....
        str.w r11, [r0, #192]               // .........................................................................................*...
        str.w r3, [r0, #64]                 // ..........................................................................................*..
        str.w r4, [r0, #320]                // ...........................................................................................*.
        str.w r2, [r0], #4                  // ............................................................................................* // @slothy:core

                                             // ------------------------------------- cycle (expected) ------------------------------------->
                                             // 0                        25                       50                       75
                                             // |------------------------|------------------------|------------------------|-----------------
        // ldr.w r6, [r1], #4                // .*...........................................................................................
        // ldr.w r5, [r0, #320]              // .*...........................................................................................
        // ldr.w r8, [r0, #448]              // .....*.......................................................................................
        // vmov s6, r0                       // *............................................................................................
        // ldr.w r14, [r0, #128]             // *............................................................................................
        // ldr.w r10, [r0, #64]              // ..*..........................................................................................
        // smulwt r4, r6, r8                 // .............*...............................................................................
        // ldr.w r7, [r0, #256]              // .......*.....................................................................................
        // smulwb r9, r6, r8                 // ............*................................................................................
        // ldr.w r11, [r0, #384]             // ....*........................................................................................
        // smulwt r2, r6, r10                // .................*...........................................................................
        // ldr.w r3, [r0, #0]                // ......*......................................................................................
        // smulwb r10, r6, r10               // ................*............................................................................
        // ldr.w r8, [r0, #192]              // ...*.........................................................................................
        // movw r0, #24608                   // ........*....................................................................................
        // smlabt r9, r9, r12, r0            // ..............*..............................................................................
        // smlabt r4, r4, r12, r0            // ...............*.............................................................................
        // smlabt r10, r10, r12, r0          // ..................*..........................................................................
        // pkhtb r4, r4, r9, asr #16         // .................*...........................................................................
        // smlabt r9, r2, r12, r0            // ...................*.........................................................................
        // smulwb r2, r6, r8                 // .....*.......................................................................................
        // pkhtb r10, r9, r10, asr #16       // .....................*.......................................................................
        // smulwt r8, r6, r8                 // .......*.....................................................................................
        // usub16 r9, r11, r4                // ..................*..........................................................................
        // smlabt r2, r2, r12, r0            // ........*....................................................................................
        // uadd16 r4, r11, r4                // ....................*........................................................................
        // smlabt r8, r8, r12, r0            // .........*...................................................................................
        // smulwb r11, r6, r5                // ...*.........................................................................................
        // pkhtb r8, r8, r2, asr #16         // ...........*.................................................................................
        // smulwt r6, r6, r5                 // ....*........................................................................................
        // uadd16 r5, r14, r8                // ...............*.............................................................................
        // smlabt r2, r11, r12, r0           // ..........*..................................................................................
        // ldr r11, [r1, #4]                 // ...................*.........................................................................
        // smlabt r6, r6, r12, r0            // ...........*.................................................................................
        // usub16 r14, r14, r8               // ................*............................................................................
        // pkhtb r8, r6, r2, asr #16         // .............*...............................................................................
        // smulwb r6, r11, r9                // .....................*.......................................................................
        // usub16 r2, r7, r8                 // ........................*....................................................................
        // smulwt r9, r11, r9                // ......................*......................................................................
        // uadd16 r8, r7, r8                 // .........................*...................................................................
        // smlabt r7, r6, r12, r0            // .......................*.....................................................................
        // usub16 r6, r3, r10                // .......................*.....................................................................
        // smlabt r9, r9, r12, r0            // ........................*....................................................................
        // uadd16 r10, r3, r10               // ......................*......................................................................
        // smulwb r3, r11, r14               // .........................*...................................................................
        // pkhtb r9, r9, r7, asr #16         // ..........................*..................................................................
        // smulwt r11, r11, r14              // ..........................*..................................................................
        // ldr r14, [r1], #8                 // ...........................*.................................................................
        // smlabt r7, r3, r12, r0            // ...........................*.................................................................
        // uadd16 r3, r2, r9                 // ............................*................................................................
        // smlabt r11, r11, r12, r0          // ............................*................................................................
        // usub16 r9, r2, r9                 // .............................*...............................................................
        // smulwb r2, r14, r5                // .............................*...............................................................
        // pkhtb r11, r11, r7, asr #16       // ..............................*..............................................................
        // smulwt r7, r14, r5                // ..............................*..............................................................
        // usub16 r5, r6, r11                // ...............................*.............................................................
        // smlabt r2, r2, r12, r0            // ...............................*.............................................................
        // uadd16 r11, r6, r11               // ................................*............................................................
        // smlabt r6, r7, r12, r0            // ................................*............................................................
        // smulwb r7, r14, r4                // .................................*...........................................................
        // pkhtb r6, r6, r2, asr #16         // ..................................*..........................................................
        // smulwt r2, r14, r4                // ..................................*..........................................................
        // ldr r14, [r1, #4]                 // ...................................*.........................................................
        // smlabt r7, r7, r12, r0            // ...................................*.........................................................
        // uadd16 r4, r10, r6                // .....................................*.......................................................
        // smlabt r2, r2, r12, r0            // ....................................*........................................................
        // usub16 r10, r10, r6               // ....................................*........................................................
        // smulwb r6, r14, r3                // .....................................*.......................................................
        // pkhtb r2, r2, r7, asr #16         // ......................................*......................................................
        // smulwt r3, r14, r3                // ......................................*......................................................
        // ldr r14, [r1], #8                 // .......................................*.....................................................
        // smlabt r7, r6, r12, r0            // .......................................*.....................................................
        // uadd16 r6, r8, r2                 // ........................................*....................................................
        // smlabt r3, r3, r12, r0            // ........................................*....................................................
        // usub16 r2, r8, r2                 // .........................................*...................................................
        // smulwb r8, r14, r6                // .........................................*...................................................
        // pkhtb r7, r3, r7, asr #16         // ..........................................*..................................................
        // smulwt r6, r14, r6                // ..........................................*..................................................
        // ldr r14, [r1, #4]                 // ...........................................*.................................................
        // smlabt r3, r8, r12, r0            // ...........................................*.................................................
        // uadd16 r8, r11, r7                // ............................................*................................................
        // smlabt r6, r6, r12, r0            // ............................................*................................................
        // usub16 r7, r11, r7                // .............................................*...............................................
        // smulwb r11, r14, r9               // .............................................*...............................................
        // pkhtb r6, r6, r3, asr #16         // ..............................................*..............................................
        // smulwt r14, r14, r9               // ..............................................*..............................................
        // ldr r3, [r1], #8                  // ...............................................*.............................................
        // smlabt r9, r11, r12, r0           // ...............................................*.............................................
        // uadd16 r11, r4, r6                // ....................................................*........................................
        // smlabt r14, r14, r12, r0          // ................................................*............................................
        // usub16 r6, r4, r6                 // .....................................................*.......................................
        // smulwb r4, r3, r2                 // .................................................*...........................................
        // pkhtb r9, r14, r9, asr #16        // ..................................................*..........................................
        // smulwt r3, r3, r2                 // ..................................................*..........................................
        // ldr r14, [r1, #4]                 // ...................................................*.........................................
        // smlabt r2, r4, r12, r0            // ...................................................*.........................................
        // uadd16 r4, r5, r9                 // ............................................................*................................
        // smlabt r3, r3, r12, r0            // ....................................................*........................................
        // usub16 r9, r5, r9                 // .............................................................*...............................
        // smulwt r5, r14, r8                // ......................................................*......................................
        // pkhtb r2, r3, r2, asr #16         // ......................................................*......................................
        // smulwb r3, r14, r8                // .....................................................*.......................................
        // ldr r14, [r1], #8                 // .......................................................*.....................................
        // smlabt r5, r5, r12, r0            // ........................................................*....................................
        // usub16 r8, r10, r2                // ........................................................*....................................
        // smlabt r3, r3, r12, r0            // .......................................................*.....................................
        // uadd16 r10, r10, r2               // .........................................................*...................................
        // smulwb r2, r14, r11               // .........................................................*...................................
        // smulwt r11, r14, r11              // ..........................................................*..................................
        // ldr r14, [r1, #4]                 // ...........................................................*.................................
        // smlabt r2, r2, r12, r0            // ...........................................................*.................................
        // pkhtb r3, r5, r3, asr #16         // ..........................................................*..................................
        // smlabt r11, r11, r12, r0          // ............................................................*................................
        // smulwb r5, r14, r4                // ..............................................................*..............................
        // smulwt r4, r14, r4                // .............................................................*...............................
        // ldr r14, [r1], #8                 // ...............................................................*.............................
        // smlabt r5, r5, r12, r0            // ................................................................*............................
        // pkhtb r2, r11, r2, asr #16        // ..............................................................*..............................
        // smlabt r11, r4, r12, r0           // ...............................................................*.............................
        // smulwt r4, r14, r10               // .................................................................*...........................
        // smulwb r14, r14, r10              // ..................................................................*..........................
        // ldr r10, [r1, #4]                 // ...................................................................*.........................
        // smlabt r4, r4, r12, r0            // ...................................................................*.........................
        // pkhtb r5, r11, r5, asr #16        // .....................................................................*.......................
        // smlabt r14, r14, r12, r0          // ....................................................................*........................
        // smulwt r11, r10, r7               // .....................................................................*.......................
        // smulwb r7, r10, r7                // ......................................................................*......................
        // ldr r10, [r1], #8                 // .......................................................................*.....................
        // smlabt r11, r11, r12, r0          // .......................................................................*.....................
        // pkhtb r4, r4, r14, asr #16        // ........................................................................*....................
        // smlabt r7, r7, r12, r0            // ........................................................................*....................
        // smulwb r14, r10, r6               // .........................................................................*...................
        // smulwt r10, r10, r6               // ..........................................................................*..................
        // ldr r6, [r1, #4]                  // ...........................................................................*.................
        // smlabt r14, r14, r12, r0          // ...........................................................................*.................
        // pkhtb r7, r11, r7, asr #16        // .............................................................................*...............
        // smlabt r10, r10, r12, r0          // ............................................................................*................
        // smulwb r11, r6, r9                // ..............................................................................*..............
        // pkhtb r14, r10, r14, asr #16      // ..............................................................................*..............
        // smulwt r6, r6, r9                 // .............................................................................*...............
        // ldr r9, [r1], #8                  // ...............................................................................*.............
        // smlabt r10, r11, r12, r0          // ................................................................................*............
        // smlabt r11, r6, r12, r0           // ...............................................................................*.............
        // smulwt r6, r9, r8                 // .................................................................................*...........
        // smulwb r8, r9, r8                 // ..................................................................................*..........
        // smlabt r9, r6, r12, r0            // ...................................................................................*.........
        // pkhtb r6, r11, r10, asr #16       // ...................................................................................*.........
        // smlabt r11, r8, r12, r0           // ....................................................................................*........
        // vmov r0, s6                       // .....................................................................................*.......
        // str.w r6, [r0, #448]              // .....................................................................................*.......
        // str.w r4, [r0, #128]              // ......................................................................................*......
        // str.w r14, [r0, #256]             // ........................................................................................*....
        // str.w r5, [r0, #192]              // .........................................................................................*...
        // str.w r3, [r0, #64]               // ..........................................................................................*..
        // str.w r7, [r0, #320]              // ...........................................................................................*.
        // pkhtb r11, r9, r11, asr #16       // .......................................................................................*.....
        // str.w r11, [r0, #384]             // .......................................................................................*.....
        // str.w r2, [r0], #4                // ............................................................................................*

        vmov tmp, s14
        cmp poly, tmp
        bne layer567_loop

 vpop.w {s16-s23}
 pop {r4-r11, pc}

.size small_invntt_asm_769_opt_m7, .-small_invntt_asm_769_opt_m7