#define _ZETAS_BASEMUL 0

.macro montmul_x4 vr0, vr1, vr2, vr3,  va0, va1, va2, va3,  vb0, vb1, vb2, vb3,  xq, xqinv, vt0, vt1, vt2, vt3
    vmul.vv  \vr0, \va0, \vb0
    vmul.vv  \vr1, \va1, \vb1
    vmul.vv  \vr2, \va2, \vb2
    vmul.vv  \vr3, \va3, \vb3
    vmul.vx  \vr0, \vr0, \xqinv
    vmul.vx  \vr1, \vr1, \xqinv
    vmul.vx  \vr2, \vr2, \xqinv
    vmul.vx  \vr3, \vr3, \xqinv
    vmulh.vv \vt0, \va0, \vb0
    vmulh.vv \vt1, \va1, \vb1
    vmulh.vv \vt2, \va2, \vb2
    vmulh.vv \vt3, \va3, \vb3
    vmulh.vx \vr0, \vr0, \xq
    vmulh.vx \vr1, \vr1, \xq
    vmulh.vx \vr2, \vr2, \xq
    vmulh.vx \vr3, \vr3, \xq
    vsub.vv  \vr0, \vt0, \vr0
    vsub.vv  \vr1, \vt1, \vr1
    vsub.vv  \vr2, \vt2, \vr2
    vsub.vv  \vr3, \vt3, \vr3
.endm

// void poly_basemul_rvv_vlen128(int16_t *r, const int16_t *a, const int16_t *b, const int16_t *table);
// (a0b0 + b1 * (a1zeta mod q)) mod q + ((a0b1 + a1b0) mod q)x

.macro save_regs
  sd s0,  0*8(sp)
  sd s1,  1*8(sp)
  sd s2,  2*8(sp)
  sd s3,  3*8(sp)
  sd s4,  4*8(sp)
  sd s5,  5*8(sp)
  sd s6,  6*8(sp)
  sd s7,  7*8(sp)
  sd s8,  8*8(sp)
  sd s9,  9*8(sp)
  sd s10, 10*8(sp)
  sd s11, 11*8(sp)
  sd gp,  12*8(sp)
  sd tp,  13*8(sp)
  sd ra,  14*8(sp)
.endm

.macro restore_regs
  ld s0,  0*8(sp)
  ld s1,  1*8(sp)
  ld s2,  2*8(sp)
  ld s3,  3*8(sp)
  ld s4,  4*8(sp)
  ld s5,  5*8(sp)
  ld s6,  6*8(sp)
  ld s7,  7*8(sp)
  ld s8,  8*8(sp)
  ld s9,  9*8(sp)
  ld s10, 10*8(sp)
  ld s11, 11*8(sp)
  ld gp,  12*8(sp)
  ld tp,  13*8(sp)
  ld ra,  14*8(sp)
.endm

.globl poly_basemul_rvv_vlen128_opt_c908
.align 2
poly_basemul_rvv_vlen128_opt_c908:
    addi sp, sp, -8*15
    save_regs
    li a7, 32
    li t3, _ZETAS_BASEMUL*2
    vsetvli a7, a7, e16, m1, tu, mu
    li t0, 3329
    li t1, -3327
    slli t5, a7, 3
    slli a6, a7, 2
    slli a7, a7, 1
    add  a3, a3, t3
    add  t3, a6, a7
    addi t2, a1, 256*2
poly_basemul_rvv_vlen128_loop:
                                                           // Instructions:    168
                                                           // Expected cycles: 142
                                                           // Expected IPC:    1.18
                                                           //
                                                           // Cycle bound:     118.0
                                                           // IPC bound:       1.42
                                                           //
                                                           // Wall time:     101.55s
                                                           // User time:     101.55s
                                                           //
                                                           // ------------------------------------------------------------- cycle (expected) -------------------------------------------------------------->
                                                           // 0                        25                       50                       75                       100                      125
                                                           // |------------------------|------------------------|------------------------|------------------------|------------------------|----------------
        vle16.v v5, (x11)                                  // *.............................................................................................................................................
        add x14, x11, x17                                  // *.............................................................................................................................................
        add x8, x14, x17                                   // .*............................................................................................................................................
        addi x24, x13, 0                                   // .*............................................................................................................................................
        add x27, x8, x17                                   // ..*...........................................................................................................................................
        add x4, x24, x16                                   // ..*...........................................................................................................................................
        add x26, x27, x17                                  // ...*..........................................................................................................................................
        vle16.v v26, (x4)                                  // ...*..........................................................................................................................................
        add x19, x12, x17                                  // ....*.........................................................................................................................................
        add x23, x26, x17                                  // ....*.........................................................................................................................................
        add x9, x19, x17                                   // .....*........................................................................................................................................
        vle16.v v13, (x23)                                 // .....*........................................................................................................................................
        add x31, x10, x28                                  // ......*.......................................................................................................................................
        add x4, x9, x17                                    // ......*.......................................................................................................................................
        vle16.v v12, (x8)                                  // .......*......................................................................................................................................
        add x21, x4, x17                                   // .......*......................................................................................................................................
        vmul.vv v18, v13, v26                              // ........*.....................................................................................................................................
        addi x22, x10, 0                                   // ........*.....................................................................................................................................
        vle16.v v16, (x9)                                  // .........*....................................................................................................................................
        add x15, x10, x30                                  // .........*....................................................................................................................................
        add x20, x10, x17                                  // ..........*...................................................................................................................................
        add x1, x13, x17                                   // ..........*...................................................................................................................................
        vle16.v v30, (x1)                                  // ...........*..................................................................................................................................
        vmulh.vv v25, v13, v26                             // ...........*..................................................................................................................................
        add x25, x10, x16                                  // ............*.................................................................................................................................
        add x18, x20, x30                                  // ............*.................................................................................................................................
        vmul.vv v20, v12, v16                              // .............*................................................................................................................................
        vmul.vx v11, v18, x6                               // .............*................................................................................................................................
        add x8, x25, x30                                   // ..............*...............................................................................................................................
        add x10, x15, x30                                  // ..............*...............................................................................................................................
        vmulh.vv v22, v12, v16                             // ...............*..............................................................................................................................
        vle16.v v10, (x24)                                 // ...............*..............................................................................................................................
        add x9, x21, x17                                   // ................*.............................................................................................................................
        add x15, x22, x30                                  // ................*.............................................................................................................................
        vle16.v v26, (x26)                                 // .................*............................................................................................................................
        vmulh.vx v27, v11, x5                              // .................*............................................................................................................................
        add x24, x1, x16                                   // ..................*...........................................................................................................................
        add x26, x9, x17                                   // ..................*...........................................................................................................................
        vmul.vx v8, v20, x6                                // ...................*..........................................................................................................................
        vle16.v v4, (x21)                                  // ...................*..........................................................................................................................
        add x29, x31, x30                                  // ....................*.........................................................................................................................
        add x23, x23, x17                                  // ....................*.........................................................................................................................
        vle16.v v18, (x9)                                  // .....................*........................................................................................................................
        vsub.vv v31, v25, v27                              // .....................*........................................................................................................................
        add x21, x26, x17                                  // ......................*.......................................................................................................................
        add x9, x23, x17                                   // ......................*.......................................................................................................................
        vmul.vv v11, v26, v4                               // .......................*......................................................................................................................
        vle16.v v21, (x26)                                 // .......................*......................................................................................................................
        add x13, x13, x30                                  // ........................*.....................................................................................................................
        vmulh.vv v14, v26, v4                              // .........................*....................................................................................................................
        vmul.vv v19, v18, v31                              // .........................*....................................................................................................................
        add x11, x9, x17                                   // ..........................*...................................................................................................................
        vmulh.vv v20, v18, v31                             // ...........................*..................................................................................................................
        vmul.vx v24, v11, x6                               // ...........................*..................................................................................................................
        vmul.vx v25, v19, x6                               // .............................*................................................................................................................
        vle16.v v11, (x14)                                 // .............................*................................................................................................................
        vle16.v v15, (x27)                                 // ...............................*..............................................................................................................
        vmulh.vx v7, v24, x5                               // ...............................*..............................................................................................................
        vle16.v v24, (x23)                                 // .................................*............................................................................................................
        vmulh.vx v25, v25, x5                              // .................................*............................................................................................................
        vmul.vv v28, v11, v10                              // ...................................*..........................................................................................................
        vsub.vv v14, v14, v7                               // ...................................*..........................................................................................................
        vmul.vv v1, v24, v21                               // .....................................*........................................................................................................
        vsub.vv v25, v20, v25                              // .....................................*........................................................................................................
        vmul.vx v20, v28, x6                               // .......................................*......................................................................................................
        vmul.vv v17, v15, v30                              // .......................................*......................................................................................................
        vadd.vv v28, v14, v25                              // .........................................*....................................................................................................
        vmulh.vv v27, v11, v10                             // .........................................*....................................................................................................
        vmulh.vx v20, v20, x5                              // ...........................................*..................................................................................................
        vmul.vx v25, v17, x6                               // ...........................................*..................................................................................................
        vmulh.vv v30, v15, v30                             // .............................................*................................................................................................
        vse16.v v28, (x15)                                 // .............................................*................................................................................................
        vsub.vv v19, v27, v20                              // ...............................................*..............................................................................................
        vmul.vx v27, v1, x6                                // ...............................................*..............................................................................................
        vmulh.vx v25, v25, x5                              // .................................................*............................................................................................
        vle16.v v2, (x24)                                  // .................................................*............................................................................................
        vmulh.vx v9, v27, x5                               // ...................................................*..........................................................................................
        vle16.v v14, (x9)                                  // ...................................................*..........................................................................................
        vsub.vv v10, v30, v25                              // .....................................................*........................................................................................
        vle16.v v20, (x4)                                  // .....................................................*........................................................................................
        vmul.vv v27, v14, v2                               // .......................................................*......................................................................................
        vmulh.vx v31, v8, x5                               // .......................................................*......................................................................................
        vmulh.vv v0, v14, v2                               // .........................................................*....................................................................................
        vmul.vv v25, v20, v10                              // .........................................................*....................................................................................
        vmul.vx v27, v27, x6                               // ...........................................................*..................................................................................
        vmulh.vv v2, v24, v21                              // ...........................................................*..................................................................................
        vmul.vx v1, v25, x6                                // .............................................................*................................................................................
        vle16.v v30, (x21)                                 // .............................................................*................................................................................
        vsub.vv v6, v2, v9                                 // ...............................................................*..............................................................................
        vmulh.vx v9, v27, x5                               // ...............................................................*..............................................................................
        vmulh.vx v25, v1, x5                               // .................................................................*............................................................................
        vmulh.vv v27, v20, v10                             // .................................................................*............................................................................
        vsub.vv v8, v0, v9                                 // ...................................................................*..........................................................................
        vsub.vv v31, v22, v31                              // ...................................................................*..........................................................................
        vsub.vv v25, v27, v25                              // .....................................................................*........................................................................
        vmul.vv v2, v15, v16                               // .....................................................................*........................................................................
        vmulh.vv v1, v30, v8                               // .......................................................................*......................................................................
        vmul.vv v10, v30, v8                               // .......................................................................*......................................................................
        vadd.vv v27, v31, v25                              // .........................................................................*....................................................................
        vle16.v v25, (x12)                                 // .........................................................................*....................................................................
        add x12, x21, x17                                  // ..........................................................................*...................................................................
        vmul.vx v0, v10, x6                                // ...........................................................................*..................................................................
        vmulh.vv v3, v14, v21                              // ...........................................................................*..................................................................
        vse16.v v27, (x25)                                 // .............................................................................*................................................................
        vmul.vv v9, v5, v25                                // .............................................................................*................................................................
        vmulh.vx v8, v0, x5                                // ...............................................................................*..............................................................
        vmulh.vv v10, v5, v25                              // ...............................................................................*..............................................................
        vmul.vx v9, v9, x6                                 // .................................................................................*............................................................
        vmul.vx v17, v2, x6                                // .................................................................................*............................................................
        vsub.vv v27, v1, v8                                // ...................................................................................*..........................................................
        vmulh.vv v8, v15, v16                              // ...................................................................................*..........................................................
        vmulh.vx v15, v9, x5                               // .....................................................................................*........................................................
        vmulh.vx v1, v17, x5                               // .....................................................................................*........................................................
        vadd.vv v16, v6, v27                               // .......................................................................................*......................................................
        vmul.vv v9, v11, v25                               // .......................................................................................*......................................................
        vsub.vv v31, v10, v15                              // .........................................................................................*....................................................
        vmul.vv v22, v14, v21                              // .........................................................................................*....................................................
        vsub.vv v27, v8, v1                                // ...........................................................................................*..................................................
        vmul.vv v14, v13, v4                               // ...........................................................................................*..................................................
        vmul.vx v10, v9, x6                                // .............................................................................................*................................................
        vmul.vx v8, v22, x6                                // .............................................................................................*................................................
        vmulh.vv v15, v11, v25                             // ...............................................................................................*..............................................
        vmul.vx v25, v14, x6                               // ...............................................................................................*..............................................
        vmulh.vx v21, v10, x5                              // .................................................................................................*............................................
        vle16.v v11, (x19)                                 // .................................................................................................*............................................
        vmulh.vx v14, v25, x5                              // ...................................................................................................*..........................................
        vmul.vv v1, v26, v18                               // ...................................................................................................*..........................................
        vmul.vv v25, v5, v11                               // .....................................................................................................*........................................
        vmul.vv v10, v12, v20                              // .....................................................................................................*........................................
        vsub.vv v15, v15, v21                              // .......................................................................................................*......................................
        vse16.v v16, (x8)                                  // .......................................................................................................*......................................
        vmulh.vx v21, v8, x5                               // .........................................................................................................*....................................
        vmul.vx v16, v10, x6                               // .........................................................................................................*....................................
        vmulh.vv v20, v12, v20                             // ...........................................................................................................*..................................
        vmul.vx v9, v1, x6                                 // ...........................................................................................................*..................................
        vmulh.vx v12, v16, x5                              // .............................................................................................................*................................
        vmul.vx v25, v25, x6                               // .............................................................................................................*................................
        vmulh.vv v13, v13, v4                              // ...............................................................................................................*..............................
        vmulh.vv v4, v5, v11                               // ...............................................................................................................*..............................
        vsub.vv v12, v20, v12                              // .................................................................................................................*............................
        vmul.vv v16, v11, v19                              // .................................................................................................................*............................
        vmulh.vv v0, v24, v30                              // ...................................................................................................................*..........................
        vmul.vv v5, v24, v30                               // ...................................................................................................................*..........................
        vmulh.vx v1, v25, x5                               // .....................................................................................................................*........................
        vmul.vx v16, v16, x6                               // .....................................................................................................................*........................
        vmulh.vv v26, v26, v18                             // .......................................................................................................................*......................
        vmul.vx v20, v5, x6                                // .......................................................................................................................*......................
        vmulh.vv v11, v11, v19                             // .........................................................................................................................*....................
        vmulh.vx v25, v16, x5                              // .........................................................................................................................*....................
        vsub.vv v16, v4, v1                                // ...........................................................................................................................*..................
        vadd.vv v22, v12, v27                              // ...........................................................................................................................*..................
        vsub.vv v25, v11, v25                              // .............................................................................................................................*................
        vmulh.vx v20, v20, x5                              // .............................................................................................................................*................
        vadd.vv v11, v16, v15                              // ...............................................................................................................................*..............
        vmulh.vx v24, v9, x5                               // ...............................................................................................................................*..............
        vadd.vv v25, v31, v25                              // .................................................................................................................................*............
        vsub.vv v12, v3, v21                               // .................................................................................................................................*............
        vsub.vv v29, v13, v14                              // ...................................................................................................................................*..........
        vsub.vv v4, v26, v24                               // ...................................................................................................................................*..........
        vse16.v v25, (x22)                                 // .....................................................................................................................................*........
        vsub.vv v16, v0, v20                               // .....................................................................................................................................*........
        vse16.v v22, (x31)                                 // .......................................................................................................................................*......
        vadd.vv v27, v4, v29                               // .......................................................................................................................................*......
        vse16.v v11, (x20)                                 // .........................................................................................................................................*....
        vadd.vv v11, v16, v12                              // .........................................................................................................................................*....
        vse16.v v27, (x18)                                 // ...........................................................................................................................................*..
        vse16.v v11, (x29)                                 // .............................................................................................................................................*
        bltu x11, x7, poly_basemul_rvv_vlen128_loop        // .............................................................................................................................................* // @slothy:branch

                                                            // ------------------------------------------------------------- cycle (expected) -------------------------------------------------------------->
                                                            // 0                        25                       50                       75                       100                      125
                                                            // |------------------------|------------------------|------------------------|------------------------|------------------------|----------------
        // vle16.v v0, (x11)                                // *.............................................................................................................................................
        // vle16.v v8,  (x12)                               // .........................................................................*....................................................................
        // add x11, x11, x17                                // *.............................................................................................................................................
        // add x12, x12, x17                                // ....*.........................................................................................................................................
        // vle16.v v4, (x11)                                // .............................*................................................................................................................
        // vle16.v v12, (x12)                               // .................................................................................................*............................................
        // add x11, x11, x17                                // .*............................................................................................................................................
        // add x12, x12, x17                                // .....*........................................................................................................................................
        // vle16.v v1, (x11)                                // .......*......................................................................................................................................
        // vle16.v v9,  (x12)                               // .........*....................................................................................................................................
        // add x11, x11, x17                                // ..*...........................................................................................................................................
        // add x12, x12, x17                                // ......*.......................................................................................................................................
        // vle16.v v5, (x11)                                // ...............................*..............................................................................................................
        // vle16.v v13, (x12)                               // .....................................................*........................................................................................
        // add x11, x11, x17                                // ...*..........................................................................................................................................
        // add x12, x12, x17                                // .......*......................................................................................................................................
        // vle16.v v2, (x11)                                // .................*............................................................................................................................
        // vle16.v v10, (x12)                               // ...................*..........................................................................................................................
        // add x11, x11, x17                                // ....*.........................................................................................................................................
        // add x12, x12, x17                                // ................*.............................................................................................................................
        // vle16.v v6, (x11)                                // .....*........................................................................................................................................
        // vle16.v v14, (x12)                               // .....................*........................................................................................................................
        // add x11, x11, x17                                // ....................*.........................................................................................................................
        // add x12, x12, x17                                // ..................*...........................................................................................................................
        // vle16.v v3, (x11)                                // .................................*............................................................................................................
        // vle16.v v11, (x12)                               // .......................*......................................................................................................................
        // add x11, x11, x17                                // ......................*.......................................................................................................................
        // add x12, x12, x17                                // ......................*.......................................................................................................................
        // vle16.v v7, (x11)                                // ...................................................*..........................................................................................
        // vle16.v v15, (x12)                               // .............................................................*................................................................................
        // add x11, x11, x17                                // ..........................*...................................................................................................................
        // add x12, x12, x17                                // ..........................................................................*...................................................................
        // vmul.vv  v16, v0, v12                            // .....................................................................................................*........................................
        // vmul.vv  v17, v1, v13                            // .....................................................................................................*........................................
        // vmul.vv  v18, v2, v14                            // ...................................................................................................*..........................................
        // vmul.vv  v19, v3, v15                            // ...................................................................................................................*..........................
        // vmul.vx  v16, v16, x6                            // .............................................................................................................*................................
        // vmul.vx  v17, v17, x6                            // .........................................................................................................*....................................
        // vmul.vx  v18, v18, x6                            // ...........................................................................................................*..................................
        // vmul.vx  v19, v19, x6                            // .......................................................................................................................*......................
        // vmulh.vv v24, v0, v12                            // ...............................................................................................................*..............................
        // vmulh.vv v25, v1, v13                            // ...........................................................................................................*..................................
        // vmulh.vv v26, v2, v14                            // .......................................................................................................................*......................
        // vmulh.vv v27, v3, v15                            // ...................................................................................................................*..........................
        // vmulh.vx v16, v16, x5                            // .....................................................................................................................*........................
        // vmulh.vx v17, v17, x5                            // .............................................................................................................*................................
        // vmulh.vx v18, v18, x5                            // ...............................................................................................................................*..............
        // vmulh.vx v19, v19, x5                            // .............................................................................................................................*................
        // vsub.vv  v16, v24, v16                           // ...........................................................................................................................*..................
        // vsub.vv  v17, v25, v17                           // .................................................................................................................*............................
        // vsub.vv  v18, v26, v18                           // ...................................................................................................................................*..........
        // vsub.vv  v19, v27, v19                           // .....................................................................................................................................*........
        // vmul.vv  v20, v4, v8                             // .......................................................................................*......................................................
        // vmul.vv  v21, v5, v9                             // .....................................................................*........................................................................
        // vmul.vv  v22, v6, v10                            // ...........................................................................................*..................................................
        // vmul.vv  v23, v7, v11                            // .........................................................................................*....................................................
        // vmul.vx  v20, v20, x6                            // .............................................................................................*................................................
        // vmul.vx  v21, v21, x6                            // .................................................................................*............................................................
        // vmul.vx  v22, v22, x6                            // ...............................................................................................*..............................................
        // vmul.vx  v23, v23, x6                            // .............................................................................................*................................................
        // vmulh.vv v24, v4, v8                             // ...............................................................................................*..............................................
        // vmulh.vv v25, v5, v9                             // ...................................................................................*..........................................................
        // vmulh.vv v26, v6, v10                            // ...............................................................................................................*..............................
        // vmulh.vv v27, v7, v11                            // ...........................................................................*..................................................................
        // vmulh.vx v20, v20, x5                            // .................................................................................................*............................................
        // vmulh.vx v21, v21, x5                            // .....................................................................................*........................................................
        // vmulh.vx v22, v22, x5                            // ...................................................................................................*..........................................
        // vmulh.vx v23, v23, x5                            // .........................................................................................................*....................................
        // vsub.vv  v20, v24, v20                           // .......................................................................................................*......................................
        // vsub.vv  v21, v25, v21                           // ...........................................................................................*..................................................
        // vsub.vv  v22, v26, v22                           // ...................................................................................................................................*..........
        // vsub.vv  v23, v27, v23                           // .................................................................................................................................*............
        // vadd.vv v16, v16, v20                            // ...............................................................................................................................*..............
        // vadd.vv v17, v17, v21                            // ...........................................................................................................................*..................
        // vadd.vv v18, v18, v22                            // .......................................................................................................................................*......
        // vadd.vv v19, v19, v23                            // .........................................................................................................................................*....
        // add x14, x10, x17                                // ..........*...................................................................................................................................
        // add x15, x10, x28                                // ......*.......................................................................................................................................
        // vse16.v v16, (x14)                               // .........................................................................................................................................*....
        // vse16.v v17, (x15)                               // .......................................................................................................................................*......
        // add x14, x14, x30                                // ............*.................................................................................................................................
        // add x15, x15, x30                                // ....................*.........................................................................................................................
        // vse16.v v18, (x14)                               // ...........................................................................................................................................*..
        // vse16.v v19, (x15)                               // .............................................................................................................................................*
        // addi x14, x13, 0                                 // .*............................................................................................................................................
        // add  x15, x13, x17                               // ..........*...................................................................................................................................
        // vle16.v v16, (x14)                               // ...............*..............................................................................................................................
        // vle16.v v17, (x15)                               // ...........*..................................................................................................................................
        // add  x14, x14, x16                               // ..*...........................................................................................................................................
        // add  x15, x15, x16                               // ..................*...........................................................................................................................
        // vle16.v v18, (x14)                               // ...*..........................................................................................................................................
        // vle16.v v19, (x15)                               // .................................................*............................................................................................
        // vmul.vv  v20, v0, v8                             // .............................................................................*................................................................
        // vmul.vv  v21, v1, v9                             // .............*................................................................................................................................
        // vmul.vv  v22, v2, v10                            // .......................*......................................................................................................................
        // vmul.vv  v23, v3, v11                            // .....................................*........................................................................................................
        // vmul.vx  v20, v20, x6                            // .................................................................................*............................................................
        // vmul.vx  v21, v21, x6                            // ...................*..........................................................................................................................
        // vmul.vx  v22, v22, x6                            // ...........................*..................................................................................................................
        // vmul.vx  v23, v23, x6                            // ...............................................*..............................................................................................
        // vmulh.vv v28, v0, v8                             // ...............................................................................*..............................................................
        // vmulh.vv v29, v1, v9                             // ...............*..............................................................................................................................
        // vmulh.vv v30, v2, v10                            // .........................*....................................................................................................................
        // vmulh.vv v31, v3, v11                            // ...........................................................*..................................................................................
        // vmulh.vx v20, v20, x5                            // .....................................................................................*........................................................
        // vmulh.vx v21, v21, x5                            // .......................................................*......................................................................................
        // vmulh.vx v22, v22, x5                            // ...............................*..............................................................................................................
        // vmulh.vx v23, v23, x5                            // ...................................................*..........................................................................................
        // vsub.vv  v20, v28, v20                           // .........................................................................................*....................................................
        // vsub.vv  v21, v29, v21                           // ...................................................................*..........................................................................
        // vsub.vv  v22, v30, v22                           // ...................................*..........................................................................................................
        // vsub.vv  v23, v31, v23                           // ...............................................................*..............................................................................
        // vmul.vv  v24, v4, v16                            // ...................................*..........................................................................................................
        // vmul.vv  v25, v5, v17                            // .......................................*......................................................................................................
        // vmul.vv  v26, v6, v18                            // ........*.....................................................................................................................................
        // vmul.vv  v27, v7, v19                            // .......................................................*......................................................................................
        // vmul.vx  v24, v24, x6                            // .......................................*......................................................................................................
        // vmul.vx  v25, v25, x6                            // ...........................................*..................................................................................................
        // vmul.vx  v26, v26, x6                            // .............*................................................................................................................................
        // vmul.vx  v27, v27, x6                            // ...........................................................*..................................................................................
        // vmulh.vv v28, v4, v16                            // .........................................*....................................................................................................
        // vmulh.vv v29, v5, v17                            // .............................................*................................................................................................
        // vmulh.vv v30, v6, v18                            // ...........*..................................................................................................................................
        // vmulh.vv v31, v7, v19                            // .........................................................*....................................................................................
        // vmulh.vx v24, v24, x5                            // ...........................................*..................................................................................................
        // vmulh.vx v25, v25, x5                            // .................................................*............................................................................................
        // vmulh.vx v26, v26, x5                            // .................*............................................................................................................................
        // vmulh.vx v27, v27, x5                            // ...............................................................*..............................................................................
        // vsub.vv  v24, v28, v24                           // ...............................................*..............................................................................................
        // vsub.vv  v25, v29, v25                           // .....................................................*........................................................................................
        // vsub.vv  v26, v30, v26                           // .....................*........................................................................................................................
        // vsub.vv  v27, v31, v27                           // ...................................................................*..........................................................................
        // vmul.vv  v0, v12, v24                            // .................................................................................................................*............................
        // vmul.vv  v1, v13, v25                            // .........................................................*....................................................................................
        // vmul.vv  v2, v14, v26                            // .........................*....................................................................................................................
        // vmul.vv  v3, v15, v27                            // .......................................................................*......................................................................
        // vmul.vx  v0, v0, x6                              // .....................................................................................................................*........................
        // vmul.vx  v1, v1, x6                              // .............................................................*................................................................................
        // vmul.vx  v2, v2, x6                              // .............................*................................................................................................................
        // vmul.vx  v3, v3, x6                              // ...........................................................................*..................................................................
        // vmulh.vv v28, v12, v24                           // .........................................................................................................................*....................
        // vmulh.vv v29, v13, v25                           // .................................................................*............................................................................
        // vmulh.vv v30, v14, v26                           // ...........................*..................................................................................................................
        // vmulh.vv v31, v15, v27                           // .......................................................................*......................................................................
        // vmulh.vx v0, v0, x5                              // .........................................................................................................................*....................
        // vmulh.vx v1, v1, x5                              // .................................................................*............................................................................
        // vmulh.vx v2, v2, x5                              // .................................*............................................................................................................
        // vmulh.vx v3, v3, x5                              // ...............................................................................*..............................................................
        // vsub.vv  v0, v28, v0                             // .............................................................................................................................*................
        // vsub.vv  v1, v29, v1                             // .....................................................................*........................................................................
        // vsub.vv  v2, v30, v2                             // .....................................*........................................................................................................
        // vsub.vv  v3, v31, v3                             // ...................................................................................*..........................................................
        // vadd.vv v20, v20, v0                             // .................................................................................................................................*............
        // vadd.vv v21, v21, v1                             // .........................................................................*....................................................................
        // vadd.vv v22, v22, v2                             // .........................................*....................................................................................................
        // vadd.vv v23, v23, v3                             // .......................................................................................*......................................................
        // addi x14, x10, 0                                 // ........*.....................................................................................................................................
        // add x15, x10, x16                                // ............*.................................................................................................................................
        // vse16.v v20, (x14)                               // .....................................................................................................................................*........
        // vse16.v v21, (x15)                               // .............................................................................*................................................................
        // add  x14, x14, x30                               // ................*.............................................................................................................................
        // add x15, x15, x30                                // ..............*...............................................................................................................................
        // vse16.v v22, (x14)                               // .............................................*................................................................................................
        // vse16.v v23, (x15)                               // .......................................................................................................*......................................
        // add  x10, x10, x30                               // .........*....................................................................................................................................
        // add x13, x13, x30                                // ........................*.....................................................................................................................
        // add x10, x10, x30                                // ..............*...............................................................................................................................
        // bltu x11, x7, poly_basemul_rvv_vlen128_loop      // .............................................................................................................................................*


    restore_regs
    addi sp, sp, 8*15
ret