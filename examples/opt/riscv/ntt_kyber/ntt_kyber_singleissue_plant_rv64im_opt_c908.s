.macro load_coeffs poly, len, wordLen
  lh s0,  \len*\wordLen*0(\poly)
  lh s1,  \len*\wordLen*1(\poly)
  lh s2,  \len*\wordLen*2(\poly)
  lh s3,  \len*\wordLen*3(\poly)
  lh s4,  \len*\wordLen*4(\poly)
  lh s5,  \len*\wordLen*5(\poly)
  lh s6,  \len*\wordLen*6(\poly)
  lh s7,  \len*\wordLen*7(\poly)
  lh s8,  \len*\wordLen*8(\poly)
  lh s9,  \len*\wordLen*9(\poly)
  lh s10, \len*\wordLen*10(\poly)
  lh s11, \len*\wordLen*11(\poly)
  lh a2,  \len*\wordLen*12(\poly)
  lh a3,  \len*\wordLen*13(\poly)
  lh a4,  \len*\wordLen*14(\poly)
  lh a5,  \len*\wordLen*15(\poly)
.endm

.macro store_coeffs poly, len, wordLen
  sh s0,  \len*\wordLen*0(\poly)
  sh s1,  \len*\wordLen*1(\poly)
  sh s2,  \len*\wordLen*2(\poly)
  sh s3,  \len*\wordLen*3(\poly)
  sh s4,  \len*\wordLen*4(\poly)
  sh s5,  \len*\wordLen*5(\poly)
  sh s6,  \len*\wordLen*6(\poly)
  sh s7,  \len*\wordLen*7(\poly)
  sh s8,  \len*\wordLen*8(\poly)
  sh s9,  \len*\wordLen*9(\poly)
  sh s10, \len*\wordLen*10(\poly)
  sh s11, \len*\wordLen*11(\poly)
  sh a2,  \len*\wordLen*12(\poly)
  sh a3,  \len*\wordLen*13(\poly)
  sh a4,  \len*\wordLen*14(\poly)
  sh a5,  \len*\wordLen*15(\poly)
.endm

.macro save_regs
  sd s0,  0*8(sp)
  sd s1,  1*8(sp)
  sd s2,  2*8(sp)
  sd s3,  3*8(sp)
  sd s4,  4*8(sp)
  sd s5,  5*8(sp)
  sd s6,  6*8(sp)
  sd s7,  7*8(sp)
  sd s8,  8*8(sp)
  sd s9,  9*8(sp)
  sd s10, 10*8(sp)
  sd s11, 11*8(sp)
  sd gp,  12*8(sp)
  sd tp,  13*8(sp)
  sd ra,  14*8(sp)
.endm

.macro restore_regs
  ld s0,  0*8(sp)
  ld s1,  1*8(sp)
  ld s2,  2*8(sp)
  ld s3,  3*8(sp)
  ld s4,  4*8(sp)
  ld s5,  5*8(sp)
  ld s6,  6*8(sp)
  ld s7,  7*8(sp)
  ld s8,  8*8(sp)
  ld s9,  9*8(sp)
  ld s10, 10*8(sp)
  ld s11, 11*8(sp)
  ld gp,  12*8(sp)
  ld tp,  13*8(sp)
  ld ra,  14*8(sp)
.endm

// a <- a*b*(-2^{-64}) mod+- q
// q32: q<<32; bqinv: b*qinv
.macro plant_mul_const_inplace q32, bqinv, a
  mul  \a, \a, \bqinv
  srai \a, \a, 32
  addi \a, \a, 8
  mulh \a, \a, \q32
.endm

// r <- a*b*(-2^{-64}) mod+- q
// q32: q<<32; bqinv: b*qinv
.macro plant_mul_const q32, bqinv, a, r
    mul  \r, \a, \bqinv
    srai \r, \r, 32
    addi \r, \r, 8
    mulh \r, \r, \q32
.endm

// each layer increases coefficients by 0.5q; In ct_butterfly, twiddle and tmp can be reused because each twiddle is only used once. The gs_butterfly cannot.
.macro ct_butterfly coeff0, coeff1, twiddle, q, tmp
  plant_mul_const \q, \twiddle, \coeff1, \tmp
  sub \coeff1, \coeff0, \tmp
  add \coeff0, \coeff0, \tmp
.endm

.macro gs_butterfly coeff0, coeff1, twiddle, q, tmp
  sub \tmp, \coeff0, \coeff1
  add \coeff0, \coeff0, \coeff1
  plant_mul_const \q, \twiddle, \tmp, \coeff1
.endm

// in-place plantard reduction to a
// output \in (-0.5q, 0.5q); q32: q<<32
.macro plant_red q32, qinv, a
  mul  \a, \a, \qinv
  srai \a, \a, 32
  addi \a, \a, 8
  mulh \a, \a, \q32
.endm

.equ q,    3329
.equ q32,  0xd0100000000                // q << 32
.equ qinv, 0x3c0f12886ba8f301           // q^-1 mod 2^64
.equ plantconst, 0x13afb7680bb055       // (((-2**64) % q) * qinv) % (2**64)
.equ plantconst2, 0x1a390f4d9791e139    // (((-2**64) % q) * ((-2**64) % q) * qinv) % (2**64)

// |input| < 0.5q; |output| < 3.5q
// API: a0: poly, a1: 64-bit twiddle ptr; a6: q<<32; a7: tmp, variable twiddle factors; gp: loop;
// s0-s11, a2-a5: 16 coeffs;
// 16+2+1+1=20 regs;
// 9 twiddle factors: can be preloaded; t0-t6, tp, ra.
.global ntt_rv64im_opt_c908
.align 2
ntt_rv64im_opt_c908:
  addi sp, sp, -8*15
  save_regs
  li a6, q32        // q<<32
  addi a0, a0, 32   // poly[16]
  addi gp, x0, 15   // loop
  // load 9 twiddle factors
  ld t0, 0*8(a1)
  ld t1, 1*8(a1)
  ld t2, 2*8(a1)
  ld t3, 3*8(a1)
  ld t4, 4*8(a1)
  ld t5, 5*8(a1)
  ld t6, 6*8(a1)
  ld tp, 7*8(a1)
  ld ra, 8*8(a1)
  ### LAYER 1+2+3+4
        addi x10, x10, -2           // *.................................................................................................................................................
        lh x17, 16*2*12(x10)        // .*................................................................................................................................................
        lh x12, 16*2*8(x10)         // ..*...............................................................................................................................................
        lh x27, 16*2*9(x10)         // ...*..............................................................................................................................................
        mul x20, x17, x5            // ....*.............................................................................................................................................
        lh x25, 16*2*11(x10)        // ....*.............................................................................................................................................
        lh x21, 16*2*13(x10)        // .....*............................................................................................................................................
        mul x24, x12, x5            // ......*...........................................................................................................................................
        lh x14, 16*2*14(x10)        // ......*...........................................................................................................................................
        lh x26, 16*2*10(x10)        // .......*..........................................................................................................................................
        mul x12, x27, x5            // ........*.........................................................................................................................................
        srai x8, x20, 32            // ........*.........................................................................................................................................
        mul x25, x25, x5            // ..........*.......................................................................................................................................
        srai x13, x24, 32           // ..........*.......................................................................................................................................
        srai x18, x12, 32           // ............*.....................................................................................................................................
        addi x27, x8, 8             // ............*.....................................................................................................................................
        mul x8, x14, x5             // .............*....................................................................................................................................
        lh x23, 16*2*4(x10)         // .............*....................................................................................................................................
        lh x20, 16*2*15(x10)        // ..............*...................................................................................................................................
        mul x24, x21, x5            // ...............*..................................................................................................................................
        addi x21, x18, 8            // ...............*..................................................................................................................................
        addi x18, x13, 8            // ................*.................................................................................................................................
        mul x13, x26, x5            // .................*................................................................................................................................
        mulh x19, x27, x16          // ...................*..............................................................................................................................
        srai x14, x13, 32           // .....................*............................................................................................................................
        srai x15, x8, 32            // .....................*............................................................................................................................
        srai x12, x24, 32           // ......................*...........................................................................................................................
        srai x27, x25, 32           // ......................*...........................................................................................................................
        mul x24, x20, x5            // .......................*..........................................................................................................................
        addi x8, x15, 8             // .......................*..........................................................................................................................
        addi x13, x14, 8            // ........................*.........................................................................................................................
        mulh x20, x18, x16          // .........................*........................................................................................................................
        addi x27, x27, 8            // .........................*........................................................................................................................
        addi x26, x12, 8            // ..........................*.......................................................................................................................
        sub x12, x23, x19           // ..........................*.......................................................................................................................
        mulh x22, x27, x16          // ...........................*......................................................................................................................
        add x25, x23, x19           // ...........................*......................................................................................................................
        srai x18, x24, 32           // ............................*.....................................................................................................................
        lh x19, 16*2*0(x10)         // ............................*.....................................................................................................................
        mulh x13, x13, x16          // .............................*....................................................................................................................
        lh x17, 16*2*3(x10)         // .............................*....................................................................................................................
        lh x15, 16*2*5(x10)         // ..............................*...................................................................................................................
        addi x18, x18, 8            // ..............................*...................................................................................................................
        mulh x14, x8, x16           // ...............................*..................................................................................................................
        add x8, x19, x20            // ...............................*..................................................................................................................
        sub x24, x19, x20           // ................................*.................................................................................................................
        mul x9, x12, x7             // .................................*................................................................................................................
        sub x27, x17, x22           // .................................*................................................................................................................
        add x23, x17, x22           // ..................................*...............................................................................................................
        lh x19, 16*2*6(x10)         // ..................................*...............................................................................................................
        mulh x12, x21, x16          // ...................................*..............................................................................................................
        lh x21, 16*2*7(x10)         // ...................................*..............................................................................................................
        lh x20, 16*2*2(x10)         // ....................................*.............................................................................................................
        mul x25, x25, x6            // .....................................*............................................................................................................
        sub x17, x19, x14           // .....................................*............................................................................................................
        add x14, x19, x14           // ......................................*...........................................................................................................
        srai x9, x9, 32             // ......................................*...........................................................................................................
        mulh x19, x18, x16          // .......................................*..........................................................................................................
        mul x22, x14, x6            // .........................................*........................................................................................................
        srai x14, x25, 32           // .........................................*........................................................................................................
        add x18, x21, x19           // ...........................................*......................................................................................................
        sub x25, x21, x19           // ...........................................*......................................................................................................
        add x21, x20, x13           // ............................................*.....................................................................................................
        mulh x19, x26, x16          // ............................................*.....................................................................................................
        sub x26, x20, x13           // .............................................*....................................................................................................
        addi x13, x14, 8            // .............................................*....................................................................................................
        mul x14, x17, x7            // ..............................................*...................................................................................................
        srai x22, x22, 32           // ..............................................*...................................................................................................
        add x20, x15, x19           // ................................................*.................................................................................................
        sub x19, x15, x19           // ................................................*.................................................................................................
        mul x15, x18, x6            // .................................................*................................................................................................
        addi x22, x22, 8            // .................................................*................................................................................................
        mulh x22, x22, x16          // ...................................................*..............................................................................................
        mul x19, x19, x7            // .....................................................*............................................................................................
        lh x18, 16*2*1(x10)         // .....................................................*............................................................................................
        mul x17, x25, x7            // .......................................................*..........................................................................................
        add x25, x21, x22           // .......................................................*..........................................................................................
        sub x21, x21, x22           // ........................................................*.........................................................................................
        srai x22, x15, 32           // ........................................................*.........................................................................................
        mul x15, x25, x28           // .........................................................*........................................................................................
        sub x25, x18, x12           // .........................................................*........................................................................................
        mul x20, x20, x6            // ...........................................................*......................................................................................
        add x18, x18, x12           // ...........................................................*......................................................................................
        addi x12, x22, 8            // ............................................................*.....................................................................................
        srai x22, x17, 32           // ............................................................*.....................................................................................
        srai x17, x15, 32           // .............................................................*....................................................................................
        mulh x15, x13, x16          // .............................................................*....................................................................................
        addi x13, x22, 8            // ..............................................................*...................................................................................
        srai x22, x14, 32           // ..............................................................*...................................................................................
        addi x9, x9, 8              // ...............................................................*..................................................................................
        mul x21, x21, x29           // ...............................................................*..................................................................................
        srai x19, x19, 32           // ................................................................*.................................................................................
        mulh x13, x13, x16          // .................................................................*................................................................................
        addi x17, x17, 8            // .................................................................*................................................................................
        sub x14, x8, x15            // ..................................................................*...............................................................................
        add x8, x8, x15             // ..................................................................*...............................................................................
        mulh x15, x12, x16          // ...................................................................*..............................................................................
        addi x12, x19, 8            // ...................................................................*..............................................................................
        srai x19, x21, 32           // ....................................................................*.............................................................................
        srai x21, x20, 32           // ....................................................................*.............................................................................
        mulh x9, x9, x16            // .....................................................................*............................................................................
        addi x20, x19, 8            // .....................................................................*............................................................................
        addi x22, x22, 8            // ......................................................................*...........................................................................
        mulh x22, x22, x16          // .......................................................................*..........................................................................
        addi x21, x21, 8            // .......................................................................*..........................................................................
        mulh x20, x20, x16          // .........................................................................*........................................................................
        add x19, x23, x15           // .........................................................................*........................................................................
        sub x15, x23, x15           // ..........................................................................*.......................................................................
        add x23, x26, x22           // ...........................................................................*......................................................................
        mulh x12, x12, x16          // ...........................................................................*......................................................................
        sub x26, x26, x22           // ............................................................................*.....................................................................
        sub x22, x27, x13           // ............................................................................*.....................................................................
        add x27, x27, x13           // .............................................................................*....................................................................
        mul x26, x26, x31           // .............................................................................*....................................................................
        mulh x21, x21, x16          // ...............................................................................*..................................................................
        addi gp, gp, -1
ntt_rv64im_loop1:
                                    // Instructions:    231
                                    // Expected cycles: 153
                                    // Expected IPC:    1.51

                                    // ------------------------------------------------------------------- cycle (expected) ------------------------------------------------------------------->
                                    // 0                        25                       50                       75                       100                      125                      150
                                    // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|--
        mul x27, x27, x30           // *........................................................................................................................................................
        sub x13, x25, x12           // .*.......................................................................................................................................................
        srai x26, x26, 32           // .*.......................................................................................................................................................
        add x12, x25, x12           // ..*......................................................................................................................................................
        mul x25, x22, x31           // ..*......................................................................................................................................................
        sub x22, x14, x20           // ...*.....................................................................................................................................................
        add x20, x14, x20           // ...*.....................................................................................................................................................
        sub x14, x24, x9            // ....*....................................................................................................................................................
        mul x19, x19, x28           // ....*....................................................................................................................................................
        add x24, x24, x9            // .....*...................................................................................................................................................
        srai x9, x27, 32            // .....*...................................................................................................................................................
        mul x15, x15, x29           // ......*..................................................................................................................................................
        mul x27, x23, x30           // ........*................................................................................................................................................
        add x23, x18, x21           // ........*................................................................................................................................................
        sub x21, x18, x21           // .........*...............................................................................................................................................
        addi x9, x9, 8              // .........*...............................................................................................................................................
        srai x19, x19, 32           // ..........*..............................................................................................................................................
        mulh x18, x9, x16           // ..........*..............................................................................................................................................
        addi x26, x26, 8            // ...........*.............................................................................................................................................
        srai x9, x25, 32            // ...........*.............................................................................................................................................
        addi x19, x19, 8            // ............*............................................................................................................................................
        mulh x25, x26, x16          // ............*............................................................................................................................................
        srai x26, x15, 32           // .............*...........................................................................................................................................
        addi x15, x26, 8            // ..............*..........................................................................................................................................
        mulh x26, x19, x16          // ..............*..........................................................................................................................................
        addi x9, x9, 8              // ...............*.........................................................................................................................................
        sub x19, x12, x18           // ...............*.........................................................................................................................................
        add x18, x12, x18           // ................*........................................................................................................................................
        mulh x12, x15, x16          // ................*........................................................................................................................................
        srai x15, x27, 32           // .................*.......................................................................................................................................
        mulh x27, x17, x16          // ..................*......................................................................................................................................
        sub x17, x23, x26           // ...................*.....................................................................................................................................
        add x26, x23, x26           // ...................*.....................................................................................................................................
        addi x15, x15, 8            // ....................*....................................................................................................................................
        mul x23, x17, x1            // ....................*....................................................................................................................................
        srai x23, x23, 32           // ........................*................................................................................................................................
        add x17, x8, x27            // ........................*................................................................................................................................
        sub x27, x8, x27            // .........................*...............................................................................................................................
        sub x8, x21, x12            // .........................*...............................................................................................................................
        add x12, x21, x12           // ..........................*..............................................................................................................................
        mul x21, x26, x4            // ..........................*..............................................................................................................................
        addi x23, x23, 8            // ...........................*.............................................................................................................................
        sub x26, x14, x25           // ...........................*.............................................................................................................................
        add x25, x14, x25           // ............................*............................................................................................................................
        mulh x23, x23, x16          // ............................*............................................................................................................................
        ld x14, 10*8(x11)           // .............................*...........................................................................................................................
        mul x14, x8, x14            // ................................*........................................................................................................................
        sub x8, x27, x23            // ................................*........................................................................................................................
        srai x21, x21, 32           // .................................*.......................................................................................................................
        add x27, x27, x23           // .................................*.......................................................................................................................
        sh x8, 16*2*3(x10)          // ..................................*......................................................................................................................
        mulh x9, x9, x16            // ..................................*......................................................................................................................
        sh x27, 16*2*2(x10)         // ...................................*.....................................................................................................................
        addi x23, x21, 8            // ...................................*.....................................................................................................................
        srai x14, x14, 32           // ....................................*....................................................................................................................
        mulh x27, x15, x16          // ....................................*....................................................................................................................
        ld x21, 13*8(x11)           // .....................................*...................................................................................................................
        addi x14, x14, 8            // ......................................*..................................................................................................................
        add x8, x24, x27            // ........................................*................................................................................................................
        mulh x23, x23, x16          // ........................................*................................................................................................................
        sub x24, x24, x27           // .........................................*...............................................................................................................
        add x15, x13, x9            // .........................................*...............................................................................................................
        mul x21, x15, x21           // ..........................................*..............................................................................................................
        ld x27, 12*8(x11)           // ..........................................*..............................................................................................................
        sub x15, x13, x9            // ...........................................*.............................................................................................................
        ld x9, 11*8(x11)            // ...........................................*.............................................................................................................
        mulh x14, x14, x16          // ............................................*............................................................................................................
        add x13, x17, x23           // .............................................*...........................................................................................................
        sub x23, x17, x23           // .............................................*...........................................................................................................
        mul x9, x18, x9             // ..............................................*..........................................................................................................
        sub x18, x22, x14           // ................................................*........................................................................................................
        sh x18, 16*2*7(x10)         // .................................................*.......................................................................................................
        srai x17, x21, 32           // .................................................*.......................................................................................................
        mul x19, x19, x27           // ..................................................*......................................................................................................
        add x14, x22, x14           // ..................................................*......................................................................................................
        sh x13, 16*2*0(x10)         // ...................................................*.....................................................................................................
        addi x18, x17, 8            // ...................................................*.....................................................................................................
        mulh x13, x18, x16          // ....................................................*....................................................................................................
        sh x23, 16*2*1(x10)         // .....................................................*...................................................................................................
        srai x22, x9, 32            // .....................................................*...................................................................................................
        ld x21, 9*8(x11)            // ......................................................*..................................................................................................
        srai x17, x19, 32           // ......................................................*..................................................................................................
        addi x9, x22, 8             // .......................................................*.................................................................................................
        add x27, x25, x13           // ........................................................*................................................................................................
        mulh x18, x9, x16           // ........................................................*................................................................................................
        sub x25, x25, x13           // .........................................................*...............................................................................................
        ld x22, 14*8(x11)           // .........................................................*...............................................................................................
        sh x25, 16*2*13(x10)        // ..........................................................*..............................................................................................
        mul x21, x12, x21           // ..........................................................*..............................................................................................
        sh x14, 16*2*6(x10)         // ...........................................................*.............................................................................................
        addi x25, x17, 8            // ............................................................*............................................................................................
        mul x13, x15, x22           // ............................................................*............................................................................................
        add x9, x8, x18             // .............................................................*...........................................................................................
        sub x8, x8, x18             // .............................................................*...........................................................................................
        mulh x17, x25, x16          // ..............................................................*..........................................................................................
        srai x22, x13, 32           // ................................................................*........................................................................................
        addi x14, x22, 8            // .................................................................*.......................................................................................
        srai x12, x21, 32           // .................................................................*.......................................................................................
        sh x27, 16*2*12(x10)        // ..................................................................*......................................................................................
        mulh x19, x14, x16          // ..................................................................*......................................................................................
        sh x8, 16*2*9(x10)          // ...................................................................*.....................................................................................
        addi x21, x12, 8            // ....................................................................*....................................................................................
        sub x8, x24, x17            // ....................................................................*....................................................................................
        mulh x22, x21, x16          // .....................................................................*...................................................................................
        add x25, x26, x19           // ......................................................................*..................................................................................
        sh x9, 16*2*8(x10)          // ......................................................................*..................................................................................
        add x14, x24, x17           // .......................................................................*.................................................................................
        sh x8, 16*2*11(x10)         // .......................................................................*.................................................................................
        sh x14, 16*2*10(x10)        // ........................................................................*................................................................................
        sub x13, x26, x19           // ........................................................................*................................................................................
        add x15, x20, x22           // .........................................................................*...............................................................................
        sh x25, 16*2*14(x10)        // .........................................................................*...............................................................................
        sh x13, 16*2*15(x10)        // ..........................................................................*..............................................................................
        sub x27, x20, x22           // ..........................................................................*..............................................................................
        sh x27, 16*2*5(x10)         // ...........................................................................*.............................................................................
        sh x15, 16*2*4(x10)         // ............................................................................*............................................................................
        addi x10, x10, -2           // ............................................................................*............................................................................
        lh x20, 16*2*8(x10)         // .............................................................................*...........................................................................
        lh x13, 16*2*10(x10)        // ..............................................................................*..........................................................................
        lh x22, 16*2*13(x10)        // ...............................................................................*.........................................................................
        mul x21, x20, x5            // ................................................................................*........................................................................
        lh x17, 16*2*11(x10)        // ................................................................................*........................................................................
        lh x20, 16*2*12(x10)        // .................................................................................*.......................................................................
        mul x25, x13, x5            // ..................................................................................*......................................................................
        lh x9, 16*2*9(x10)          // ..................................................................................*......................................................................
        lh x14, 16*2*14(x10)        // ...................................................................................*.....................................................................
        mul x27, x22, x5            // ....................................................................................*....................................................................
        mul x8, x17, x5             // ......................................................................................*..................................................................
        srai x15, x25, 32           // ......................................................................................*..................................................................
        srai x26, x21, 32           // .......................................................................................*.................................................................
        srai x12, x27, 32           // ........................................................................................*................................................................
        mul x13, x9, x5             // ........................................................................................*................................................................
        addi x9, x15, 8             // .........................................................................................*...............................................................
        addi x23, x26, 8            // .........................................................................................*...............................................................
        addi x17, x12, 8            // ..........................................................................................*..............................................................
        srai x24, x8, 32            // ..........................................................................................*..............................................................
        mul x19, x14, x5            // ...........................................................................................*.............................................................
        addi x12, x24, 8            // ...........................................................................................*.............................................................
        lh x27, 16*2*3(x10)         // ............................................................................................*............................................................
        mulh x25, x23, x16          // .............................................................................................*...........................................................
        srai x26, x19, 32           // ...............................................................................................*.........................................................
        srai x19, x13, 32           // ...............................................................................................*.........................................................
        lh x14, 16*2*0(x10)         // ................................................................................................*........................................................
        mulh x13, x12, x16          // ................................................................................................*........................................................
        addi x18, x26, 8            // .................................................................................................*.......................................................
        addi x19, x19, 8            // .................................................................................................*.......................................................
        lh x26, 16*2*4(x10)         // ..................................................................................................*......................................................
        mulh x12, x17, x16          // ..................................................................................................*......................................................
        sub x24, x14, x25           // ...................................................................................................*.....................................................
        add x8, x14, x25            // ...................................................................................................*.....................................................
        lh x17, 16*2*5(x10)         // ....................................................................................................*....................................................
        mul x22, x20, x5            // ....................................................................................................*....................................................
        add x23, x27, x13           // .....................................................................................................*...................................................
        sub x27, x27, x13           // .....................................................................................................*...................................................
        lh x13, 16*2*6(x10)         // ......................................................................................................*..................................................
        mulh x25, x18, x16          // ......................................................................................................*..................................................
        lh x15, 16*2*15(x10)        // .......................................................................................................*.................................................
        add x14, x17, x12           // .......................................................................................................*.................................................
        mulh x20, x9, x16           // ........................................................................................................*................................................
        srai x21, x22, 32           // ........................................................................................................*................................................
        sub x22, x17, x12           // .........................................................................................................*...............................................
        addi x17, x21, 8            // .........................................................................................................*...............................................
        mul x12, x15, x5            // ..........................................................................................................*..............................................
        sub x15, x13, x25           // ..........................................................................................................*..............................................
        add x18, x13, x25           // ...........................................................................................................*.............................................
        lh x21, 16*2*2(x10)         // ...........................................................................................................*.............................................
        mulh x17, x17, x16          // ............................................................................................................*............................................
        lh x13, 16*2*7(x10)         // ............................................................................................................*............................................
        mul x25, x22, x7            // ..............................................................................................................*..........................................
        srai x12, x12, 32           // ..............................................................................................................*..........................................
        add x22, x21, x20           // ...............................................................................................................*.........................................
        add x9, x26, x17            // ................................................................................................................*........................................
        mul x15, x15, x7            // ................................................................................................................*........................................
        sub x17, x26, x17           // .................................................................................................................*.......................................
        mul x9, x9, x6              // ..................................................................................................................*......................................
        sub x26, x21, x20           // ..................................................................................................................*......................................
        mul x20, x18, x6            // ....................................................................................................................*....................................
        addi x18, x12, 8            // ....................................................................................................................*....................................
        srai x12, x25, 32           // .....................................................................................................................*...................................
        srai x21, x15, 32           // .....................................................................................................................*...................................
        mulh x25, x19, x16          // ......................................................................................................................*..................................
        addi x19, x21, 8            // ......................................................................................................................*..................................
        srai x20, x20, 32           // ........................................................................................................................*................................
        mul x14, x14, x6            // ........................................................................................................................*................................
        addi x21, x20, 8            // .........................................................................................................................*...............................
        mulh x15, x18, x16          // ..........................................................................................................................*..............................
        addi x12, x12, 8            // ..........................................................................................................................*..............................
        srai x18, x9, 32            // ...........................................................................................................................*.............................
        mul x9, x17, x7             // ............................................................................................................................*............................
        mulh x12, x12, x16          // ..............................................................................................................................*..........................
        add x17, x13, x15           // ..............................................................................................................................*..........................
        mulh x20, x19, x16          // ................................................................................................................................*........................
        srai x9, x9, 32             // ................................................................................................................................*........................
        sub x19, x13, x15           // .................................................................................................................................*.......................
        srai x13, x14, 32           // .................................................................................................................................*.......................
        mul x15, x19, x7            // ..................................................................................................................................*......................
        addi x19, x9, 8             // ..................................................................................................................................*......................
        mul x9, x17, x6             // ....................................................................................................................................*....................
        mulh x17, x21, x16          // ......................................................................................................................................*..................
        srai x15, x15, 32           // ......................................................................................................................................*..................
        addi x21, x18, 8            // .......................................................................................................................................*.................
        addi x14, x15, 8            // .......................................................................................................................................*.................
        srai x15, x9, 32            // ........................................................................................................................................*................
        mulh x9, x14, x16           // ........................................................................................................................................*................
        sub x18, x22, x17           // ..........................................................................................................................................*..............
        mulh x21, x21, x16          // ..........................................................................................................................................*..............
        addi x15, x15, 8            // ...........................................................................................................................................*.............
        add x17, x22, x17           // ...........................................................................................................................................*.............
        mul x18, x18, x29           // ............................................................................................................................................*............
        sub x22, x27, x9            // ............................................................................................................................................*............
        add x27, x27, x9            // .............................................................................................................................................*...........
        mul x9, x17, x28            // ..............................................................................................................................................*..........
        sub x14, x8, x21            // ..............................................................................................................................................*..........
        addi x17, x13, 8            // ...............................................................................................................................................*.........
        mulh x15, x15, x16          // ................................................................................................................................................*........
        add x8, x8, x21             // ................................................................................................................................................*........
        srai x21, x18, 32           // .................................................................................................................................................*.......
        addi x18, x21, 8            // ..................................................................................................................................................*......
        mulh x21, x17, x16          // ..................................................................................................................................................*......
        lh x17, 16*2*1(x10)         // ...................................................................................................................................................*.....
        srai x13, x9, 32            // ...................................................................................................................................................*.....
        mulh x9, x19, x16           // ....................................................................................................................................................*....
        add x19, x23, x15           // ....................................................................................................................................................*....
        sub x15, x23, x15           // .....................................................................................................................................................*...
        add x23, x26, x20           // .....................................................................................................................................................*...
        sub x26, x26, x20           // ......................................................................................................................................................*..
        mulh x20, x18, x16          // ......................................................................................................................................................*..
        add x18, x17, x25           // .......................................................................................................................................................*.
        sub x25, x17, x25           // .......................................................................................................................................................*.
        mul x26, x26, x31           // ........................................................................................................................................................*
        addi x17, x13, 8            // ........................................................................................................................................................*

                                     // ------------------------------------------------------------------- cycle (expected) ------------------------------------------------------------------->
                                     // 0                        25                       50                       75                       100                      125                      150
                                     // |------------------------|------------------------|------------------------|------------------------|------------------------|------------------------|--
        // srai x13, x26, 32         // .*.......................................................................................................................................................
        // mul x26, x27, x30         // *........................................................................................................................................................
        // mul x27, x22, x31         // ..*......................................................................................................................................................
        // sub x22, x14, x20         // ...*.....................................................................................................................................................
        // add x20, x14, x20         // ...*.....................................................................................................................................................
        // sub x14, x24, x9          // ....*....................................................................................................................................................
        // mul x15, x15, x29         // ......*..................................................................................................................................................
        // add x24, x24, x9          // .....*...................................................................................................................................................
        // srai x9, x26, 32          // .....*...................................................................................................................................................
        // addi x26, x13, 8          // ...........*.............................................................................................................................................
        // sub x13, x25, x12         // .*.......................................................................................................................................................
        // mul x23, x23, x30         // ........*................................................................................................................................................
        // mul x19, x19, x28         // ....*....................................................................................................................................................
        // add x25, x25, x12         // ..*......................................................................................................................................................
        // sub x12, x18, x21         // .........*...............................................................................................................................................
        // add x18, x18, x21         // ........*................................................................................................................................................
        // srai x21, x15, 32         // .............*...........................................................................................................................................
        // mulh x17, x17, x16        // ..................*......................................................................................................................................
        // srai x27, x27, 32         // ...........*.............................................................................................................................................
        // addi x21, x21, 8          // ..............*..........................................................................................................................................
        // srai x15, x19, 32         // ..........*..............................................................................................................................................
        // mulh x21, x21, x16        // ................*........................................................................................................................................
        // addi x15, x15, 8          // ............*............................................................................................................................................
        // addi x19, x9, 8           // .........*...............................................................................................................................................
        // srai x9, x23, 32          // .................*.......................................................................................................................................
        // mulh x15, x15, x16        // ..............*..........................................................................................................................................
        // add x23, x8, x17          // ........................*................................................................................................................................
        // sub x17, x8, x17          // .........................*...............................................................................................................................
        // addi x8, x27, 8           // ...............*.........................................................................................................................................
        // mulh x27, x19, x16        // ..........*..............................................................................................................................................
        // addi x19, x9, 8           // ....................*....................................................................................................................................
        // sub x9, x12, x21          // .........................*...............................................................................................................................
        // add x12, x12, x21         // ..........................*..............................................................................................................................
        // mulh x21, x19, x16        // ....................................*....................................................................................................................
        // add x19, x18, x15         // ...................*.....................................................................................................................................
        // mulh x8, x8, x16          // ..................................*......................................................................................................................
        // sub x15, x18, x15         // ...................*.....................................................................................................................................
        // ld x18, 10*8(x11)         // .............................*...........................................................................................................................
        // mul x15, x15, x1          // ....................*....................................................................................................................................
        // mul x9, x9, x18           // ................................*........................................................................................................................
        // add x18, x25, x27         // ................*........................................................................................................................................
        // sub x25, x25, x27         // ...............*.........................................................................................................................................
        // sub x27, x24, x21         // .........................................*...............................................................................................................
        // add x24, x24, x21         // ........................................*................................................................................................................
        // mul x21, x19, x4          // ..........................*..............................................................................................................................
        // sub x19, x13, x8          // ...........................................*.............................................................................................................
        // add x13, x13, x8          // .........................................*...............................................................................................................
        // mulh x26, x26, x16        // ............*............................................................................................................................................
        // srai x8, x15, 32          // ........................*................................................................................................................................
        // ld x15, 12*8(x11)         // ..........................................*..............................................................................................................
        // addi x8, x8, 8            // ...........................*.............................................................................................................................
        // mulh x8, x8, x16          // ............................*............................................................................................................................
        // srai x9, x9, 32           // ....................................*....................................................................................................................
        // addi x9, x9, 8            // ......................................*..................................................................................................................
        // srai x21, x21, 32         // .................................*.......................................................................................................................
        // mul x15, x25, x15         // ..................................................*......................................................................................................
        // add x25, x14, x26         // ............................*............................................................................................................................
        // sub x26, x14, x26         // ...........................*.............................................................................................................................
        // sub x14, x17, x8          // ................................*........................................................................................................................
        // add x8, x17, x8           // .................................*.......................................................................................................................
        // mulh x17, x9, x16         // ............................................*............................................................................................................
        // addi x9, x21, 8           // ...................................*.....................................................................................................................
        // srai x21, x15, 32         // ......................................................*..................................................................................................
        // ld x15, 14*8(x11)         // .........................................................*...............................................................................................
        // mulh x9, x9, x16          // ........................................*................................................................................................................
        // sh x14, 16*2*3(x10)       // ..................................*......................................................................................................................
        // addi x14, x21, 8          // ............................................................*............................................................................................
        // ld x21, 11*8(x11)         // ...........................................*.............................................................................................................
        // mul x15, x19, x15         // ............................................................*............................................................................................
        // sub x19, x22, x17         // ................................................*........................................................................................................
        // sh x19, 16*2*7(x10)       // .................................................*.......................................................................................................
        // mulh x14, x14, x16        // ..............................................................*..........................................................................................
        // sh x8, 16*2*2(x10)        // ...................................*.....................................................................................................................
        // add x8, x22, x17          // ..................................................*......................................................................................................
        // mul x22, x18, x21         // ..............................................*..........................................................................................................
        // srai x18, x15, 32         // ................................................................*........................................................................................
        // addi x15, x18, 8          // .................................................................*.......................................................................................
        // ld x18, 9*8(x11)          // ......................................................*..................................................................................................
        // sub x19, x23, x9          // .............................................*...........................................................................................................
        // ld x21, 13*8(x11)         // .....................................*...................................................................................................................
        // add x9, x23, x9           // .............................................*...........................................................................................................
        // sh x19, 16*2*1(x10)       // .....................................................*...................................................................................................
        // srai x23, x22, 32         // .....................................................*...................................................................................................
        // mul x18, x12, x18         // ..........................................................*..............................................................................................
        // sh x9, 16*2*0(x10)        // ...................................................*.....................................................................................................
        // sub x12, x27, x14         // ....................................................................*....................................................................................
        // add x27, x27, x14         // .......................................................................*.................................................................................
        // mul x14, x13, x21         // ..........................................*..............................................................................................................
        // addi x9, x23, 8           // .......................................................*.................................................................................................
        // sh x12, 16*2*11(x10)      // .......................................................................*.................................................................................
        // mulh x19, x9, x16         // ........................................................*................................................................................................
        // srai x22, x18, 32         // .................................................................*.......................................................................................
        // sh x27, 16*2*10(x10)      // ........................................................................*................................................................................
        // addi x18, x22, 8          // ....................................................................*....................................................................................
        // srai x27, x14, 32         // .................................................*.......................................................................................................
        // mulh x13, x18, x16        // .....................................................................*...................................................................................
        // sh x8, 16*2*6(x10)        // ...........................................................*.............................................................................................
        // addi x9, x27, 8           // ...................................................*.....................................................................................................
        // add x18, x24, x19         // .............................................................*...........................................................................................
        // mulh x17, x15, x16        // ..................................................................*......................................................................................
        // sh x18, 16*2*8(x10)       // ......................................................................*..................................................................................
        // sub x21, x24, x19         // .............................................................*...........................................................................................
        // mulh x23, x9, x16         // ....................................................*....................................................................................................
        // sh x21, 16*2*9(x10)       // ...................................................................*.....................................................................................
        // sub x15, x20, x13         // ..........................................................................*..............................................................................
        // add x20, x20, x13         // .........................................................................*...............................................................................
        // sub x13, x26, x17         // ........................................................................*................................................................................
        // sh x15, 16*2*5(x10)       // ...........................................................................*.............................................................................
        // add x26, x26, x17         // ......................................................................*..................................................................................
        // sh x13, 16*2*15(x10)      // ..........................................................................*..............................................................................
        // add x12, x25, x23         // ........................................................*................................................................................................
        // sh x26, 16*2*14(x10)      // .........................................................................*...............................................................................
        // sh x12, 16*2*12(x10)      // ..................................................................*......................................................................................
        // sub x22, x25, x23         // .........................................................*...............................................................................................
        // sh x22, 16*2*13(x10)      // ..........................................................*..............................................................................................
        // sh x20, 16*2*4(x10)       // ............................................................................*............................................................................
        // addi x10, x10, -2         // ............................................................................*............................................................................
        // lh x17, 16*2*12(x10)      // .................................................................................*.......................................................................
        // lh x12, 16*2*8(x10)       // .............................................................................*...........................................................................
        // lh x27, 16*2*9(x10)       // ..................................................................................*......................................................................
        // mul x20, x17, x5          // ....................................................................................................*....................................................
        // lh x25, 16*2*11(x10)      // ................................................................................*........................................................................
        // lh x21, 16*2*13(x10)      // ...............................................................................*.........................................................................
        // mul x24, x12, x5          // ................................................................................*........................................................................
        // lh x14, 16*2*14(x10)      // ...................................................................................*.....................................................................
        // lh x26, 16*2*10(x10)      // ..............................................................................*..........................................................................
        // mul x12, x27, x5          // ........................................................................................*................................................................
        // srai x8, x20, 32          // ........................................................................................................*................................................
        // mul x25, x25, x5          // ......................................................................................*..................................................................
        // srai x13, x24, 32         // .......................................................................................*.................................................................
        // srai x18, x12, 32         // ...............................................................................................*.........................................................
        // addi x27, x8, 8           // .........................................................................................................*...............................................
        // mul x8, x14, x5           // ...........................................................................................*.............................................................
        // lh x23, 16*2*4(x10)       // ..................................................................................................*......................................................
        // lh x20, 16*2*15(x10)      // .......................................................................................................*.................................................
        // mul x24, x21, x5          // ....................................................................................*....................................................................
        // addi x21, x18, 8          // .................................................................................................*.......................................................
        // addi x18, x13, 8          // .........................................................................................*...............................................................
        // mul x13, x26, x5          // ..................................................................................*......................................................................
        // mulh x19, x27, x16        // ............................................................................................................*............................................
        // srai x14, x13, 32         // ......................................................................................*..................................................................
        // srai x15, x8, 32          // ...............................................................................................*.........................................................
        // srai x12, x24, 32         // ........................................................................................*................................................................
        // srai x27, x25, 32         // ..........................................................................................*..............................................................
        // mul x24, x20, x5          // ..........................................................................................................*..............................................
        // addi x8, x15, 8           // .................................................................................................*.......................................................
        // addi x13, x14, 8          // .........................................................................................*...............................................................
        // mulh x20, x18, x16        // .............................................................................................*...........................................................
        // addi x27, x27, 8          // ...........................................................................................*.............................................................
        // addi x26, x12, 8          // ..........................................................................................*..............................................................
        // sub x12, x23, x19         // .................................................................................................................*.......................................
        // mulh x22, x27, x16        // ................................................................................................*........................................................
        // add x25, x23, x19         // ................................................................................................................*........................................
        // srai x18, x24, 32         // ..............................................................................................................*..........................................
        // lh x19, 16*2*0(x10)       // ................................................................................................*........................................................
        // mulh x13, x13, x16        // ........................................................................................................*................................................
        // lh x17, 16*2*3(x10)       // ............................................................................................*............................................................
        // lh x15, 16*2*5(x10)       // ....................................................................................................*....................................................
        // addi x18, x18, 8          // ....................................................................................................................*....................................
        // mulh x14, x8, x16         // ......................................................................................................*..................................................
        // add x8, x19, x20          // ...................................................................................................*.....................................................
        // sub x24, x19, x20         // ...................................................................................................*.....................................................
        // mul x9, x12, x7           // ............................................................................................................................*............................
        // sub x27, x17, x22         // .....................................................................................................*...................................................
        // add x23, x17, x22         // .....................................................................................................*...................................................
        // lh x19, 16*2*6(x10)       // ......................................................................................................*..................................................
        // mulh x12, x21, x16        // ......................................................................................................................*..................................
        // lh x21, 16*2*7(x10)       // ............................................................................................................*............................................
        // lh x20, 16*2*2(x10)       // ...........................................................................................................*.............................................
        // mul x25, x25, x6          // ..................................................................................................................*......................................
        // sub x17, x19, x14         // ..........................................................................................................*..............................................
        // add x14, x19, x14         // ...........................................................................................................*.............................................
        // srai x9, x9, 32           // ................................................................................................................................*........................
        // mulh x19, x18, x16        // ..........................................................................................................................*..............................
        // mul x22, x14, x6          // ....................................................................................................................*....................................
        // srai x14, x25, 32         // ...........................................................................................................................*.............................
        // add x18, x21, x19         // ..............................................................................................................................*..........................
        // sub x25, x21, x19         // .................................................................................................................................*.......................
        // add x21, x20, x13         // ...............................................................................................................*.........................................
        // mulh x19, x26, x16        // ..................................................................................................*......................................................
        // sub x26, x20, x13         // ..................................................................................................................*......................................
        // addi x13, x14, 8          // .......................................................................................................................................*.................
        // mul x14, x17, x7          // ................................................................................................................*........................................
        // srai x22, x22, 32         // ........................................................................................................................*................................
        // add x20, x15, x19         // .......................................................................................................*.................................................
        // sub x19, x15, x19         // .........................................................................................................*...............................................
        // mul x15, x18, x6          // ....................................................................................................................................*....................
        // addi x22, x22, 8          // .........................................................................................................................*...............................
        // mulh x22, x22, x16        // ......................................................................................................................................*..................
        // mul x19, x19, x7          // ..............................................................................................................*..........................................
        // lh x18, 16*2*1(x10)       // ...................................................................................................................................................*.....
        // mul x17, x25, x7          // ..................................................................................................................................*......................
        // add x25, x21, x22         // ...........................................................................................................................................*.............
        // sub x21, x21, x22         // ..........................................................................................................................................*..............
        // srai x22, x15, 32         // ........................................................................................................................................*................
        // mul x15, x25, x28         // ..............................................................................................................................................*..........
        // sub x25, x18, x12         // .......................................................................................................................................................*.
        // mul x20, x20, x6          // ........................................................................................................................*................................
        // add x18, x18, x12         // .......................................................................................................................................................*.
        // addi x12, x22, 8          // ...........................................................................................................................................*.............
        // srai x22, x17, 32         // ......................................................................................................................................*..................
        // srai x17, x15, 32         // ...................................................................................................................................................*.....
        // mulh x15, x13, x16        // ..........................................................................................................................................*..............
        // addi x13, x22, 8          // .......................................................................................................................................*.................
        // srai x22, x14, 32         // .....................................................................................................................*...................................
        // addi x9, x9, 8            // ..................................................................................................................................*......................
        // mul x21, x21, x29         // ............................................................................................................................................*............
        // srai x19, x19, 32         // .....................................................................................................................*...................................
        // mulh x13, x13, x16        // ........................................................................................................................................*................
        // addi x17, x17, 8          // ........................................................................................................................................................*
        // sub x14, x8, x15          // ..............................................................................................................................................*..........
        // add x8, x8, x15           // ................................................................................................................................................*........
        // mulh x15, x12, x16        // ................................................................................................................................................*........
        // addi x12, x19, 8          // ..........................................................................................................................*..............................
        // srai x19, x21, 32         // .................................................................................................................................................*.......
        // srai x21, x20, 32         // .................................................................................................................................*.......................
        // mulh x9, x9, x16          // ....................................................................................................................................................*....
        // addi x20, x19, 8          // ..................................................................................................................................................*......
        // addi x22, x22, 8          // ......................................................................................................................*..................................
        // mulh x22, x22, x16        // ................................................................................................................................*........................
        // addi x21, x21, 8          // ...............................................................................................................................................*.........
        // mulh x20, x20, x16        // ......................................................................................................................................................*..
        // add x19, x23, x15         // ....................................................................................................................................................*....
        // sub x15, x23, x15         // .....................................................................................................................................................*...
        // add x23, x26, x22         // .....................................................................................................................................................*...
        // mulh x12, x12, x16        // ..............................................................................................................................*..........................
        // sub x26, x26, x22         // ......................................................................................................................................................*..
        // sub x22, x27, x13         // ............................................................................................................................................*............
        // add x27, x27, x13         // .............................................................................................................................................*...........
        // mul x26, x26, x31         // ........................................................................................................................................................*
        // mulh x21, x21, x16        // ..................................................................................................................................................*......

        addi gp, gp, -1
        bgegp, zero, ntt_rv64im_loop1
        srai x13, x26, 32           // .................................................................................*................................................................
        mul x26, x27, x30           // .................................................................................*................................................................
        mul x27, x22, x31           // ...................................................................................*..............................................................
        sub x22, x14, x20           // ...................................................................................*..............................................................
        add x20, x14, x20           // ....................................................................................*.............................................................
        sub x14, x24, x9            // ....................................................................................*.............................................................
        mul x15, x15, x29           // .....................................................................................*............................................................
        add x24, x24, x9            // .....................................................................................*............................................................
        srai x9, x26, 32            // ......................................................................................*...........................................................
        addi x26, x13, 8            // ......................................................................................*...........................................................
        sub x13, x25, x12           // .......................................................................................*..........................................................
        mul x23, x23, x30           // .......................................................................................*..........................................................
        mul x19, x19, x28           // .........................................................................................*........................................................
        add x25, x25, x12           // .........................................................................................*........................................................
        sub x12, x18, x21           // ..........................................................................................*.......................................................
        add x18, x18, x21           // ..........................................................................................*.......................................................
        srai x21, x15, 32           // ...........................................................................................*......................................................
        mulh x17, x17, x16          // ...........................................................................................*......................................................
        srai x27, x27, 32           // ............................................................................................*.....................................................
        addi x21, x21, 8            // ............................................................................................*.....................................................
        srai x15, x19, 32           // .............................................................................................*....................................................
        mulh x21, x21, x16          // .............................................................................................*....................................................
        addi x15, x15, 8            // ..............................................................................................*...................................................
        addi x19, x9, 8             // ..............................................................................................*...................................................
        srai x9, x23, 32            // ...............................................................................................*..................................................
        mulh x15, x15, x16          // ...............................................................................................*..................................................
        add x23, x8, x17            // ................................................................................................*.................................................
        sub x17, x8, x17            // ................................................................................................*.................................................
        addi x8, x27, 8             // .................................................................................................*................................................
        mulh x27, x19, x16          // .................................................................................................*................................................
        addi x19, x9, 8             // ..................................................................................................*...............................................
        sub x9, x12, x21            // ..................................................................................................*...............................................
        add x12, x12, x21           // ...................................................................................................*..............................................
        mulh x21, x19, x16          // ...................................................................................................*..............................................
        add x19, x18, x15           // ....................................................................................................*.............................................
        mulh x8, x8, x16            // .....................................................................................................*............................................
        sub x15, x18, x15           // .....................................................................................................*............................................
        ld x18, 10*8(x11)           // ......................................................................................................*...........................................
        mul x15, x15, x1            // .......................................................................................................*..........................................
        mul x9, x9, x18             // .........................................................................................................*........................................
        add x18, x25, x27           // .........................................................................................................*........................................
        sub x25, x25, x27           // ..........................................................................................................*.......................................
        sub x27, x24, x21           // ..........................................................................................................*.......................................
        add x24, x24, x21           // ...........................................................................................................*......................................
        mul x21, x19, x4            // ...........................................................................................................*......................................
        sub x19, x13, x8            // ............................................................................................................*.....................................
        add x13, x13, x8            // ............................................................................................................*.....................................
        mulh x26, x26, x16          // .............................................................................................................*....................................
        srai x8, x15, 32            // .............................................................................................................*....................................
        ld x15, 12*8(x11)           // ..............................................................................................................*...................................
        addi x8, x8, 8              // ..............................................................................................................*...................................
        mulh x8, x8, x16            // ...............................................................................................................*..................................
        srai x9, x9, 32             // ...............................................................................................................*..................................
        addi x9, x9, 8              // ................................................................................................................*.................................
        srai x21, x21, 32           // ................................................................................................................*.................................
        mul x15, x25, x15           // .................................................................................................................*................................
        add x25, x14, x26           // .................................................................................................................*................................
        sub x26, x14, x26           // ..................................................................................................................*...............................
        sub x14, x17, x8            // ...................................................................................................................*..............................
        add x8, x17, x8             // ...................................................................................................................*..............................
        mulh x17, x9, x16           // ....................................................................................................................*.............................
        addi x9, x21, 8             // ....................................................................................................................*.............................
        srai x21, x15, 32           // .....................................................................................................................*............................
        ld x15, 14*8(x11)           // .....................................................................................................................*............................
        mulh x9, x9, x16            // ......................................................................................................................*...........................
        sh x14, 16*2*3(x10)         // ......................................................................................................................*...........................
        addi x14, x21, 8            // .......................................................................................................................*..........................
        ld x21, 11*8(x11)           // .......................................................................................................................*..........................
        mul x15, x19, x15           // ........................................................................................................................*.........................
        sub x19, x22, x17           // ........................................................................................................................*.........................
        sh x19, 16*2*7(x10)         // .........................................................................................................................*........................
        mulh x14, x14, x16          // ..........................................................................................................................*.......................
        sh x8, 16*2*2(x10)          // ..........................................................................................................................*.......................
        add x8, x22, x17            // ...........................................................................................................................*......................
        mul x22, x18, x21           // ............................................................................................................................*.....................
        srai x18, x15, 32           // ............................................................................................................................*.....................
        addi x15, x18, 8            // .............................................................................................................................*....................
        ld x18, 9*8(x11)            // .............................................................................................................................*....................
        sub x19, x23, x9            // ..............................................................................................................................*...................
        ld x21, 13*8(x11)           // ..............................................................................................................................*...................
        add x9, x23, x9             // ...............................................................................................................................*..................
        sh x19, 16*2*1(x10)         // ...............................................................................................................................*..................
        srai x23, x22, 32           // ................................................................................................................................*.................
        mul x18, x12, x18           // ................................................................................................................................*.................
        sh x9, 16*2*0(x10)          // .................................................................................................................................*................
        sub x12, x27, x14           // .................................................................................................................................*................
        add x27, x27, x14           // ..................................................................................................................................*...............
        mul x14, x13, x21           // ..................................................................................................................................*...............
        addi x9, x23, 8             // ...................................................................................................................................*..............
        sh x12, 16*2*11(x10)        // ...................................................................................................................................*..............
        mulh x19, x9, x16           // ....................................................................................................................................*.............
        srai x22, x18, 32           // ....................................................................................................................................*.............
        sh x27, 16*2*10(x10)        // .....................................................................................................................................*............
        addi x18, x22, 8            // .....................................................................................................................................*............
        srai x27, x14, 32           // ......................................................................................................................................*...........
        mulh x13, x18, x16          // ......................................................................................................................................*...........
        sh x8, 16*2*6(x10)          // .......................................................................................................................................*..........
        addi x9, x27, 8             // .......................................................................................................................................*..........
        add x18, x24, x19           // ........................................................................................................................................*.........
        mulh x17, x15, x16          // ........................................................................................................................................*.........
        sh x18, 16*2*8(x10)         // .........................................................................................................................................*........
        sub x21, x24, x19           // .........................................................................................................................................*........
        mulh x23, x9, x16           // ..........................................................................................................................................*.......
        sh x21, 16*2*9(x10)         // ..........................................................................................................................................*.......
        sub x15, x20, x13           // ...........................................................................................................................................*......
        add x20, x20, x13           // ...........................................................................................................................................*......
        sub x13, x26, x17           // ............................................................................................................................................*.....
        sh x15, 16*2*5(x10)         // ............................................................................................................................................*.....
        add x26, x26, x17           // .............................................................................................................................................*....
        sh x13, 16*2*15(x10)        // .............................................................................................................................................*....
        add x12, x25, x23           // ..............................................................................................................................................*...
        sh x26, 16*2*14(x10)        // ..............................................................................................................................................*...
        sh x12, 16*2*12(x10)        // ...............................................................................................................................................*..
        sub x22, x25, x23           // ...............................................................................................................................................*..
        sh x22, 16*2*13(x10)        // ................................................................................................................................................*.
        sh x20, 16*2*4(x10)         // .................................................................................................................................................*
  addi a1, a1, 15*8
  ### LAYER 5-6-7
  addi gp, x0, 16
        lh x1, 1*2*0(x10)          // *.....................................................................................................................
        ld x5, 0*8(x11)            // .*....................................................................................................................
        lh x31, 1*2*9(x10)         // ..*...................................................................................................................
        lh x6, 1*2*8(x10)          // ...*..................................................................................................................
        lh x8, 1*2*13(x10)         // ....*.................................................................................................................
        mul x4, x31, x5            // .....*................................................................................................................
        lh x13, 1*2*10(x10)        // .....*................................................................................................................
        lh x9, 1*2*11(x10)         // ......*...............................................................................................................
        mul x19, x6, x5            // .......*..............................................................................................................
        ld x6, 1*8(x11)            // .......*..............................................................................................................
        mul x22, x13, x5           // .........*............................................................................................................
        srai x20, x4, 32           // .........*............................................................................................................
        srai x18, x19, 32          // ...........*..........................................................................................................
        mul x31, x8, x5            // ...........*..........................................................................................................
        lh x21, 1*2*12(x10)        // ............*.........................................................................................................
        addi x7, x20, 8            // ............*.........................................................................................................
        mul x19, x9, x5            // .............*........................................................................................................
        srai x9, x22, 32           // .............*........................................................................................................
        mul x8, x21, x5            // ...............*......................................................................................................
        addi x20, x18, 8           // ...............*......................................................................................................
        lh x22, 1*2*15(x10)        // ................*.....................................................................................................
        srai x4, x19, 32           // .................*....................................................................................................
        mulh x28, x7, x16          // .................*....................................................................................................
        srai x23, x31, 32          // ..................*...................................................................................................
        lh x14, 1*2*14(x10)        // ..................*...................................................................................................
        addi x30, x4, 8            // ...................*..................................................................................................
        addi x23, x23, 8           // ...................*..................................................................................................
        mul x31, x22, x5           // ....................*.................................................................................................
        mulh x20, x20, x16         // ......................*...............................................................................................
        srai x12, x31, 32          // ........................*.............................................................................................
        lh x22, 1*2*1(x10)         // ........................*.............................................................................................
        srai x15, x8, 32           // .........................*............................................................................................
        mul x14, x14, x5           // .........................*............................................................................................
        addi x13, x9, 8            // ..........................*...........................................................................................
        addi x31, x12, 8           // ..........................*...........................................................................................
        addi x21, x15, 8           // ...........................*..........................................................................................
        add x8, x1, x20            // ...........................*..........................................................................................
        sub x24, x1, x20           // ............................*.........................................................................................
        mulh x23, x23, x16         // ............................*.........................................................................................
        sub x25, x22, x28          // .............................*........................................................................................
        add x9, x22, x28           // .............................*........................................................................................
        mulh x5, x21, x16          // ..............................*.......................................................................................
        srai x27, x14, 32          // ..............................*.......................................................................................
        addi x7, x27, 8            // ...............................*......................................................................................
        lh x28, 1*2*5(x10)         // ...............................*......................................................................................
        mulh x29, x30, x16         // ................................*.....................................................................................
        mulh x14, x13, x16         // ..................................*...................................................................................
        add x17, x28, x23          // ..................................*...................................................................................
        sub x28, x28, x23          // ...................................*..................................................................................
        lh x21, 1*2*4(x10)         // ...................................*..................................................................................
        mulh x22, x7, x16          // ....................................*.................................................................................
        lh x20, 1*2*2(x10)         // ....................................*.................................................................................
        lh x15, 1*2*6(x10)         // .....................................*................................................................................
        mulh x1, x31, x16          // ......................................*...............................................................................
        sub x12, x21, x5           // ......................................*...............................................................................
        add x19, x21, x5           // .......................................*..............................................................................
        mul x19, x19, x6           // ........................................*.............................................................................
        sub x26, x20, x14          // ........................................*.............................................................................
        add x18, x20, x14          // .........................................*............................................................................
        ld x7, 2*8(x11)            // .........................................*............................................................................
        mul x20, x17, x6           // ..........................................*...........................................................................
        sub x17, x15, x22          // ..........................................*...........................................................................
        add x14, x15, x22          // ...........................................*..........................................................................
        lh x27, 1*2*7(x10)         // ...........................................*..........................................................................
        mul x5, x28, x7            // ............................................*.........................................................................
        mul x21, x17, x7           // ..............................................*.......................................................................
        add x4, x27, x1            // ..............................................*.......................................................................
        sub x13, x27, x1           // ...............................................*......................................................................
        srai x15, x19, 32          // ...............................................*......................................................................
        srai x27, x20, 32          // ................................................*.....................................................................
        mul x23, x12, x7           // ................................................*.....................................................................
        srai x5, x5, 32            // .................................................*....................................................................
        lh x22, 1*2*3(x10)         // .................................................*....................................................................
        mul x12, x14, x6           // ..................................................*...................................................................
        srai x28, x23, 32          // ....................................................*.................................................................
        mul x23, x4, x6            // ....................................................*.................................................................
        addi x1, x27, 8            // .....................................................*................................................................
        addi x30, x15, 8           // .....................................................*................................................................
        mul x13, x13, x7           // ......................................................*...............................................................
        add x6, x22, x29           // ......................................................*...............................................................
        sub x27, x22, x29          // .......................................................*..............................................................
        addi x14, x5, 8            // .......................................................*..............................................................
        mulh x19, x1, x16          // ........................................................*.............................................................
        srai x4, x23, 32           // ........................................................*.............................................................
        mulh x7, x30, x16          // ..........................................................*...........................................................
        srai x15, x12, 32          // ..........................................................*...........................................................
        addi x4, x4, 8             // ...........................................................*..........................................................
        addi x12, x28, 8           // ...........................................................*..........................................................
        mulh x29, x4, x16          // ............................................................*.........................................................
        srai x31, x21, 32          // ............................................................*.........................................................
        sub x21, x9, x19           // .............................................................*........................................................
        add x28, x9, x19           // .............................................................*........................................................
        addi gp, gp, -1
ntt_rv64im_loop2:
                                   // Instructions:    185
                                   // Expected cycles: 123
                                   // Expected IPC:    1.50

                                   // ---------------------------------------------------- cycle (expected) ---------------------------------------------------->
                                   // 0                        25                       50                       75                       100
                                   // |------------------------|------------------------|------------------------|------------------------|----------------------
        mulh x9, x14, x16          // *..........................................................................................................................
        add x23, x6, x29           // *..........................................................................................................................
        sub x20, x8, x7            // .*.........................................................................................................................
        add x4, x8, x7             // .*.........................................................................................................................
        sub x17, x6, x29           // ..*........................................................................................................................
        mulh x8, x12, x16          // ..*........................................................................................................................
        addi x29, x31, 8           // ...*.......................................................................................................................
        addi x22, x15, 8           // ...*.......................................................................................................................
        srai x1, x13, 32           // ....*......................................................................................................................
        mulh x14, x22, x16         // ....*......................................................................................................................
        sub x13, x25, x9           // .....*.....................................................................................................................
        add x25, x25, x9           // .....*.....................................................................................................................
        ld x31, 4*8(x11)           // ......*....................................................................................................................
        sub x12, x24, x8           // ......*....................................................................................................................
        mulh x5, x29, x16          // .......*...................................................................................................................
        add x24, x24, x8           // .......*...................................................................................................................
        addi x6, x1, 8             // ........*..................................................................................................................
        ld x9, 3*8(x11)            // ........*..................................................................................................................
        add x19, x26, x5           // ...........*...............................................................................................................
        mul x30, x17, x31          // ...........*...............................................................................................................
        sub x15, x18, x14          // ............*..............................................................................................................
        ld x7, 5*8(x11)            // ............*..............................................................................................................
        add x29, x18, x14          // .............*.............................................................................................................
        mul x31, x15, x31          // .............*.............................................................................................................
        sub x26, x26, x5           // ..............*............................................................................................................
        ld x15, 6*8(x11)           // ..............*............................................................................................................
        mulh x18, x6, x16          // ...............*...........................................................................................................
        srai x1, x30, 32           // ...............*...........................................................................................................
        mul x22, x19, x7           // .................*.........................................................................................................
        sub x19, x27, x18          // ...................*.......................................................................................................
        add x14, x27, x18          // ...................*.......................................................................................................
        addi x6, x1, 8             // ....................*......................................................................................................
        mul x18, x14, x7           // ....................*......................................................................................................
        srai x17, x31, 32          // .....................*.....................................................................................................
        addi x31, x17, 8           // ......................*....................................................................................................
        mul x17, x26, x15          // ......................*....................................................................................................
        srai x30, x22, 32          // .......................*...................................................................................................
        mul x5, x19, x15           // ........................*..................................................................................................
        addi x19, x30, 8           // ........................*..................................................................................................
        addi x11, x11, 7*8         // .........................*.................................................................................................
        srai x15, x18, 32          // .........................*.................................................................................................
        srai x18, x17, 32          // ..........................*................................................................................................
        mulh x27, x6, x16          // ..........................*................................................................................................
        addi x26, x15, 8           // ...........................*...............................................................................................
        addi x30, x18, 8           // ...........................*...............................................................................................
        mul x22, x23, x9           // ............................*..............................................................................................
        srai x22, x22, 32          // ................................*..........................................................................................
        mul x23, x29, x9           // ................................*..........................................................................................
        srai x6, x5, 32            // .................................*.........................................................................................
        sub x29, x21, x27          // .................................*.........................................................................................
        mulh x14, x26, x16         // ..................................*........................................................................................
        add x26, x21, x27          // ..................................*........................................................................................
        addi x15, x22, 8           // ...................................*.......................................................................................
        addi x18, x6, 8            // ...................................*.......................................................................................
        mulh x22, x19, x16         // ....................................*......................................................................................
        srai x21, x23, 32          // ....................................*......................................................................................
        add x9, x24, x22           // ........................................*..................................................................................
        mulh x17, x30, x16         // ........................................*..................................................................................
        sub x23, x25, x14          // .........................................*.................................................................................
        add x14, x25, x14          // .........................................*.................................................................................
        sh x26, 1*2*5(x10)         // ..........................................*................................................................................
        sub x7, x24, x22           // ..........................................*................................................................................
        sh x29, 1*2*7(x10)         // ...........................................*...............................................................................
        mulh x1, x18, x16          // ...........................................*...............................................................................
        sh x7, 1*2*10(x10)         // ............................................*..............................................................................
        mulh x18, x31, x16         // .............................................*.............................................................................
        sh x23, 1*2*11(x10)        // .............................................*.............................................................................
        addi x21, x21, 8           // ..............................................*............................................................................
        sh x14, 1*2*9(x10)         // ..............................................*............................................................................
        mulh x21, x21, x16         // ...............................................*...........................................................................
        ld x5, 0*8(x11)            // ...............................................*...........................................................................
        sh x9, 1*2*8(x10)          // ................................................*..........................................................................
        add x24, x12, x17          // ................................................*..........................................................................
        sh x24, 1*2*12(x10)        // .................................................*.........................................................................
        add x31, x13, x1           // .................................................*.........................................................................
        sub x19, x13, x1           // ..................................................*........................................................................
        add x24, x4, x21           // ...................................................*.......................................................................
        sh x19, 1*2*15(x10)        // ...................................................*.......................................................................
        sub x21, x4, x21           // ....................................................*......................................................................
        sh x24, 1*2*0(x10)         // ....................................................*......................................................................
        sh x21, 1*2*2(x10)         // .....................................................*.....................................................................
        mulh x21, x15, x16         // .....................................................*.....................................................................
        sub x27, x20, x18          // ......................................................*....................................................................
        add x20, x20, x18          // ......................................................*....................................................................
        sh x27, 1*2*6(x10)         // .......................................................*...................................................................
        sh x31, 1*2*13(x10)        // ........................................................*..................................................................
        sub x23, x28, x21          // .........................................................*.................................................................
        add x6, x28, x21           // .........................................................*.................................................................
        sh x20, 1*2*4(x10)         // ..........................................................*................................................................
        sub x27, x12, x17          // ..........................................................*................................................................
        sh x23, 1*2*3(x10)         // ...........................................................*...............................................................
        sh x6, 1*2*1(x10)          // ............................................................*..............................................................
        sh x27, 1*2*14(x10)        // .............................................................*.............................................................
        addi x10, x10, 32          // .............................................................*.............................................................
        lh x20, 1*2*8(x10)         // ..............................................................*............................................................
        lh x19, 1*2*15(x10)        // ...............................................................*...........................................................
        lh x29, 1*2*12(x10)        // ................................................................*..........................................................
        mul x14, x20, x5           // .................................................................*.........................................................
        lh x20, 1*2*11(x10)        // .................................................................*.........................................................
        lh x13, 1*2*9(x10)         // ..................................................................*........................................................
        mul x25, x29, x5           // ...................................................................*.......................................................
        lh x29, 1*2*14(x10)        // ...................................................................*.......................................................
        srai x30, x14, 32          // .....................................................................*.....................................................
        mul x18, x19, x5           // .....................................................................*.....................................................
        srai x27, x25, 32          // .......................................................................*...................................................
        addi x4, x30, 8            // .......................................................................*...................................................
        mul x19, x13, x5           // ........................................................................*..................................................
        addi x13, x27, 8           // ........................................................................*..................................................
        lh x24, 1*2*10(x10)        // .........................................................................*.................................................
        mul x31, x29, x5           // ..........................................................................*................................................
        srai x23, x18, 32          // ..........................................................................*................................................
        mulh x21, x4, x16          // ............................................................................*..............................................
        srai x25, x19, 32          // ............................................................................*..............................................
        addi x7, x23, 8            // .............................................................................*.............................................
        srai x1, x31, 32           // ..............................................................................*............................................
        mulh x31, x13, x16         // ..............................................................................*............................................
        lh x12, 1*2*0(x10)         // ...............................................................................*...........................................
        lh x28, 1*2*4(x10)         // ................................................................................*..........................................
        addi x13, x25, 8           // ................................................................................*..........................................
        mul x26, x20, x5           // .................................................................................*.........................................
        mulh x25, x13, x16         // ...................................................................................*.......................................
        srai x29, x26, 32          // .....................................................................................*.....................................
        add x22, x28, x31          // .....................................................................................*.....................................
        lh x19, 1*2*13(x10)        // ......................................................................................*....................................
        addi x4, x1, 8             // ......................................................................................*....................................
        mul x30, x24, x5           // .......................................................................................*...................................
        add x8, x12, x21           // .......................................................................................*...................................
        sub x24, x12, x21          // ........................................................................................*..................................
        sub x28, x28, x31          // ........................................................................................*..................................
        mulh x13, x7, x16          // .........................................................................................*.................................
        mul x7, x19, x5            // ...........................................................................................*...............................
        ld x31, 2*8(x11)           // ...........................................................................................*...............................
        srai x26, x30, 32          // ............................................................................................*..............................
        lh x30, 1*2*1(x10)         // ............................................................................................*..............................
        lh x15, 1*2*7(x10)         // .............................................................................................*.............................
        mulh x17, x4, x16          // .............................................................................................*.............................
        addi x27, x29, 8           // ..............................................................................................*............................
        ld x4, 1*8(x11)            // ..............................................................................................*............................
        mul x1, x28, x31           // ...............................................................................................*...........................
        mul x22, x22, x4           // .................................................................................................*.........................
        srai x18, x7, 32           // .................................................................................................*.........................
        addi x12, x26, 8           // ..................................................................................................*........................
        addi x28, x18, 8           // ..................................................................................................*........................
        mulh x14, x28, x16         // ...................................................................................................*.......................
        lh x21, 1*2*6(x10)         // ...................................................................................................*.......................
        add x7, x15, x13           // ....................................................................................................*......................
        lh x29, 1*2*5(x10)         // ....................................................................................................*......................
        mul x18, x7, x4            // .....................................................................................................*.....................
        sub x28, x21, x17          // ......................................................................................................*....................
        mulh x23, x12, x16         // .......................................................................................................*...................
        srai x18, x18, 32          // .........................................................................................................*.................
        add x9, x30, x25           // .........................................................................................................*.................
        sub x19, x29, x14          // ..........................................................................................................*................
        mul x28, x28, x31          // ..........................................................................................................*................
        add x14, x29, x14          // ...........................................................................................................*...............
        srai x20, x22, 32          // ...........................................................................................................*...............
        mul x19, x19, x31          // ............................................................................................................*..............
        sub x22, x15, x13          // ............................................................................................................*..............
        srai x5, x1, 32            // .............................................................................................................*.............
        addi x29, x18, 8           // .............................................................................................................*.............
        lh x15, 1*2*2(x10)         // ..............................................................................................................*............
        mul x14, x14, x4           // ..............................................................................................................*............
        addi x12, x5, 8            // ...............................................................................................................*...........
        addi x5, x20, 8            // ...............................................................................................................*...........
        mulh x27, x27, x16         // ................................................................................................................*..........
        add x6, x21, x17           // ................................................................................................................*..........
        lh x13, 1*2*3(x10)         // .................................................................................................................*.........
        sub x26, x15, x23          // .................................................................................................................*.........
        mul x4, x6, x4             // ..................................................................................................................*........
        srai x20, x14, 32          // ..................................................................................................................*........
        add x18, x15, x23          // ...................................................................................................................*.......
        addi x21, x20, 8           // ...................................................................................................................*.......
        sub x25, x30, x25          // ....................................................................................................................*......
        mulh x17, x21, x16         // ....................................................................................................................*......
        add x6, x13, x27           // .....................................................................................................................*.....
        sub x27, x13, x27          // .....................................................................................................................*.....
        mul x13, x22, x31          // ......................................................................................................................*....
        srai x30, x19, 32          // ......................................................................................................................*....
        addi x14, x30, 8           // .......................................................................................................................*...
        srai x31, x28, 32          // .......................................................................................................................*...
        mulh x29, x29, x16         // ........................................................................................................................*..
        add x28, x9, x17           // ........................................................................................................................*..
        sub x21, x9, x17           // .........................................................................................................................*.
        mulh x7, x5, x16           // ..........................................................................................................................*
        srai x15, x4, 32           // ..........................................................................................................................*

                                    // ---------------------------------------------------- cycle (expected) ---------------------------------------------------->
                                    // 0                        25                       50                       75                       100
                                    // |------------------------|------------------------|------------------------|------------------------|----------------------
        // addi x30, x15, 8         // ...*.......................................................................................................................
        // mulh x22, x12, x16       // ..*........................................................................................................................
        // add x4, x8, x7           // .*.........................................................................................................................
        // sub x20, x8, x7          // .*.........................................................................................................................
        // srai x8, x13, 32         // ....*......................................................................................................................
        // mulh x7, x30, x16        // ....*......................................................................................................................
        // ld x23, 4*8(x11)         // ......*....................................................................................................................
        // sub x17, x6, x29         // ..*........................................................................................................................
        // add x9, x6, x29          // *..........................................................................................................................
        // mulh x30, x14, x16       // *..........................................................................................................................
        // addi x1, x8, 8           // ........*..................................................................................................................
        // mul x8, x17, x23         // ...........*...............................................................................................................
        // sub x5, x18, x7          // ............*..............................................................................................................
        // add x7, x18, x7          // .............*.............................................................................................................
        // mul x6, x5, x23          // .............*.............................................................................................................
        // sub x13, x25, x30        // .....*.....................................................................................................................
        // ld x18, 3*8(x11)         // ........*..................................................................................................................
        // add x25, x25, x30        // .....*.....................................................................................................................
        // sub x12, x24, x22        // ......*....................................................................................................................
        // mul x23, x7, x18         // ................................*..........................................................................................
        // srai x8, x8, 32          // ...............*...........................................................................................................
        // add x24, x24, x22        // .......*...................................................................................................................
        // srai x14, x6, 32         // .....................*.....................................................................................................
        // addi x7, x31, 8          // ...*.......................................................................................................................
        // mulh x15, x1, x16        // ...............*...........................................................................................................
        // addi x6, x8, 8           // ....................*......................................................................................................
        // addi x30, x14, 8         // ......................*....................................................................................................
        // mul x1, x9, x18          // ............................*..............................................................................................
        // mulh x14, x30, x16       // .............................................*.............................................................................
        // sub x30, x27, x15        // ...................*.......................................................................................................
        // add x8, x27, x15         // ...................*.......................................................................................................
        // ld x27, 5*8(x11)         // ............*..............................................................................................................
        // srai x31, x1, 32         // ................................*..........................................................................................
        // mulh x9, x7, x16         // .......*...................................................................................................................
        // srai x23, x23, 32        // ....................................*......................................................................................
        // ld x17, 6*8(x11)         // ..............*............................................................................................................
        // add x15, x20, x14        // ......................................................*....................................................................
        // mul x5, x8, x27          // ....................*......................................................................................................
        // srai x7, x5, 32          // .........................*.................................................................................................
        // mul x29, x30, x17        // ........................*..................................................................................................
        // addi x1, x23, 8          // ..............................................*............................................................................
        // sub x20, x20, x14        // ......................................................*....................................................................
        // mulh x5, x6, x16         // ..........................*................................................................................................
        // add x30, x26, x9         // ...........*...............................................................................................................
        // sub x22, x26, x9         // ..............*............................................................................................................
        // addi x31, x31, 8         // ...................................*.......................................................................................
        // mul x23, x30, x27        // .................*.........................................................................................................
        // add x27, x21, x5         // ..................................*........................................................................................
        // mul x6, x22, x17         // ......................*....................................................................................................
        // sub x5, x21, x5          // .................................*.........................................................................................
        // addi x21, x7, 8          // ...........................*...............................................................................................
        // addi x11, x11, 7*8       // .........................*.................................................................................................
        // sh x20, 1*2*6(x10)       // .......................................................*...................................................................
        // mulh x26, x31, x16       // .....................................................*.....................................................................
        // sh x27, 1*2*5(x10)       // ..........................................*................................................................................
        // srai x17, x6, 32         // ..........................*................................................................................................
        // mulh x31, x1, x16        // ...............................................*...........................................................................
        // srai x1, x29, 32         // .................................*.........................................................................................
        // srai x27, x23, 32        // .......................*...................................................................................................
        // sh x15, 1*2*4(x10)       // ..........................................................*................................................................
        // addi x20, x27, 8         // ........................*..................................................................................................
        // mulh x15, x21, x16       // ..................................*........................................................................................
        // sh x5, 1*2*7(x10)        // ...........................................*...............................................................................
        // addi x23, x1, 8          // ...................................*.......................................................................................
        // sub x8, x4, x31          // ....................................................*......................................................................
        // mulh x22, x23, x16       // ...........................................*...............................................................................
        // addi x5, x17, 8          // ...........................*...............................................................................................
        // sh x8, 1*2*2(x10)        // .....................................................*.....................................................................
        // mulh x5, x5, x16         // ........................................*..................................................................................
        // add x4, x4, x31          // ...................................................*.......................................................................
        // sub x31, x28, x26        // .........................................................*.................................................................
        // sh x4, 1*2*0(x10)        // ....................................................*......................................................................
        // sub x30, x13, x22        // ..................................................*........................................................................
        // add x4, x25, x15         // .........................................*.................................................................................
        // sh x30, 1*2*15(x10)      // ...................................................*.......................................................................
        // sh x4, 1*2*9(x10)        // ..............................................*............................................................................
        // mulh x4, x20, x16        // ....................................*......................................................................................
        // sh x31, 1*2*3(x10)       // ...........................................................*...............................................................
        // add x31, x13, x22        // .................................................*.........................................................................
        // sh x31, 1*2*13(x10)      // ........................................................*..................................................................
        // sub x15, x25, x15        // .........................................*.................................................................................
        // sh x15, 1*2*11(x10)      // .............................................*.............................................................................
        // add x26, x28, x26        // .........................................................*.................................................................
        // sh x26, 1*2*1(x10)       // ............................................................*..............................................................
        // add x9, x24, x4          // ........................................*..................................................................................
        // sh x9, 1*2*8(x10)        // ................................................*..........................................................................
        // sub x26, x24, x4         // ..........................................*................................................................................
        // sh x26, 1*2*10(x10)      // ............................................*..............................................................................
        // add x4, x12, x5          // ................................................*..........................................................................
        // sh x4, 1*2*12(x10)       // .................................................*.........................................................................
        // sub x27, x12, x5         // ..........................................................*................................................................
        // sh x27, 1*2*14(x10)      // .............................................................*.............................................................
        // addi x10, x10, 32        // .............................................................*.............................................................
        // lh x1, 1*2*0(x10)        // ...............................................................................*...........................................
        // ld x5, 0*8(x11)          // ...............................................*...........................................................................
        // lh x31, 1*2*9(x10)       // ..................................................................*........................................................
        // lh x6, 1*2*8(x10)        // ..............................................................*............................................................
        // lh x8, 1*2*13(x10)       // ......................................................................................*....................................
        // mul x4, x31, x5          // ........................................................................*..................................................
        // lh x13, 1*2*10(x10)      // .........................................................................*.................................................
        // lh x9, 1*2*11(x10)       // .................................................................*.........................................................
        // mul x19, x6, x5          // .................................................................*.........................................................
        // ld x6, 1*8(x11)          // ..............................................................................................*............................
        // mul x22, x13, x5         // .......................................................................................*...................................
        // srai x20, x4, 32         // ............................................................................*..............................................
        // srai x18, x19, 32        // .....................................................................*.....................................................
        // mul x31, x8, x5          // ...........................................................................................*...............................
        // lh x21, 1*2*12(x10)      // ................................................................*..........................................................
        // addi x7, x20, 8          // ................................................................................*..........................................
        // mul x19, x9, x5          // .................................................................................*.........................................
        // srai x9, x22, 32         // ............................................................................................*..............................
        // mul x8, x21, x5          // ...................................................................*.......................................................
        // addi x20, x18, 8         // .......................................................................*...................................................
        // lh x22, 1*2*15(x10)      // ...............................................................*...........................................................
        // srai x4, x19, 32         // .....................................................................................*.....................................
        // mulh x28, x7, x16        // ...................................................................................*.......................................
        // srai x23, x31, 32        // .................................................................................................*.........................
        // lh x14, 1*2*14(x10)      // ...................................................................*.......................................................
        // addi x30, x4, 8          // ..............................................................................................*............................
        // addi x23, x23, 8         // ..................................................................................................*........................
        // mul x31, x22, x5         // .....................................................................*.....................................................
        // mulh x20, x20, x16       // ............................................................................*..............................................
        // srai x12, x31, 32        // ..........................................................................*................................................
        // lh x22, 1*2*1(x10)       // ............................................................................................*..............................
        // srai x15, x8, 32         // .......................................................................*...................................................
        // mul x14, x14, x5         // ..........................................................................*................................................
        // addi x13, x9, 8          // ..................................................................................................*........................
        // addi x31, x12, 8         // .............................................................................*.............................................
        // addi x21, x15, 8         // ........................................................................*..................................................
        // add x8, x1, x20          // .......................................................................................*...................................
        // sub x24, x1, x20         // ........................................................................................*..................................
        // mulh x23, x23, x16       // ...................................................................................................*.......................
        // sub x25, x22, x28        // ....................................................................................................................*......
        // add x9, x22, x28         // .........................................................................................................*.................
        // mulh x5, x21, x16        // ..............................................................................*............................................
        // srai x27, x14, 32        // ..............................................................................*............................................
        // addi x7, x27, 8          // ......................................................................................*....................................
        // lh x28, 1*2*5(x10)       // ....................................................................................................*......................
        // mulh x29, x30, x16       // ................................................................................................................*..........
        // mulh x14, x13, x16       // .......................................................................................................*...................
        // add x17, x28, x23        // ...........................................................................................................*...............
        // sub x28, x28, x23        // ..........................................................................................................*................
        // lh x21, 1*2*4(x10)       // ................................................................................*..........................................
        // mulh x22, x7, x16        // .............................................................................................*.............................
        // lh x20, 1*2*2(x10)       // ..............................................................................................................*............
        // lh x15, 1*2*6(x10)       // ...................................................................................................*.......................
        // mulh x1, x31, x16        // .........................................................................................*.................................
        // sub x12, x21, x5         // ........................................................................................*..................................
        // add x19, x21, x5         // .....................................................................................*.....................................
        // mul x19, x19, x6         // .................................................................................................*.........................
        // sub x26, x20, x14        // .................................................................................................................*.........
        // add x18, x20, x14        // ...................................................................................................................*.......
        // ld x7, 2*8(x11)          // ...........................................................................................*...............................
        // mul x20, x17, x6         // ..............................................................................................................*............
        // sub x17, x15, x22        // ......................................................................................................*....................
        // add x14, x15, x22        // ................................................................................................................*..........
        // lh x27, 1*2*7(x10)       // .............................................................................................*.............................
        // mul x5, x28, x7          // ............................................................................................................*..............
        // mul x21, x17, x7         // ..........................................................................................................*................
        // add x4, x27, x1          // ....................................................................................................*......................
        // sub x13, x27, x1         // ............................................................................................................*..............
        // srai x15, x19, 32        // ...........................................................................................................*...............
        // srai x27, x20, 32        // ..................................................................................................................*........
        // mul x23, x12, x7         // ...............................................................................................*...........................
        // srai x5, x5, 32          // ......................................................................................................................*....
        // lh x22, 1*2*3(x10)       // .................................................................................................................*.........
        // mul x12, x14, x6         // ..................................................................................................................*........
        // srai x28, x23, 32        // .............................................................................................................*.............
        // mul x23, x4, x6          // .....................................................................................................*.....................
        // addi x1, x27, 8          // ...................................................................................................................*.......
        // addi x30, x15, 8         // ...............................................................................................................*...........
        // mul x13, x13, x7         // ......................................................................................................................*....
        // add x6, x22, x29         // .....................................................................................................................*.....
        // sub x27, x22, x29        // .....................................................................................................................*.....
        // addi x14, x5, 8          // .......................................................................................................................*...
        // mulh x19, x1, x16        // ....................................................................................................................*......
        // srai x4, x23, 32         // .........................................................................................................*.................
        // mulh x7, x30, x16        // ..........................................................................................................................*
        // srai x15, x12, 32        // ..........................................................................................................................*
        // addi x4, x4, 8           // .............................................................................................................*.............
        // addi x12, x28, 8         // ...............................................................................................................*...........
        // mulh x29, x4, x16        // ........................................................................................................................*..
        // srai x31, x21, 32        // .......................................................................................................................*...
        // sub x21, x9, x19         // .........................................................................................................................*.
        // add x28, x9, x19         // ........................................................................................................................*..

        addi gp, gp, -1
        bnegp, zero, ntt_rv64im_loop2
        addi x30, x15, 8           // ..............................................................*.......................................................
        mulh x22, x12, x16         // ..............................................................*.......................................................
        add x4, x8, x7             // ...............................................................*......................................................
        sub x20, x8, x7            // ...............................................................*......................................................
        srai x8, x13, 32           // ................................................................*.....................................................
        mulh x7, x30, x16          // ................................................................*.....................................................
        ld x23, 4*8(x11)           // .................................................................*....................................................
        sub x17, x6, x29           // .................................................................*....................................................
        add x9, x6, x29            // ..................................................................*...................................................
        mulh x30, x14, x16         // ..................................................................*...................................................
        addi x1, x8, 8             // ...................................................................*..................................................
        mul x8, x17, x23           // ....................................................................*.................................................
        sub x5, x18, x7            // ....................................................................*.................................................
        add x7, x18, x7            // .....................................................................*................................................
        mul x6, x5, x23            // ......................................................................*...............................................
        sub x13, x25, x30          // ......................................................................*...............................................
        ld x18, 3*8(x11)           // .......................................................................*..............................................
        add x25, x25, x30          // .......................................................................*..............................................
        sub x12, x24, x22          // ........................................................................*.............................................
        mul x23, x7, x18           // ..........................................................................*...........................................
        srai x8, x8, 32            // ..........................................................................*...........................................
        add x24, x24, x22          // ...........................................................................*..........................................
        srai x14, x6, 32           // ...........................................................................*..........................................
        addi x7, x31, 8            // ............................................................................*.........................................
        mulh x15, x1, x16          // ............................................................................*.........................................
        addi x6, x8, 8             // .............................................................................*........................................
        addi x30, x14, 8           // .............................................................................*........................................
        mul x1, x9, x18            // ..............................................................................*.......................................
        mulh x14, x30, x16         // ................................................................................*.....................................
        sub x30, x27, x15          // ................................................................................*.....................................
        add x8, x27, x15           // .................................................................................*....................................
        ld x27, 5*8(x11)           // .................................................................................*....................................
        srai x31, x1, 32           // ..................................................................................*...................................
        mulh x9, x7, x16           // ..................................................................................*...................................
        srai x23, x23, 32          // ...................................................................................*..................................
        ld x17, 6*8(x11)           // ...................................................................................*..................................
        add x15, x20, x14          // ....................................................................................*.................................
        mul x5, x8, x27            // ....................................................................................*.................................
        srai x7, x5, 32            // ........................................................................................*.............................
        mul x29, x30, x17          // ........................................................................................*.............................
        addi x1, x23, 8            // .........................................................................................*............................
        sub x20, x20, x14          // .........................................................................................*............................
        mulh x5, x6, x16           // ..........................................................................................*...........................
        add x30, x26, x9           // ..........................................................................................*...........................
        sub x22, x26, x9           // ...........................................................................................*..........................
        addi x31, x31, 8           // ...........................................................................................*..........................
        mul x23, x30, x27          // ............................................................................................*.........................
        add x27, x21, x5           // ..............................................................................................*.......................
        mul x6, x22, x17           // ..............................................................................................*.......................
        sub x5, x21, x5            // ...............................................................................................*......................
        addi x21, x7, 8            // ...............................................................................................*......................
        addi x11, x11, 7*8         // ................................................................................................*.....................
        sh x20, 1*2*6(x10)         // ................................................................................................*.....................
        mulh x26, x31, x16         // .................................................................................................*....................
        sh x27, 1*2*5(x10)         // .................................................................................................*....................
        srai x17, x6, 32           // ..................................................................................................*...................
        mulh x31, x1, x16          // ...................................................................................................*..................
        srai x1, x29, 32           // ...................................................................................................*..................
        srai x27, x23, 32          // ....................................................................................................*.................
        sh x15, 1*2*4(x10)         // ....................................................................................................*.................
        addi x20, x27, 8           // .....................................................................................................*................
        mulh x15, x21, x16         // .....................................................................................................*................
        sh x5, 1*2*7(x10)          // ......................................................................................................*...............
        addi x23, x1, 8            // ......................................................................................................*...............
        sub x8, x4, x31            // .......................................................................................................*..............
        mulh x22, x23, x16         // .......................................................................................................*..............
        addi x5, x17, 8            // ........................................................................................................*.............
        sh x8, 1*2*2(x10)          // ........................................................................................................*.............
        mulh x5, x5, x16           // .........................................................................................................*............
        add x4, x4, x31            // .........................................................................................................*............
        sub x31, x28, x26          // ..........................................................................................................*...........
        sh x4, 1*2*0(x10)          // ..........................................................................................................*...........
        sub x30, x13, x22          // ...........................................................................................................*..........
        add x4, x25, x15           // ...........................................................................................................*..........
        sh x30, 1*2*15(x10)        // ............................................................................................................*.........
        sh x4, 1*2*9(x10)          // .............................................................................................................*........
        mulh x4, x20, x16          // .............................................................................................................*........
        sh x31, 1*2*3(x10)         // ..............................................................................................................*.......
        add x31, x13, x22          // ..............................................................................................................*.......
        sh x31, 1*2*13(x10)        // ...............................................................................................................*......
        sub x15, x25, x15          // ...............................................................................................................*......
        sh x15, 1*2*11(x10)        // ................................................................................................................*.....
        add x26, x28, x26          // ................................................................................................................*.....
        sh x26, 1*2*1(x10)         // .................................................................................................................*....
        add x9, x24, x4            // .................................................................................................................*....
        sh x9, 1*2*8(x10)          // ..................................................................................................................*...
        sub x26, x24, x4           // ..................................................................................................................*...
        sh x26, 1*2*10(x10)        // ...................................................................................................................*..
        add x4, x12, x5            // ...................................................................................................................*..
        sh x4, 1*2*12(x10)         // ....................................................................................................................*.
        sub x27, x12, x5           // ....................................................................................................................*.
        sh x27, 1*2*14(x10)        // .....................................................................................................................*
        addi x10, x10, 32          // .....................................................................................................................*
  restore_regs
  addi sp, sp, 8*15
  ret